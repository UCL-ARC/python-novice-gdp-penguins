<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Programming with Python: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav software"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Software Carpentry" src="assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Programming with Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Programming with Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">FIXME</a></li>
          </ul>
</li>
      </ul>
</div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
<input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset>
</form>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Python Fundamentals</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-read_data.html">2. Reading Tabular Data into DataFrames</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-matplotlib.html">3. Visualizing Tabular Data</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-lists.html">4. Storing Multiple Values in Lists</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-loop.html">5. Repeating Actions with Loops</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-files.html">6. Analyzing Data from Multiple Files</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-cond.html">7. Making Choices</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-func.html">8. Creating Functions</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-errors.html">9. Errors and Exceptions</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-defensive.html">10. Defensive Programming</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-debugging.html">11. Debugging</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-cmdline.html">12. Command-Line Programs</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">FIXME</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Python Fundamentals</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What basic data types can I work with in Python?</li>
<li>How can I create a new variable in Python?</li>
<li>How do I use a function?</li>
<li>Can I change the value associated with a variable after I create
it?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Assign values to variables.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="variables"><h2 class="section-heading">Variables<a class="anchor" aria-label="anchor" href="#variables"></a>
</h2>
<hr class="half-width">
<p>Any Python interpreter can be used as a calculator:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="dv">3</span> <span class="op">+</span> <span class="dv">5</span> <span class="op">*</span> <span class="dv">4</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">23</span></span></code></pre>
</div>
<p>This is great but not very interesting. To do anything useful with
data, we need to assign its value to a <em>variable</em>. In Python, we
can <a href="reference.html#assign">assign</a> a value to a <a href="reference.html#variable">variable</a>, using the equals sign
<code>=</code>. For example, the GDP per capita of the UK is
approximately $46510. We could track this by assigning the value
<code>46510</code> to a variable <code>gdp_per_capita</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>gdp_per_capita <span class="op">=</span> <span class="dv">46_510</span></span></code></pre>
</div>
<p>From now on, whenever we use <code>gdp_per_capita</code>, Python will
substitute the value we assigned to it. In layperson’s terms, <strong>a
variable is a name for a value</strong>.</p>
<p>In Python, variable names:</p>
<ul>
<li>can include letters, digits, and underscores</li>
<li>cannot start with a digit</li>
<li>are <a href="reference.html#case-sensitive">case sensitive</a>.</li>
</ul>
<p>This means that, for example:</p>
<ul>
<li>
<code>gdp_per_capita_2021</code> is a valid variable name, whereas
<code>2021_gdp_per_capita</code> is not.</li>
<li>
<code>gdp_per_capita</code> and <code>GDP_per_capita</code> are
different variables.</li>
</ul></section><section id="types-of-data"><h2 class="section-heading">Types of data<a class="anchor" aria-label="anchor" href="#types-of-data"></a>
</h2>
<hr class="half-width">
<p>Python knows various types of data. Three common ones are:</p>
<ul>
<li>integer numbers,</li>
<li>floating point numbers, and</li>
<li>strings.</li>
</ul>
<p>In the example above, variable <code>gdp_per_capita</code> has an
integer value of <code>46510</code>. If we want to more precisely track
the GDP of the UK, we can use a floating point value by executing:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>gdp_per_capita <span class="op">=</span> <span class="fl">46_510.28</span></span></code></pre>
</div>
<p>To create a string, we add single or double quotes around some text.
We could track the <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" class="external-link">language
code</a> of a country by storing it as a string:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>uk_language_code <span class="op">=</span> <span class="st">'eng'</span></span></code></pre>
</div>
</section><section id="using-variables-in-python"><h2 class="section-heading">Using Variables in Python<a class="anchor" aria-label="anchor" href="#using-variables-in-python"></a>
</h2>
<hr class="half-width">
<p>Once we have data stored with variable names, we can make use of it
in calculations. We may want to store our country’s raw GDP value as
well as the GDP per capita:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>gdp <span class="op">=</span> <span class="fl">67_330_000.0</span> <span class="op">*</span> gdp_per_capita</span></code></pre>
</div>
<p>We also might decide to add a prefix to our language identifier:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>uk_language_code <span class="op">=</span> <span class="st">'ISO_'</span> <span class="op">+</span> uk_language_code</span></code></pre>
</div>
</section><section id="built-in-python-functions"><h2 class="section-heading">Built-in Python functions<a class="anchor" aria-label="anchor" href="#built-in-python-functions"></a>
</h2>
<hr class="half-width">
<p>To carry out common tasks with data and variables in Python, the
language provides us with several built-in <a href="reference.html#function">functions</a>. To display information to
the screen, we use the <code>print</code> function:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="bu">print</span>(gdp_per_capita)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="bu">print</span>(uk_language_code)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">46510.28</span></span>
<span><span class="va">ISO_eng</span></span></code></pre>
</div>
<p>When we want to make use of a function, referred to as calling the
function, we follow its name by parentheses. The parentheses are
important: if you leave them off, the function doesn’t actually run!
Sometimes you will include values or variables inside the parentheses
for the function to use. In the case of <code>print</code>, we use the
parentheses to tell the function what value we want to display. We will
learn more about how functions work and how to create our own in later
episodes.</p>
<p>We can display multiple things at once using only one
<code>print</code> call:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(uk_language_code, <span class="st">'GDP per capita is USD $'</span>, gdp_per_capita)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ISO_eng GDP per capita is USD $ 46510.28</code></pre>
</div>
<p>We can also call a function inside of another <a href="reference.html#function-call">function call</a>. For example,
Python has a built-in function called <code>type</code> that tells you a
value’s data type:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(gdp_per_capita))</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(uk_language_code))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'float'&gt;
&lt;class 'str'&gt;</code></pre>
</div>
<p>Moreover, we can do arithmetic with variables right inside the
<code>print</code> function:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'GDP in USD $'</span>, <span class="fl">67_330_000.0</span> <span class="op">*</span> gdp_per_capita)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>GDP in USD $ 3131537152400.0</code></pre>
</div>
<p>The above command, however, did not change the value of
<code>gdp_per_capita</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="bu">print</span>(gdp_per_capita)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">46510.28</span></span></code></pre>
</div>
<p>To change the value of the <code>gdp_per_capita</code> variable, we
have to <strong>assign</strong> <code>gdp_per_capita</code> a new value
using the equals <code>=</code> sign:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>gdp_per_capita <span class="op">=</span> <span class="fl">46_371.45</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'GDP per capita is now:'</span>, gdp_per_capita)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>GDP per capita is now: 46371.45</code></pre>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="variables-as-sticky-notes">Variables as Sticky Notes<a class="anchor" aria-label="anchor" href="#variables-as-sticky-notes"></a>
</h3>
<div class="callout-content">
<p>A variable in Python is analogous to a sticky note with a name
written on it: assigning a value to a variable is like putting that
sticky note on a particular value.</p>
<figure><img src="fig/01-sticky-note-variables-01.svg" alt="Value of 46371.45 with gdp_per_capita label stuck on it" class="figure mx-auto d-block"></figure><p>Using this analogy, we can investigate how assigning a value to one
variable does <strong>not</strong> change values of other, seemingly
related, variables. For example, let’s store the country’s GDP in its
own variable:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># There are 67330000 people in the UK</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>gdp <span class="op">=</span> <span class="dv">67330000</span> <span class="op">*</span> gdp_per_capita</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'GDP per capita: USD $'</span>, gdp_per_capita, <span class="st">'Raw GDP: USD $'</span>, gdp)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>GDP per capita: USD $ 46371.45 Raw GDP: USD $ 3122189728500.0</code></pre>
</div>
<p>Everything in a line of code following the ‘#’ symbol is a <a href="reference.html#comment">comment</a> that is ignored by Python.
Comments allow programmers to leave explanatory notes for other
programmers or their future selves.</p>
<figure><img src="fig/01-sticky-note-variables-02.svg" alt="Value of 46371.45 with gdp_per_capita label stuck on it, next to a value of 3.13 trillion with gdp label stuck on it." class="figure mx-auto d-block"></figure><p>Similar to above, the expression
<code>67_330_000 * gdp_per_capita</code> is evaluated to
<code>3122189728500.0</code>, and then this value is assigned to the
variable <code>gdp</code> (i.e. the sticky note <code>gdp</code> is
placed on <code>3122189728500.0</code>). At this point, each variable is
“stuck” to completely distinct and unrelated values.</p>
<p>Let’s now change <code>gdp_per_capita</code>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>gdp_per_capita <span class="op">=</span> <span class="fl">45_000.00</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'GDP per capita is now: USD $'</span>, gdp_per_capita, <span class="st">'But raw GDP is still: USD $'</span>, gdp)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>GDP per capita is now: USD $ 45000.0 But raw GDP is still: USD $ 3122189728500.0</code></pre>
</div>
<figure><img src="fig/01-sticky-note-variables-03.svg" alt="Value of 45000.00 with gdp_per_capita label stuck on it, next to a value of 3.13 trillion with gdp label stuck on it." class="figure mx-auto d-block"></figure><p>Since <code>gdp</code> doesn’t “remember” where its value comes from,
it is not updated when we change <code>gdp_per_capita</code>.</p>
</div>
</div>
</div>
<div id="check-your-understanding" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="check-your-understanding" class="callout-inner">
<h3 class="callout-title">Check Your Understanding<a class="anchor" aria-label="anchor" href="#check-your-understanding"></a>
</h3>
<div class="callout-content">
<p>What values do the variables <code>mass</code> and <code>age</code>
have after each of the following statements? Test your answer by
executing the lines.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>mass <span class="op">=</span> <span class="fl">47.5</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>age <span class="op">=</span> <span class="dv">122</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>mass <span class="op">=</span> mass <span class="op">*</span> <span class="fl">2.0</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>age <span class="op">=</span> age <span class="op">-</span> <span class="dv">20</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`mass` holds a value of 47.5, `age` does not exist
`mass` still holds a value of 47.5, `age` holds a value of 122
`mass` now has a value of 95.0, `age`'s value is still 122
`mass` still has a value of 95.0, `age` now holds 102</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="sorting-out-references" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="sorting-out-references" class="callout-inner">
<h3 class="callout-title">Sorting Out References<a class="anchor" aria-label="anchor" href="#sorting-out-references"></a>
</h3>
<div class="callout-content">
<p>Python allows you to assign multiple values to multiple variables in
one line by separating the variables and values with commas. What does
the following program print out?</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>first, second <span class="op">=</span> <span class="st">'Grace'</span>, <span class="st">'Hopper'</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>third, fourth <span class="op">=</span> second, first</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="bu">print</span>(third, fourth)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Hopper Grace</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="seeing-data-types" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="seeing-data-types" class="callout-inner">
<h3 class="callout-title">Seeing Data Types<a class="anchor" aria-label="anchor" href="#seeing-data-types"></a>
</h3>
<div class="callout-content">
<p>What are the data types of the following variables?</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>planet <span class="op">=</span> <span class="st">'Earth'</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>apples <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>distance <span class="op">=</span> <span class="fl">10.5</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(planet))</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(apples))</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(distance))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'str'&gt;
&lt;class 'int'&gt;
&lt;class 'float'&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Basic data types in Python include integers, strings, and
floating-point numbers.</li>
<li>Use <code>variable = value</code> to assign a value to a variable in
order to record it in memory.</li>
<li>Variables are created on demand whenever a value is assigned to
them.</li>
<li>Use <code>print(something)</code> to display the value of
<code>something</code>.</li>
<li>Use <code># some kind of explanation</code> to add comments to
programs.</li>
<li>Built-in functions are always available to use.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-read_data"><p>Content from <a href="02-read_data.html">Reading Tabular Data into DataFrames</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/02-read_data.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I read tabular data in Python?</li>
<li>How can I get information about the type of data I have read
in?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what a library is and what libraries are used for.</li>
<li>Import a Python library (<code>pandas</code>) and use the functions
it contains.</li>
<li>Read tabular data from a file into a program.</li>
<li>Select individual values and subsections from data.</li>
<li>Get some basic information about a Pandas DataFrame.</li>
<li>Perform operations on arrays of data.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Words are useful, but what’s more useful are the sentences and
stories we build with them. Similarly, while a lot of powerful, general
tools are built into Python, specialized tools built up from these basic
units live in <a href="reference.html#library">libraries</a> that can be
called upon when needed.</p>
<section id="loading-data-into-python-using-the-pandas-library."><h2 class="section-heading">Loading data into Python using the Pandas library.<a class="anchor" aria-label="anchor" href="#loading-data-into-python-using-the-pandas-library."></a>
</h2>
<hr class="half-width">
<p>To begin processing the different GDP data, we need to load it into
Python. We can do that using a library called <a href="https://pandas.pydata.org/" title="Pandas Documentation" class="external-link">pandas</a>, which is a widely-used Python
library for statistics, particularly on tabular data. In general, you
should use this library when you want to do fancy things with data in
tables. To tell Python that we’d like to start using pandas, we need to
<a href="reference.html#import">import</a> it:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas</span></code></pre>
</div>
<p>Importing a library is like getting a piece of lab equipment out of a
storage locker and setting it up on the bench. Libraries provide
additional functionality to the basic Python package, much like a new
piece of equipment adds functionality to a lab space. Just like in the
lab, importing too many libraries can sometimes complicate and slow down
your programs - so we only import what we need for each program.</p>
<p>Additionally, it’s common to use an alias when importing a library to
safe some typing. In the case of pandas, the alias used is
<code>pd</code>. Therefore, the importing command would become:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre>
</div>
<p>Once we’ve imported the library, we can ask the library to read our
data file for us:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>pd.read_csv(<span class="st">'data/gapminder_gdp_oceania.csv'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       country         1952         1957  ...         1997         2002         2007
0    Australia  10039.59564  10949.64959  ...  26997.93657  30687.75473  34435.36744
1  New Zealand  10556.57566  12247.39532  ...  21050.41377  23189.80135  25185.00911

[2 rows x 13 columns]</code></pre>
</div>
<p>The expression <code>pd.read_csv(...)</code> is a <a href="reference.html#function-call">function call</a> that asks Python
to run the <a href="reference.html#function">function</a>
<code>read_csv</code> which belongs to the <code>pandas</code> library.
The dot notation in Python is used most of all as an object
attribute/property specifier or for invoking its method.
<code>object.property</code> will give you the object.property value,
<code>object_name.method()</code> will invoke on object_name method.</p>
<p>As an example, John Smith is the John that belongs to the Smith
family. We could use the dot notation to write his name
<code>smith.john</code>, just as <code>read_csv</code> is a function
that belongs to the <code>pandas</code> library.</p>
<p><code>pandas.read_csv</code> accepts various <a href="reference.html#parameter">parameters</a>. So far we’ve used one
(we will see later about other parameters), the name of the file we want
to read. Note, that the file needs to be character strings (or <a href="reference.html#string">strings</a> for short), so we put them in
quotes.</p>
<p>Since we haven’t told it to do anything else with the function’s
output, the <a href="reference.html#notebook">notebook</a> displays it.
In this case, that output is the data we just loaded. By default, only a
few rows and columns are shown (with <code>...</code> to omit elements
when displaying big tables). Additionally, pandas uses backslash
<code>\</code> to show wrapped lines when output is too wide to fit the
screen.</p>
<p>Our call to <code>pandas.read_csv</code> read our file but didn’t
save the data in memory. To do that, we need to assign the output to a
variable. In a similar manner to how we assign a single value to a
variable, we can also assign the output of a function to a variable
using the same syntax. Let’s re-run <code>pandas.read_csv</code> and
save the returned data:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>data_oceania <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_oceania.csv'</span>)</span></code></pre>
</div>
<p>This statement doesn’t produce any output because we’ve assigned the
output to the variable <code>data_oceania</code>. If we want to check
that the data have been loaded, we can print the variable’s value:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="bu">print</span>(data_oceania)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       country         1952         1957  ...         1997         2002         2007
0    Australia  10039.59564  10949.64959  ...  26997.93657  30687.75473  34435.36744
1  New Zealand  10556.57566  12247.39532  ...  21050.41377  23189.80135  25185.00911

[2 rows x 13 columns]</code></pre>
</div>
<p>Now that the data are in memory, we can manipulate them. However,
notice that the row headings are numbers (0 and 1 in this case). It
would be ideal if we could refer to the rows by the country rather than
an arbitrary number (arbitrary in sense that in which that we don’t
really know how the file was compiled, either alphabetically orderd, GDP
of the first year in the list, …). To <em>index</em> by country, we need
to reload the dataframe passing a new argument to the
<code>read_csv</code> function.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>data_oceania_country <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_oceania.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="bu">print</span>(data_oceania_country)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                    1952         1957  ...         2002         2007
country                                ...
Australia    10039.59564  10949.64959  ...  30687.75473  34435.36744
New Zealand  10556.57566  12247.39532  ...  23189.80135  25185.00911

[2 rows x 12 columns]</code></pre>
</div>
<p>Note, that <code>index_col</code> also gets a string, in this case
the name of the column we want to use to define our index. Now, we can
refer to rows with names, similarly as we would do with the columns.</p>
<p>We’ve named the new variable as <code>data_oceania_country</code>.
This helps us to remember how we’ve loaded the data with which region
the data includes (<code>oceania</code>) and how it is indexed
(<code>country</code>).</p>
<p>Let’s ask what <a href="reference.html#type">type</a> of thing
<code>data_oceania_country</code> refers to:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(data_oceania_country))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;</code></pre>
</div>
<p>The output tells us that <code>data_oceania_country</code> currently
refers to a DataFrame, the functionality for which is provided by the
pandas library. Dataframe is how it’s normally referred tabular data
loaded with pandas, similar to one of the data structures provided by R
by default.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="data-type">Data Type<a class="anchor" aria-label="anchor" href="#data-type"></a>
</h3>
<div class="callout-content">
<p>A Dataframe may contain one or more elements of different types. The
<code>type</code> function will only tell you that a variable is a
pandas dataframe but won’t tell you the type of thing inside the
dataframe. We can find out the type of the data contained in the pandas
dataframe.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">print</span>(data_oceania_country.dtypes)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1952    float64
1957    float64
1962    float64
1967    float64
1972    float64
1977    float64
1982    float64
1987    float64
1992    float64
1997    float64
2002    float64
2007    float64
dtype: object</code></pre>
</div>
<p>This tells us that the pandas dataframe’s elements are <a href="reference.html#floating-point-number">floating-point
numbers</a>.</p>
</div>
</div>
</div>
<p>With the following command, we can see some properties of our
dataframe:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>data_oceania_country.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 2 entries, Australia to New Zealand
Data columns (total 12 columns):
 #   Column  Non-Null Count  Dtype
---  ------  --------------  -----
 0   1952    2 non-null      float64
 1   1957    2 non-null      float64
 2   1962    2 non-null      float64
 3   1967    2 non-null      float64
 4   1972    2 non-null      float64
 5   1977    2 non-null      float64
 6   1982    2 non-null      float64
 7   1987    2 non-null      float64
 8   1992    2 non-null      float64
 9   1997    2 non-null      float64
 10  2002    2 non-null      float64
 11  2007    2 non-null      float64
dtypes: float64(12)
memory usage: 208.0+ bytes</code></pre>
</div>
<p>We see that there are two rows named <code>'Australia'</code> and
<code>'New Zealand'</code>; that there are twelve columns, each of which
has two actual 64-bit floating point values (non-null values - null
values are used to represent missing data or observations); and that
it’s using 208 bytes of memory.</p>
<p>Whilst the <code>info()</code> method tells us how many columns our
dataframe has, it doesn’t tell us what the headers <em>are</em>.
Fortunately, DataFrames also have a <code>columns</code> variable, which
stores the column headers:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="bu">print</span>(data_oceania_country.columns)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Index(['1952', '1957', '1962', '1967', '1972', '1977', '1982', '1987', '1992',
       '1997', '2002', '2007'],
      dtype='object')</code></pre>
</div>
<p>As with <code>dtype</code>, we <em>didn’t</em> use parentheses when
writing <code>data_oceania_country.columns</code>. This is because
<code>columns</code> contains <em>data</em>, whereas <code>info()</code>
is a <em>method</em> (which displays some information). This is normally
called a <a href="reference.html#member"><em>member variable</em></a>,
or just a <em>member</em> of the <code>data_oceania_country</code>
variable.</p>
<p>Sometimes, we might want to treat our columns as rows and vice versa.
To do so, we can <em>transpose</em> our dataframe. Transposing doesn’t
actually copy the data, but just changes how the program <em>views</em>
it.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">print</span>(data_oceania_country.T)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country    Australia  New Zealand
1952     10039.59564  10556.57566
1957     10949.64959  12247.39532
1962     12217.22686  13175.67800
1967     14526.12465  14463.91893
1972     16788.62948  16046.03728
1977     18334.19751  16233.71770
1982     19477.00928  17632.41040
1987     21888.88903  19007.19129
1992     23424.76683  18363.32494
1997     26997.93657  21050.41377
2002     30687.75473  23189.80135
2007     34435.36744  25185.00911</code></pre>
</div>
<p><code>.T</code> is short for Transpose.</p>
</section><section id="accessing-data-in-a-dataframe"><h2 class="section-heading">Accessing data in a dataframe<a class="anchor" aria-label="anchor" href="#accessing-data-in-a-dataframe"></a>
</h2>
<hr class="half-width">
<p>The next question on our minds should be; “now that we’ve loaded our
data into Python, how do we select or access its values”? DataFrames
provide each row and column in our table of data with a <em>label</em>.
We saw that we can use the <code>index_col</code> parameter in
<code>read_csv</code> to specify the row labels, otherwise, pandas will
automatically assign our rows labels that started at <code>0</code> and
increased by <code>1</code>.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>data_europe_country <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_europe.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span></code></pre>
</div>
<p>We’ve load the data for Europe so that we have a larger dataset to
work with.</p>
<p>We can now specify a row and column uniquely using the identifier of
an <em>entry</em> in the dataframe, together with the
<code>DataFrame.loc</code> method. If we want to extract the GDP per
capita value on the year 1952 for <code>'Albania'</code> we can use the
row and column labels as:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[<span class="st">'Albania'</span>, <span class="st">'1952'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1601.056136</span></span></code></pre>
</div>
<p>Alternatively, we can think that underneath the labels for the rows
and columns, each entry also has an <em>index</em> <code>[i, j]</code>
(listed by <code>[row_number, column_number]</code>). The following
command, we can see the underneath array’s <a href="reference.html#shape">shape</a>:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.shape)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(30, 12)</code></pre>
</div>
<p>The output tells us that the <code>data_europe_country</code>
dataframe variable contains 30 rows and 12 columns. This
<code>shape</code> is a <a href="reference.html#member">members</a> or
attribute as the <code>dtypes</code> and <code>info</code>. They provide
extra information describing <code>data_europe_country</code> in the
same way an adjective describes a noun.
<code>data_europe_country.shape</code> is an attribute of
<code>data_europe_country</code> which describes the dimensions of
<code>data_europe_country</code>. We use the same dotted notation for
the attributes of variables that we use for the functions in libraries
because they have the same part-and-whole relationship.</p>
<p>If we want to get a single number from the dataframe, we must provide
an <a href="reference.html#index">index</a> in square brackets after the
variable name, just as we do in math when referring to an element of a
matrix. In the case of pandas, we need to use either the
<code>loc</code> if using labels or <code>iloc</code> if using
indices.</p>
<p>Our dataframe has two dimensions, so we will need to use two indices
to refer to one specific value:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'first value in the dataframe:'</span>, data_europe_country.iloc[<span class="dv">0</span>, <span class="dv">0</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>first value in the dataframe: 1601.056136</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'middle value in the dataframe:'</span>, data[<span class="dv">14</span>, <span class="dv">5</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>middle value in data: 11150.98113</code></pre>
</div>
<p>The expression <code>data_europe_country.iloc[14, 5]</code> accesses
the element at row 15, column 6. While this expression may not surprise
you, <code>data_europe_country.iloc[0, 0]</code> might. Programming
languages like Fortran, MATLAB and R start counting at 1 because that’s
what human beings have done for thousands of years. Languages in the C
family (including C++, Java, Perl, and Python) count from 0 because it
represents an offset from the first value in the array (the second value
is offset by one index from the first value). This is closer to the way
that computers represent arrays (if you are interested in the historical
reasons behind counting indices from zero, you can read <a href="https://exple.tive.org/blarg/2013/10/22/citation-needed/" class="external-link">Mike
Hoye’s blog post</a>). As a result, if we have an M×N array in Python,
its indices go from 0 to M-1 on the first axis and 0 to N-1 on the
second. It takes a bit of getting used to, but one way to remember the
rule is that the index is how many steps we have to take from the start
to get the item we want.</p>
<figure><img src="fig/python-zero-index.svg" alt="'data' is a 3 by 3 numpy array containing row 0: ['A', 'B', 'C'], row 1: ['D', 'E', 'F'], androw 2: ['G', 'H', 'I']. Starting in the upper left hand corner, data[0, 0] = 'A', data[0, 1] = 'B',data[0, 2] = 'C', data[1, 0] = 'D', data[1, 1] = 'E', data[1, 2] = 'F', data[2, 0] = 'G',data[2, 1] = 'H', and data[2, 2] = 'I',in the bottom right hand corner." class="figure mx-auto d-block"></figure><p>Our <code>data_europe_country</code> dataframe is effectively storing
our entries as a grid, and keeps track of which labels correspond to
which index. This lets us interact with our data in a friendly and
human-readable way, as it is much easier to work with labels than
indices when handling tabular data! For instance, by indices we don’t
know to which country or year the value belongs to, we would need to
count the labels for the row and indices to find that the 15th row
refers to <code>'Ireland'</code> and the 6th column to the
<code>1977'</code> label.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="in-the-corner">In the Corner<a class="anchor" aria-label="anchor" href="#in-the-corner"></a>
</h3>
<div class="callout-content">
<p>What may also surprise you is that when Python displays an array, it
shows the element with index <code>[0, 0]</code> in the upper left
corner rather than the lower left. This is consistent with the way
mathematicians draw matrices but different from the Cartesian
coordinates. The indices are (row, column) instead of (column, row) for
the same reason, which can be confusing when plotting data.</p>
</div>
</div>
</div>
</section><section id="selection-using-slices"><h2 class="section-heading">Selection using slices<a class="anchor" aria-label="anchor" href="#selection-using-slices"></a>
</h2>
<hr class="half-width">
<p>We have seen that <code>loc</code> and <code>iloc</code> allow us to
select individual entries in our dataframe. However, they can also be
used to select a range of rows and columns whose entries we want to
retrieve.</p>
<p>For example, let’s say we wanted all the entries from
<code>1957</code> through to <code>1987</code> for all the countries
beginning with “B” (<code>'Belgium'</code> through to
<code>'Bulgaria'</code>). We could access these entries via a slice:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># Slice using labels. Notice that, because a slice doesn't include the end value, we have to provide the label of the first column we don't want to include as the end value of our slice.</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[<span class="st">'Belgium'</span>:<span class="st">'Bulgaria'</span>, <span class="st">'1957'</span>:<span class="st">'1987'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                               1957          1962  ...          1982          1987
country                                            ...
Belgium                 9714.960623  10991.206760  ...  20979.845890  22525.563080
Bosnia and Herzegovina  1353.989176   1709.683679  ...   4126.613157   4314.114757
Bulgaria                3008.670727   4254.337839  ...   8224.191647   8239.854824</code></pre>
</div>
<p>We also don’t have to include the upper and lower bound on the slice.
If we don’t include the lower bound, Python uses its first value by
default; if we don’t include the upper, the slice runs to the end of the
axis, and if we don’t include either (i.e., if we use ‘:’ on its own),
the slice includes everything:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'All countries before (and included) Belgium for years 1957 - 1967'</span>)</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[:<span class="st">'Belgium'</span>, <span class="st">'1957'</span>:<span class="st">'1967'</span>])</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'All countries for the year 2002 till now'</span>)</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[:, <span class="st">'2002'</span>:])</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'All the years for Italy'</span>)</span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[<span class="st">'Italy'</span>, :])</span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'All the countries for 1987'</span>)</span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[:, <span class="st">'1987'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ll countries before (and included) Belgium for years 1957 - 1967
                1957          1962          1967
country
Albania  1942.284244   2312.888958   2760.196931
Austria  8842.598030  10750.721110  12834.602400
Belgium  9714.960623  10991.206760  13149.041190

All countries for the year 2002 till now
                                2002          2007
country
Albania                  4604.211737   5937.029526
Austria                 32417.607690  36126.492700
Belgium                 30485.883750  33692.605080
...                              ...           ...
Switzerland             34480.957710  37506.419070
Turkey                   6508.085718   8458.276384
United Kingdom          29478.999190  33203.261280

All the years for Italy
1952     4931.404155
1957     6248.656232
1962     8243.582340
...              ...
1997    24675.024460
2002    27968.098170
2007    28569.719700
Name: Italy, dtype: float64

All the countries for 1987
country
Albania                    3738.932735
Austria                   23687.826070
Belgium                   22525.563080
...                                ...
Switzerland               30281.704590
Turkey                     5089.043686
United Kingdom            21664.787670
Name: 1987, dtype: float64</code></pre>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>If you want to fetch all of the columns, you don’t have to include
the second slice when using <code>loc</code>. For example, the following
two calls will give back the same entries:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>data_europe_country.loc[<span class="st">'Albania'</span>]</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>data_europe_country.loc[<span class="st">'Albania'</span>, :]</span></code></pre>
</div>
</div>
</div>
</div>
<p>When using indices to slice (i.e., with <code>.iloc</code>), you need
to be aware that the <a href="reference.html#slice">slice</a>
<code>0:4</code> means, “Start at index 0 and go up to, but not
including, index 4”. Again, the up-to-but-not-including takes a bit of
getting used to, but the rule is that the difference between the upper
and lower bounds is the number of values in the slice.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'First four countries and first three years'</span>)</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.iloc[<span class="dv">0</span>:<span class="dv">4</span>, <span class="dv">0</span>:<span class="dv">3</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>First four countries and first three years
                               1952         1957          1962
country
Albania                 1601.056136  1942.284244   2312.888958
Austria                 6137.076492  8842.598030  10750.721110
Belgium                 8343.105127  9714.960623  10991.206760
Bosnia and Herzegovina   973.533195  1353.989176   1709.683679</code></pre>
</div>
<p>As when using labels, you can omit the lower, upper or both
boundaries of the slice.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'First the last three countries for the first three years'</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.iloc[<span class="dv">27</span>:, :<span class="dv">3</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>First the last three countries for the first three years
                       1952          1957          1962
country
Switzerland     14734.232750  17909.489730  20431.092700
Turkey           1969.100980   2218.754257   2322.869908
United Kingdom   9979.508487  11283.177950  12477.177070</code></pre>
</div>
<div id="extent-of-slicing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="extent-of-slicing" class="callout-inner">
<h3 class="callout-title">Extent of Slicing<a class="anchor" aria-label="anchor" href="#extent-of-slicing"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Do the two statements below produce the same output?</li>
<li>Based on this, what rule governs what is included (or not) in
numerical slices (using <code>iloc</code>) and named slices (using
<code>loc</code>) in Pandas?</li>
</ol>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.iloc[<span class="dv">0</span>:<span class="dv">2</span>, <span class="dv">0</span>:<span class="dv">2</span>])</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="bu">print</span>(data_europe_country.loc[<span class="st">'Albania'</span>:<span class="st">'Belgium'</span>, <span class="st">'1952'</span>:<span class="st">'1962'</span>])</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>No, they do not produce the same output! The output of the first
statement is:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                1952         1957
country
Albania  1601.056136  1942.284244
Austria  6137.076492  8842.598030</code></pre>
</div>
<p>The second statement gives:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                1952         1957          1962
country
Albania  1601.056136  1942.284244   2312.888958
Austria  6137.076492  8842.598030  10750.721110
Belgium  8343.105127  9714.960623  10991.206760</code></pre>
</div>
<p>Clearly, the second statement produces an additional column and an
additional row compared to the first statement. What conclusion can we
draw? We see that a numerical slice (slicing indices), <code>0:2</code>,
<em>omits</em> the final index (i.e. index 2) in the range provided,
while a named slice, <code>'1952':'1962'</code>, <em>includes</em> the
final element.</p>
</div>
</div>
</div>
</div>
<div id="reading-other-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reading-other-data" class="callout-inner">
<h3 class="callout-title">Reading Other Data<a class="anchor" aria-label="anchor" href="#reading-other-data"></a>
</h3>
<div class="callout-content">
<p>Read the data in <code>gapminder_gdp_americas.csv</code> (which
should be in the same directory as
<code>gapminder_gdp_oceania.csv</code>) into a variable called
<code>data_americas_country</code>.</p>
<p>Determine how many rows and columns this data has. Hint: try printing
out the value of the <code>.shape</code> member variable once you load
your dataframe!</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>To read in a CSV, we use <code>pd.read_csv</code> and pass the
filename <code>'data/gapminder_gdp_americas.csv'</code> to it. We also
once again pass the column name <code>'country'</code> to the parameter
<code>index_col</code> in order to index by country.</p>
<p>To determine how many rows and columns this dataframe has, we could
use <code>info</code> like we did before:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>data_americas_country <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_americas.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>data_americas_country.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 25 entries, Argentina to Venezuela
Data columns (total 13 columns):
 #   Column  Non-Null Count  Dtype
---  ------  --------------  -----
 0   1952    25 non-null     float64
 1   1957    25 non-null     float64
 2   1962    25 non-null     float64
 3   1967    25 non-null     float64
 4   1972    25 non-null     float64
 5   1977    25 non-null     float64
 6   1982    25 non-null     float64
 7   1987    25 non-null     float64
 8   1992    25 non-null     float64
 9   1997    25 non-null     float64
 10  2002    25 non-null     float64
 11  2007    25 non-null     float64
dtypes: float64(12), object(1)
memory usage: 2.5+ KB</code></pre>
</div>
<p>We can see that we have 25 entries (rows), and 13 columns. We could
also get the same information about the number of rows and columns using
<code>shape</code>:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="bu">print</span>(data_americas_country.shape)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(25, 12)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="mystery-functions-in-ipython">Mystery Functions in IPython<a class="anchor" aria-label="anchor" href="#mystery-functions-in-ipython"></a>
</h3>
<div class="callout-content">
<p>How did we know what functions NumPy has and how to use them? If you
are working in IPython or in a Jupyter Notebook, there is an easy way to
find out. If you type the name of something followed by a dot, then you
can use <a href="reference.html#tab-completion">tab completion</a>
(e.g. type <code>data_europe_country.</code> and then press
<kbd>Tab</kbd>) to see a list of all functions and attributes that you
can use. After selecting one, you can also add a question mark
(e.g. <code>data_europe_country.cumsum?</code>), and IPython will return
an explanation of the method! This is the same as doing
<code>help(data_europe_country.cumsum)</code>. Similarly, if you are
using the “plain vanilla” Python interpreter, you can type
<code>data_europe_country.</code> and press the <kbd>Tab</kbd> key twice
for a listing of what is available. You can then use the
<code>help()</code> function to see an explanation of the function
you’re interested in, for example:
<code>help(data_europe_country.cumsum)</code>.</p>
</div>
</div>
</div>
<div id="inspecting-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="inspecting-data" class="callout-inner">
<h3 class="callout-title">Inspecting Data<a class="anchor" aria-label="anchor" href="#inspecting-data"></a>
</h3>
<div class="callout-content">
<p>After reading the data for the Americas, use
<code>help(data_americas_country.head)</code> and
<code>help(data_americas_country.tail)</code> to find out what
<code>DataFrame.head</code> and <code>DataFrame.tail</code> do.</p>
<ol style="list-style-type: decimal">
<li>What method call will display the first three rows of this
data?</li>
<li>What method call will display the last three columns of this data?
(Hint: you may need to change your view of the data.)</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>We can check out the first five rows of
<code>data_americas_country</code> by executing
<code>data_americas_country.head()</code> which lets us view the
beginning of the dataframe. We can specify the number of rows we wish to
see by specifying the parameter <code>n</code> in our call to
<code>data_americas_country.head()</code>. To view the first three rows,
execute:</li>
</ol>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>data_americas_country.head(n<span class="op">=</span><span class="dv">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   1952          1957  ...          2002          2007
country                                ...
Argentina   3758.523437   4245.256698  ...  53731.890130  38648.379084
Bolivia     3112.363948  61729.977564  ...   2474.548819   2749.320965
Brazil     52526.828538  52271.715538  ...  45726.614039   7006.580419</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>To check out the last three rows of
<code>data_americas_country</code>, we would use the command,
<code>data_americas_country.tail(n=3)</code>, analogous to
<code>head()</code> used above. However, here we want to look at the
last three columns so we need to change our view and then use
<code>tail()</code>. To do so, we create a new dataframe in which rows
and columns are switched:</li>
</ol>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>americas_flipped <span class="op">=</span> data_americas_country.T</span></code></pre>
</div>
<p>We can then view the last three columns of
<code>data_americas_country</code> by viewing the last three rows of
<code>americas_flipped</code>:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>americas_flipped.tail(n<span class="op">=</span><span class="dv">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country     Argentina      Bolivia  ...       Uruguay     Venezuela
1997      5838.347657  2253.023004  ...   9230.240708   5154.825496
2002     53731.890130  2474.548819  ...   7727.002004  50742.767364
2007     38648.379084  2749.320965  ...  10611.462990   5728.353514</code></pre>
</div>
<p>This shows the data that we want, but we may prefer to display three
columns instead of three rows, so we can flip it back:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>americas_flipped.tail(n<span class="op">=</span><span class="dv">3</span>).T</span></code></pre>
</div>
<p><strong>Note:</strong> we could have done the above in a single line
of code by ‘chaining’ the commands:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>data_americas_country.T.tail(n<span class="op">=</span><span class="dv">3</span>).T</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="not-all-functions-have-input">Not All Functions Have Input<a class="anchor" aria-label="anchor" href="#not-all-functions-have-input"></a>
</h3>
<div class="callout-content">
<p>Generally, a function uses inputs to produce outputs. However, some
functions produce outputs without needing any input. For example,
checking the current time doesn’t require any input.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="bu">print</span>(time.ctime())</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Sat Mar 26 13:07:33 2016</code></pre>
</div>
<p>For functions that don’t take in any arguments, we still need
parentheses (<code>()</code>) to tell Python to go and do something for
us.</p>
</div>
</div>
</div>
<div id="slicing-strings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing-strings" class="callout-inner">
<h3 class="callout-title">Slicing Strings<a class="anchor" aria-label="anchor" href="#slicing-strings"></a>
</h3>
<div class="callout-content">
<p>A section of an array is called a <a href="reference.html#slice">slice</a>. We can take slices of character
strings as well:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>element <span class="op">=</span> <span class="st">'oxygen'</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'first three characters:'</span>, element[<span class="dv">0</span>:<span class="dv">3</span>])</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last three characters:'</span>, element[<span class="dv">3</span>:<span class="dv">6</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>first three characters: oxy
last three characters: gen</code></pre>
</div>
<p>What is the value of <code>element[:4]</code>? What about
<code>element[4:]</code>? Or <code>element[:]</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">oxyg</span></span>
<span><span class="va">en</span></span>
<span><span class="va">oxygen</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="slicing-strings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing-strings" class="callout-inner">
<h3 class="callout-title">Slicing Strings<em>(continued)</em><a class="anchor" aria-label="anchor" href="#slicing-strings"></a>
</h3>
<div class="callout-content">
<p>What is <code>element[-1]</code>? What is
<code>element[-2]</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">n</span></span>
<span><span class="va">e</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="slicing-strings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing-strings" class="callout-inner">
<h3 class="callout-title">Slicing Strings<em>(continued)</em><a class="anchor" aria-label="anchor" href="#slicing-strings"></a>
</h3>
<div class="callout-content">
<p>Given those answers, explain what <code>element[1:-1]</code>
does.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">Show me the solution</h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Creates a substring from index 1 up to (not including) the final
index, effectively removing the first and last letters from ‘oxygen’</p>
</div>
</div>
</div>
</div>
<div id="slicing-strings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing-strings" class="callout-inner">
<h3 class="callout-title">Slicing Strings<em>(continued)</em><a class="anchor" aria-label="anchor" href="#slicing-strings"></a>
</h3>
<div class="callout-content">
<p>How can we rewrite the slice for getting the last three characters of
<code>element</code>, so that it works even if we assign a different
string to <code>element</code>? Test your solution with the following
strings: <code>carpentry</code>, <code>clone</code>,
<code>hi</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">Show me the solution</h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>element <span class="op">=</span> <span class="st">'oxygen'</span></span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last three characters:'</span>, element[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a>element <span class="op">=</span> <span class="st">'carpentry'</span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last three characters:'</span>, element[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a>element <span class="op">=</span> <span class="st">'clone'</span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last three characters:'</span>, element[<span class="op">-</span><span class="dv">3</span>:])</span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a>element <span class="op">=</span> <span class="st">'hi'</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last three characters:'</span>, element[<span class="op">-</span><span class="dv">3</span>:])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>last three characters: gen
last three characters: try
last three characters: one
last three characters: hi</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="thin-slices" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="thin-slices" class="callout-inner">
<h3 class="callout-title">Thin Slices<a class="anchor" aria-label="anchor" href="#thin-slices"></a>
</h3>
<div class="callout-content">
<p>The expression <code>element[3:3]</code> produces an <a href="reference.html#empty-string">empty string</a>, i.e., a string that
contains no characters. If <code>data_europe_country</code> holds our
array of europe data, what does
<code>data_europe_country.iloc[5:5, 4:4]</code> produce? What about
<code>data_europe_country.iloc[3:3, :]</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">Show me the solution</h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Empty DataFrame
Columns: []
Index: []
Empty DataFrame
Columns: [1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, 2002, 2007]
Index: []</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Import a library into a program using
<code>import libraryname</code>.</li>
<li>Use the <code>pandas</code> library to work with tabular data in
Python.</li>
<li>Use the <code>read_csv</code> function to load data into a dataframe
variable.</li>
<li>Use <code>index_col</code> to specify that a column’s values should
be used as row headings.</li>
<li>Use <code>info</code> to find out basic information about a
dataframe.</li>
<li>Use slices and <code>loc</code> to extract entries from a
dataframe.</li>
<li>The expression <code>dataframe.shape</code> gives the shape of the
underlying array.</li>
<li>Use <code>label_a:label_c</code> to specify a <code>slice</code>
that includes the rows or columns from <code>label_a</code> to, and
including, <code>label_c</code>.</li>
<li>Array indices start at 0, not 1.</li>
<li>Use <code>low:high</code> to specify a <code>slice</code> that
includes the indices from <code>low</code> to <code>high-1</code>.</li>
<li>Use <code># some kind of explanation</code> to add comments to
programs.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-matplotlib"><p>Content from <a href="03-matplotlib.html">Visualizing Tabular Data</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/03-matplotlib.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I visualize tabular data in Python?</li>
<li>How can I group several plots together?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Plot simple graphs from data.</li>
<li>Plot multiple graphs in a single figure.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="visualizing-data"><h2 class="section-heading">Visualizing data<a class="anchor" aria-label="anchor" href="#visualizing-data"></a>
</h2>
<hr class="half-width">
<p>The mathematician Richard Hamming once said, “The purpose of
computing is insight, not numbers,” and the best way to develop insight
is often to visualize data. Visualization deserves an entire lecture of
its own, but we can explore a few features of Python’s
<code>matplotlib</code> library here. While there is no official
plotting library, <code>matplotlib</code> is the <em>de facto</em>
standard.</p>
<div id="episode-prerequisites" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="episode-prerequisites" class="callout-inner">
<h3 class="callout-title">Episode Prerequisites<a class="anchor" aria-label="anchor" href="#episode-prerequisites"></a>
</h3>
<div class="callout-content">
<p>Before we can start plotting, we need to load the data from one of
our files to use as an example. Start a new notebook and import the GDP
data for Europe into a dataframe called <code>data_eu</code>.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>data_eu <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_europe.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<p>Countries are grouped into files by continent. Each country has its
Gross Domestic Product (GDP) per capita (population) recorded in 5 year
intervals from 1952 to 2007.</p>
<p>Dataframes have a <code>.plot()</code> method which we can use to
produce a line-plot of the data contained within the frame.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>data_eu.plot()</span></code></pre>
</div>
<figure><img src="fig/03-data_eu_plot.svg" alt="A line graph showing the GDP of each country in Europe between 1952 and 2007. Unhelpfully, the dependant variable has been assumed to be the column headers, rather than the rows." class="figure mx-auto d-block"></figure><p>This has placed all of our data into a single plot that Python has
then displayed to us - clearly, there is far too much here for us to
take in! You might notice that Pandas has assumed we want to use the row
labels as the dependant variable for our plot, and the column headers as
the line-labels. In our case however, we want to display the GDP per
capital over time, using one line for each country. We can fix these
problems by combining two of the methods we saw in the previous episode;
- We can use an (index) slice to take only the first 5 countries, for
example. - We can transpose our dataframe to reverse the roles of our
rows and columns, so <code>plot</code> uses the columns as the dependant
variable and the rows as the line labels.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>first_five_countries <span class="op">=</span> data_eu.iloc[<span class="dv">0</span>:<span class="dv">5</span>, :]</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>first_five_countries.T.plot()</span></code></pre>
</div>
<figure><img src="fig/03-data_eu_T_plot.svg" alt="A line graph showing the GDP per capita of 5 European countries, from 1952 through to 2007." class="figure mx-auto d-block"></figure></section><section id="computing-statistics-across-dataframe-axes"><h2 class="section-heading">Computing statistics across dataframe axes<a class="anchor" aria-label="anchor" href="#computing-statistics-across-dataframe-axes"></a>
</h2>
<hr class="half-width">
<p>Let’s begin our analysis of the data by plotting the average GDP
across Europe, as a function of time. Pandas dataframes have a built-in
function, <code>mean()</code> that we can use to help us here:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="bu">print</span>(data_eu.mean())</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1952     5661.057435
1957     6963.012816
1962     8365.486814
1967    10143.823757
1972    12479.575246
1977    14283.979110
1982    15617.896551
1987    17214.310727
1992    17061.568084
1997    19076.781802
2002    21711.732422
2007    25054.481636
dtype: float64</code></pre>
</div>
<p>You’ll notice that Pandas has assumed (again) that we want to get the
mean for each year, or to “take the mean GDP down the columns”. However
it may also be useful to know the average GDP for each country - in
which case we want to take the average “along the rows” instead.</p>
<p>We could use the transpose method to reverse the roles of our rows
and columns like we did before, and <em>then</em> take the average.
Alternatively, <code>mean()</code> (and many other dataframe functions)
take an optional parameter called <code>axis</code> which lets us
specify which axis of the dataframe (rows or columns) to take the
average along.</p>
<p>Using the <code>axis</code> keyword, we can retrieve the average GDP
for each country by taking the average value <em>across the columns</em>
(by setting the argument <code>axis='columns'</code> to the
<code>mean</code> method):</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>data_eu.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country
Albania                    3255.366633
Austria                   20411.916279
Belgium                   19900.758072
...                                ...
Switzerland               27074.334405
Turkey                     4469.453380
United Kingdom            19380.472986
dtype: float64</code></pre>
</div>
<figure><img src="fif/../fig/03-axis-operations.svg" alt="Diagram illustrating how the axis keyword changes the axis along which the mean() function operates." class="figure mx-auto d-block"></figure></section><section id="plotting-statistics"><h2 class="section-heading">Plotting statistics<a class="anchor" aria-label="anchor" href="#plotting-statistics"></a>
</h2>
<hr class="half-width">
<p>The <code>plot</code> method called directly from our dataframe is
implicitly using <code>matplotlib</code>’s <code>pyplot.plot</code>
function. Whilst calling <code>plot</code> directly from a dataset can
be helpful to get a quick visual glimpse of the data, most of the time
we will want to manipulate our data in some way and plot some
significant statistics or derived values, rather than the raw data
itself. We will use the <code>matplotlib</code> library to manage and
create plots ourselves from here on. As with any library, we must first
tell Python to import it:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre>
</div>
<p>We can now create a plot of the average GDP of European countries in
the following way:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>mean_gdp_each_year <span class="op">=</span> data_eu.mean(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>plt.plot(mean_gdp_each_year)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p><img src="fig/03-eu_mean_gdp_no_labels.svg" alt="A line graph showing the change in the average GDP of European countries." class="figure">)</p>
<p>Let’s break down what each line is doing.</p>
<p>First, we use the <code>figure</code> function from the
<code>matplotlib.pyplot</code> library to create a new, blank figure
canvas. The variable <code>fig</code> can be used to access this figure
canvas.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span></code></pre>
</div>
<p>Then, we create a new variable <code>mean_gdp_each_year</code>, with
the average value of our <code>data_eu</code> dataframe across the rows
(down the columns).</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>mean_gdp_each_year <span class="op">=</span> data_eu.mean(axis<span class="op">=</span><span class="st">'rows'</span>)</span></code></pre>
</div>
<p>Next, using the <code>plot</code> function from the
<code>matplotlib.pyplot</code> library, we request to visualise the data
stored in <code>mean_gdp_each_year</code> into the figure canvas. If we
had multiple figures open, we could specify which one to plot this data
on. But since we only have one (<code>fig</code>), <code>plt.plot</code>
knows to plot the data onto this one. Finally, <code>plt.show()</code>
function displays the final result on the screen.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>plt.plot(mean_gdp_each_year)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</section><section id="grouping-plots"><h2 class="section-heading">Grouping Plots<a class="anchor" aria-label="anchor" href="#grouping-plots"></a>
</h2>
<hr class="half-width">
<p>So far, <code>matplotlib</code>’s plot hasn’t done much more than
dataframe’s <code>plot</code> function did - but that changes now. It is
often the case where we will want to display multiple statistics
side-by-side, or the same statistic from multiple datasets
simultaneously for comparison purposes. This can be achieved by adding
<em>subplots</em> to a figure, using the <code>add_subplots</code>
function. Let’s demonstrate how to do this by plotting the maximum and
minimum GDP of countries in Europe for each year alongside the average
GDP for that year.</p>
<p>To achieve this we will need: 1. to compute the min, max, and average
GDP each year for European countries; 1. Create a new figure with the
right canvas proportions; 1. Generate different subplots (“axes”) where
to plot the data; and 1. Display the data in the screen.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>eu_min_data <span class="op">=</span> data_eu.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>eu_max_data <span class="op">=</span> data_eu.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>eu_avg_data <span class="op">=</span> data_eu.mean(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">10.</span>, <span class="fl">3.</span>))</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>axes_1 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>axes_1.plot(eu_min_data)</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>axes_2 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>axes_2.plot(eu_max_data)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>axes_3 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>axes_3.plot(eu_avg_data)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="fig/03-min_max_avg_no_labels.svg" alt="A figure which contains three subplots, side-by-side" class="figure mx-auto d-block"></figure><p>Note how we’ve set the right axis arguments when computing the
different statistical properties (<code>axis='rows'</code>). The
parameter <code>figsize</code> tells Python how big to make this space
in relative units. In this case the width is a bit larger than three
times the height. Each subplot is placed into the figure using its
<code>add_subplot</code> <a href="reference.html#method">method</a>. The
<code>add_subplot</code> method takes 3 parameters. The first denotes
how many total rows of subplots there are, the second parameter refers
to the total number of subplot columns, and the final parameter denotes
which subplot your variable is referencing (left-to-right,
top-to-bottom). Each subplot is stored in a different variable
(<code>axes_1</code>, <code>axes_2</code>, <code>axes_3</code>). Once a
subplot is created, the axes can be used to place the desired plot for
each.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="min-and-max-methods">
<code>min</code> and <code>max</code>
methods<a class="anchor" aria-label="anchor" href="#min-and-max-methods"></a>
</h3>
<div class="callout-content">
<p>The <code>min</code> and <code>max</code> functions can be used on a
dataframe in the same way as the <code>mean</code> function, and take
the same <code>axis</code> parameter. For us, this retrieves the minimum
GDP of countries in Europe for each year:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>data_eu.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1952     973.533195
1957    1353.989176
1962    1709.683679
1967    2172.352423
1972    2860.169750
1977    3528.481305
1982    3630.880722
1987    3738.932735
1992    2497.437901
1997    3193.054604
2002    4604.211737
2007    5937.029526
dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</section><section id="adding-labels"><h2 class="section-heading">Adding labels<a class="anchor" aria-label="anchor" href="#adding-labels"></a>
</h2>
<hr class="half-width">
<p>Just because we have plotted some statistics doesn’t mean our plot is
complete! - There are no axis labels telling us what each subplot is
showing us. - There’s no title for the plot. - There’s a lot of
whitespace (empty space) surrounding our plot, and between our
subplots.</p>
<p>We can fix these using some more <code>matplotlib</code> functions. -
The <code>set_ylabel</code> method lets us add a label for the y-axis of
any plot or subplot, using dot notation. - The <code>set_title</code>
method lets us add a title to a subplot. - The <code>suptitle</code>
method lets us add a title to the figure window (“super”-title). - The
<code>tight_layout</code> method tells <code>matplotlib</code> to remove
as much whitespace as possible from our figure.</p>
<p>Putting it all together:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>eu_min_data <span class="op">=</span> data_eu.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>eu_max_data <span class="op">=</span> data_eu.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>eu_avg_data <span class="op">=</span> data_eu.mean(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">10.</span>, <span class="fl">3.</span>))</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>axes_1 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>axes_1.plot(eu_min_data)</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>axes_1.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>axes_1.set_title(<span class="st">'Min'</span>)</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>axes_2 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>axes_2.plot(eu_max_data)</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>axes_2.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>axes_1.set_title(<span class="st">'Max'</span>)</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>axes_3 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a>axes_3.plot(eu_avg_data)</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>axes_3.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a>axes_1.set_title(<span class="st">'Average'</span>)</span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a>fig.suptitle(<span class="st">'GDP/capita statistics for European countries'</span>)</span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a>fig.tight_layout()</span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="fig/03-min_max_avg_with_labels.svg" alt="A figure with 3 subplots, each labelled with the statistic that they display." class="figure mx-auto d-block"></figure><div id="setting-limits-for-the-axes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="setting-limits-for-the-axes" class="callout-inner">
<h3 class="callout-title">Setting limits for the axes<a class="anchor" aria-label="anchor" href="#setting-limits-for-the-axes"></a>
</h3>
<div class="callout-content">
<p>You might have noticed that our subplots leave a little bit of space
between our line and the edges of the subplot itself, which is a result
of the range of the y-axis being slightly bigger than the maximum and
minimum range of the data we are plotting.</p>
<p>Can you figure out a way to manually set the range of the y-axis, to
remove this white space?</p>
<p>Hint: - Try using the <code>set_ylim(min_value, max_value)</code>
method on the subplots. - Try using the <code>max()</code> and
<code>min()</code> methods on the <code>eu_min_data</code>
variables.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>To fix this for the first subplot, we can set the y-axis limits to
the overall minimum and maximum values of the dataframe.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>axes_1 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>axes_1.plot(eu_min_data)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>axes_1.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>axes_1.set_title(<span class="st">'Min'</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co"># Sets the y-limits to the min/max overall values to ease comparisson across the plots</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>y_axes_min_value <span class="op">=</span> eu_min_data.<span class="bu">min</span>()</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>y_axes_max_value <span class="op">=</span> eu_max_data.<span class="bu">max</span>()</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>axes_1.set_ylim(y_axes_min_value, y_axes_max_value)</span></code></pre>
</div>
<p>Or without creating intermediate variables, you could use</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>axes_1.set_ylim(eu_min_data.<span class="bu">min</span>(), eu_min_data.<span class="bu">max</span>())</span></code></pre>
</div>
<p>instead of the last three lines!</p>
</div>
</div>
</div>
</div>
<div id="drawstyles" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="drawstyles" class="callout-inner">
<h3 class="callout-title">Drawstyles<a class="anchor" aria-label="anchor" href="#drawstyles"></a>
</h3>
<div class="callout-content">
<p>The <code>plot</code> method doesn’t just draw straight, blue lines -
it can be customised with some optional parameters.</p>
<p>Modify your calls to <code>plot</code> with different parameters to
create different line styles in each of the three subplots. Some useful
parameters to add to <code>plot</code> are: -
<code>linestyle = ':'</code>. Can also be tried with <code>'--'</code>,
<code>'-.'</code>, and a few other options. -
<code>color = 'red'</code>. Several other colours are also available! -
<code>marker = 'x'</code>. There are <a href="https://matplotlib.org/stable/api/markers_api.html" class="external-link">lots of
different plotting markers</a> to try out.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>There are a ton of options to pick from here, but an example that
draws a dashed, red line with crosses marking the datapoints is
below:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>axes_1.plot(eu_mean_data, linestyle<span class="op">=</span><span class="st">':'</span>, color<span class="op">=</span><span class="st">'red'</span>, marker<span class="op">=</span><span class="st">'x'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="make-your-own-plot" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="make-your-own-plot" class="callout-inner">
<h3 class="callout-title">Make Your Own Plot<a class="anchor" aria-label="anchor" href="#make-your-own-plot"></a>
</h3>
<div class="callout-content">
<p>Create a plot showing the standard deviation of the GDP/captia for
each year.</p>
<p>Hint: - Try using the <code>std</code> method on
<code>data_eu</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>std_plot <span class="op">=</span> plt.figure()</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>std_data <span class="op">=</span> data_eu.std(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>plt.plot(std_data)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="moving-plots-around" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="moving-plots-around" class="callout-inner">
<h3 class="callout-title">Moving Plots Around<a class="anchor" aria-label="anchor" href="#moving-plots-around"></a>
</h3>
<div class="callout-content">
<p>Modify the program to display the three plots on top of one another
instead of side by side.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>eu_min_data <span class="op">=</span> data_eu.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>eu_max_data <span class="op">=</span> data_eu.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>eu_avg_data <span class="op">=</span> data_eu.mean(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">10.</span>, <span class="fl">3.</span>))</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>axes_1 <span class="op">=</span> fig.add_subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>axes_1.plot(eu_min_data)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>axes_1.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>axes_1.set_title(<span class="st">'Min'</span>)</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>axes_2 <span class="op">=</span> fig.add_subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>axes_2.plot(eu_max_data)</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>axes_2.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>axes_1.set_title(<span class="st">'Max'</span>)</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>axes_3 <span class="op">=</span> fig.add_subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>axes_3.plot(eu_avg_data)</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>axes_3.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>axes_1.set_title(<span class="st">'Average'</span>)</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>fig.suptitle(<span class="st">'GDP/capita statistics for European countries'</span>)</span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a>fig.tight_layout()</span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="moving-plots-around" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="moving-plots-around" class="callout-inner">
<h3 class="callout-title">Moving Plots Around<em>(continued)</em><a class="anchor" aria-label="anchor" href="#moving-plots-around"></a>
</h3>
<div class="callout-content">
<p>What would you change to make each of these plots of a similar width
than when they were side by side?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>Change the figure size to be taller than wider.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">3.</span>, <span class="fl">10.</span>))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="change-in-gdp" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="change-in-gdp" class="callout-inner">
<h3 class="callout-title">Change In GDP<a class="anchor" aria-label="anchor" href="#change-in-gdp"></a>
</h3>
<div class="callout-content">
<p>The GDP data is <em>longitudinal</em> in the sense that each row
represents a series of observations relating to one country. This means
that the change in GDP over time is a meaningful concept. Let’s find out
how to calculate changes in the data contained in an array with
pandas.</p>
<p>The <code>DataFrame.diff()</code> function takes an array and returns
the differences between two successive values, depending of the axis
requested.</p>
<p>Let’s use it to examine the changes each year across the ages for
Portugal.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>portugal <span class="op">=</span> data_eu.loc[<span class="st">'Portugal'</span>]</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="bu">print</span>(portugal)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1952     3068.319867
1957     3774.571743
1962     4727.954889
 ...             ...
1997    17641.031560
2002    19970.907870
2007    20509.647770
Name: Portugal, dtype: float64</code></pre>
</div>
<p>Calling <code>portugal.diff()</code> would do the following
calculations</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>[ <span class="fl">3068.31</span> <span class="op">-</span> NaN, <span class="fl">3774.57</span> <span class="op">-</span> <span class="fl">3068.31</span>,  <span class="fl">4727.95</span> <span class="op">-</span> <span class="fl">3774.57</span>, ...,  <span class="fl">19970.90</span> <span class="op">-</span> <span class="fl">17641.03</span>, <span class="fl">20509.64</span> <span class="op">-</span> <span class="fl">19970.90</span> ]</span></code></pre>
</div>
<p>and return the 12 difference values in a new series.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>portugal.diff()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1952            NaN
1957     706.251876
1962     953.383146
 ...            ...
1997    1433.764930
2002    2329.876310
2007     538.739900
Name: Portugal, dtype: float64</code></pre>
</div>
<p>Note that the first value is NaN because can’t substract a value to
the first element.</p>
<p>When calling <code>DataFrame.diff</code> with a 2-dimensional
dataframe, an <code>axis</code> argument may be passed to the function
to specify which axis to process. When applying
<code>DataFrame.diff</code> to our 2D GDP dataframe, which axis would we
specify to obtain differences between the same country?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">Show me the solution</h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Since the row axis (0) is countries, it does not make sense to get
the difference between two arbitrary countries. The column axis (1) is
in years, so the difference is the change in GDP – a meaningful
concept.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>data_eu.diff(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="change-in-gdp" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="change-in-gdp" class="callout-inner">
<h3 class="callout-title">Change In GDP<em>(continued)</em><a class="anchor" aria-label="anchor" href="#change-in-gdp"></a>
</h3>
<div class="callout-content">
<p>How would you find the largest change in GDP for each country? Does
it matter if the change in inflammation is an increase or a
decrease?</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">Show me the solution</h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>By using the <code>DataFrame.max()</code> function after you apply
the <code>Dataframe.diff()</code> function, you will get the largest
difference between days.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>data_eu.diff(axis<span class="op">=</span><span class="dv">1</span>).<span class="bu">max</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country
Albania                   1411.157133
Austria                   3827.023200
Belgium                   3523.102370
...                               ...
Switzerland               4228.968720
Turkey                    1950.190666
United Kingdom            3724.262090
dtype: float64</code></pre>
</div>
<p>If GDP values <em>decrease</em> along an axis, then the difference
from one element to the next will be negative. If you are interested in
the <strong>magnitude</strong> of the change and not the direction, the
<code>DataFrame.abs()</code> function will provide that.</p>
<p>Notice the difference if you get the largest <em>absolute</em>
difference between readings.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>data_eu.diff(axis<span class="op">=</span><span class="dv">1</span>).<span class="bu">abs</span>().<span class="bu">max</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country
Albania                   1411.157133
Austria                   3827.023200
Belgium                   3523.102370
...                               ...
Switzerland               4228.968720
Turkey                    1950.190666
United Kingdom            3724.262090
dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use the <code>pyplot</code> module from the <code>matplotlib</code>
library to create visualizations of data.</li>
<li>Dataframes have methods like <code>min</code>, <code>max</code>, and
<code>mean</code> to compute statistics along either the rows or the
columns.</li>
<li>Use <code>axis</code> argument in statistic functions to calculate
the values across the specified axis.</li>
<li>We can use <code>add_subplot</code> to create multiple plots in a
single figure.</li>
<li>We can customise the labels, axis ranges, line styles, and more of
our plots using <code>matplotlib</code>.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04-lists"><p>Content from <a href="04-lists.html">Storing Multiple Values in Lists</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/04-lists.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I store many values together?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what a list is.</li>
<li>Create and index lists of simple values.</li>
<li>Change the values of individual elements</li>
<li>Append values to an existing list</li>
<li>Reorder and slice list elements</li>
<li>Create and manipulate nested lists</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the previous episode, we analysed a single <code>.csv</code> data
file containing GDP data for countries in Europe. However we also have
similar data for the other continents, and we would like to repeat our
analysis on each of them. This means that we still have 5 more data
files to process!</p>
<p>The natural first step is to collect the names of all the files that
we have to process. In Python, a list is a way to store multiple values
together. In this episode, we will learn how to store multiple values in
a list as well as how to work with lists.</p>
<section id="python-lists"><h2 class="section-heading">Python lists<a class="anchor" aria-label="anchor" href="#python-lists"></a>
</h2>
<hr class="half-width">
<p>Unlike dataframes, lists are built into the language so we do not
have to load a library to use them. We create a list by putting values
inside square brackets and separating the values with commas:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'odds are:'</span>, odds)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>odds are: [1, 3, 5, 7]</code></pre>
</div>
<p>We can access elements of a list using indices – numbered positions
of elements in the list. These positions are numbered starting at 0, so
the first element has an index of 0.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'first element:'</span>, odds[<span class="dv">0</span>])</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last element:'</span>, odds[<span class="dv">3</span>])</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'"-1" element:'</span>, odds[<span class="op">-</span><span class="dv">1</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>first element: 1
last element: 7
"-1" element: 7</code></pre>
</div>
<p>Yes, we can use negative numbers as indices in Python. When we do so,
the index <code>-1</code> gives us the last element in the list,
<code>-2</code> the second to last, and so on. Because of this,
<code>odds[3]</code> and <code>odds[-1]</code> point to the same element
here.</p>
<p>There is one important difference between lists and strings: we can
change the values in a list, but we cannot change individual characters
in a string. For example:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>names <span class="op">=</span> [<span class="st">'Curie'</span>, <span class="st">'Darwing'</span>, <span class="st">'Turing'</span>]  <span class="co"># typo in Darwin's name</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'names is originally:'</span>, names)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>names[<span class="dv">1</span>] <span class="op">=</span> <span class="st">'Darwin'</span>  <span class="co"># correct the name</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'final value of names:'</span>, names)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>names is originally: ['Curie', 'Darwing', 'Turing']
final value of names: ['Curie', 'Darwin', 'Turing']</code></pre>
</div>
<p>works, but:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>name <span class="op">=</span> <span class="st">'Darwin'</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>name[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'d'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-8-220df48aeb2e&gt; in &lt;module&gt;()
      1 name = 'Darwin'
----&gt; 2 name[0] = 'd'

TypeError: 'str' object does not support item assignment</code></pre>
</div>
<p>does not.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="ch-ch-ch-ch-changes">Ch-Ch-Ch-Ch-Changes<a class="anchor" aria-label="anchor" href="#ch-ch-ch-ch-changes"></a>
</h3>
<div class="callout-content">
<p>Data which can be modified in place is called <a href="reference.html#mutable">mutable</a>, while data which cannot be
modified is called <a href="reference.html#immutable">immutable</a>.
Strings and numbers are immutable. This does not mean that variables
with string or number values are constants, but when we want to change
the value of a string or number variable, we can only replace the old
value with a completely new value.</p>
<p>Lists on the other hand, are mutable: we can modify them after they
have been created. We can change individual elements, append new
elements, or reorder the whole list. For some operations, like sorting,
we can choose whether to use a function that modifies the data in-place
or a function that returns a modified copy and leaves the original
unchanged.</p>
<p>Be careful when modifying data in-place. If two variables refer to
the same list, and you modify the list value, it will change for both
variables!</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>mild_salsa <span class="op">=</span> [<span class="st">'peppers'</span>, <span class="st">'onions'</span>, <span class="st">'cilantro'</span>, <span class="st">'tomatoes'</span>]</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>hot_salsa <span class="op">=</span> mild_salsa        <span class="co"># &lt;-- mild_salsa and hot_salsa point to the *same* list data in memory</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>hot_salsa[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'hot peppers'</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Ingredients in mild salsa:'</span>, mild_salsa)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Ingredients in hot salsa:'</span>, hot_salsa)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Ingredients in mild salsa: ['hot peppers', 'onions', 'cilantro', 'tomatoes']
Ingredients in hot salsa: ['hot peppers', 'onions', 'cilantro', 'tomatoes']</code></pre>
</div>
<p>If you want variables with mutable values to be independent, you must
make a copy of the value when you assign it.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>mild_salsa <span class="op">=</span> [<span class="st">'peppers'</span>, <span class="st">'onions'</span>, <span class="st">'cilantro'</span>, <span class="st">'tomatoes'</span>]</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>hot_salsa <span class="op">=</span> <span class="bu">list</span>(mild_salsa)        <span class="co"># &lt;-- makes a *copy* of the list</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>hot_salsa[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'hot peppers'</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Ingredients in mild salsa:'</span>, mild_salsa)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Ingredients in hot salsa:'</span>, hot_salsa)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Ingredients in mild salsa: ['peppers', 'onions', 'cilantro', 'tomatoes']
Ingredients in hot salsa: ['hot peppers', 'onions', 'cilantro', 'tomatoes']</code></pre>
</div>
<p>Because of pitfalls like this, code which modifies data in place can
be more difficult to understand. However, it is often far more efficient
to modify a large data structure in place than to create a modified copy
for every small change. You should consider both of these aspects when
writing your code.</p>
</div>
</div>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="nested-lists">Nested Lists<a class="anchor" aria-label="anchor" href="#nested-lists"></a>
</h3>
<div class="callout-content">
<p>Since a list can contain any Python variables, it can even contain
other lists.</p>
<p>For example, you could represent the products on the shelves of a
small grocery shop as a nested list called <code>veg</code>:</p>
<figure><img src="fig/04_groceries_veg.png" alt="veg is represented as a shelf full of produce. There are three rows of vegetables on the shelf, and each row contains three baskets of vegetables. We can label each basket according to the type of vegetable it contains, so the top row contains (from left to right) lettuce, lettuce, and peppers." class="figure mx-auto d-block"></figure><p>To store the contents of the shelf in a nested list, you write it
this way:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>veg <span class="op">=</span> [[<span class="st">'lettuce'</span>, <span class="st">'lettuce'</span>, <span class="st">'peppers'</span>, <span class="st">'zucchini'</span>],</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>     [<span class="st">'lettuce'</span>, <span class="st">'lettuce'</span>, <span class="st">'peppers'</span>, <span class="st">'zucchini'</span>],</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>     [<span class="st">'lettuce'</span>, <span class="st">'cilantro'</span>, <span class="st">'peppers'</span>, <span class="st">'zucchini'</span>]]</span></code></pre>
</div>
<p>Here are some visual examples of how indexing a list of lists
<code>veg</code> works. First, you can reference each row on the shelf
as a separate list. For example, <code>veg[2]</code> represents the
bottom row, which is a list of the baskets in that row.</p>
<figure><img src="fig/04_groceries_veg0.png" alt="veg is now shown as a list of three rows, with veg[0] representing the top row of three baskets, veg[1] representing the second row, and veg[2] representing the bottom row." class="figure mx-auto d-block"></figure><p>Index operations using the image would work like this:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">print</span>(veg[<span class="dv">2</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['lettuce', 'cilantro', 'peppers', 'zucchini']</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="bu">print</span>(veg[<span class="dv">0</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['lettuce', 'lettuce', 'peppers', 'zucchini']</code></pre>
</div>
<p>To reference a specific basket on a specific shelf, you use two
indexes. The first index represents the row (from top to bottom) and the
second index represents the specific basket (from left to right).</p>
<figure><img src="fig/04_groceries_veg00.png" alt="veg is now shown as a two-dimensional grid, with each basket labelled according to its index in the nested list. The first index is the row number and the second index is the basket number, so veg[1][3] represents the basket on the far right side of the second row (basket 4 on row 2): zucchini" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">print</span>(veg[<span class="dv">0</span>][<span class="dv">0</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'lettuce'</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="bu">print</span>(veg[<span class="dv">1</span>][<span class="dv">2</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'peppers'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="heterogeneous-lists">Heterogeneous Lists<a class="anchor" aria-label="anchor" href="#heterogeneous-lists"></a>
</h3>
<div class="callout-content">
<p>Lists in Python can contain elements of different types. For
example:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>sample_ages <span class="op">=</span> [<span class="dv">10</span>, <span class="fl">12.5</span>, <span class="st">'Unknown'</span>]</span></code></pre>
</div>
</div>
</div>
</div>
<p>There are many ways to change the contents of lists besides assigning
new values to individual elements:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>odds.append(<span class="dv">11</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'odds after adding a value:'</span>, odds)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>odds after adding a value: [1, 3, 5, 7, 11]</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>removed_element <span class="op">=</span> odds.pop(<span class="dv">0</span>)</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'odds after removing the first element:'</span>, odds)</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'removed_element:'</span>, removed_element)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>odds after removing the first element: [3, 5, 7, 11]
removed_element: 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>odds.reverse()</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'odds after reversing:'</span>, odds)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>odds after reversing: [11, 7, 5, 3]</code></pre>
</div>
<p>While modifying in place, it is useful to remember that Python treats
lists in a slightly counter-intuitive way.</p>
<p>As we saw earlier, when we modified the <code>mild_salsa</code> list
item in-place, if we make a list, (attempt to) copy it and then modify
this list, we can cause all sorts of trouble. This also applies to
modifying the list using the above functions:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>primes <span class="op">=</span> odds</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>primes.append(<span class="dv">2</span>)</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'primes:'</span>, primes)</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'odds:'</span>, odds)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>primes: [3, 5, 7, 2]
odds: [3, 5, 7, 2]</code></pre>
</div>
<p>This is because Python stores a list in memory, and then can use
multiple names to refer to the same list. If all we want to do is copy a
(simple) list, we can again use the <code>list</code> function, so we do
not modify a list we did not mean to:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>primes <span class="op">=</span> <span class="bu">list</span>(odds)</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>primes.append(<span class="dv">2</span>)</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'primes:'</span>, primes)</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'odds:'</span>, odds)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>primes: [3, 5, 7, 2]
odds: [3, 5, 7]</code></pre>
</div>
<p>Subsets of lists and strings can be accessed by specifying ranges of
values in brackets, similar to how we accessed ranges of entries in a
dataframe via the <code>.iloc</code> function. This is commonly referred
to as “slicing” the list/string.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>binomial_name <span class="op">=</span> <span class="st">'Drosophila melanogaster'</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>group <span class="op">=</span> binomial_name[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'group:'</span>, group)</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>species <span class="op">=</span> binomial_name[<span class="dv">11</span>:<span class="dv">23</span>]</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'species:'</span>, species)</span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>chromosomes <span class="op">=</span> [<span class="st">'X'</span>, <span class="st">'Y'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>, <span class="st">'4'</span>]</span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>autosomes <span class="op">=</span> chromosomes[<span class="dv">2</span>:<span class="dv">5</span>]</span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'autosomes:'</span>, autosomes)</span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a>last <span class="op">=</span> chromosomes[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'last:'</span>, last)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>group: Drosophila
species: melanogaster
autosomes: ['2', '3', '4']
last: 4</code></pre>
</div>
<div id="slicing-from-the-end" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing-from-the-end" class="callout-inner">
<h3 class="callout-title">Slicing From the End<a class="anchor" aria-label="anchor" href="#slicing-from-the-end"></a>
</h3>
<div class="callout-content">
<p>Use slicing to access only the last four characters of a string or
entries of a list.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>string_for_slicing <span class="op">=</span> <span class="st">'Observation date: 02-Feb-2013'</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>list_for_slicing <span class="op">=</span> [[<span class="st">'fluorine'</span>, <span class="st">'F'</span>],</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>                    [<span class="st">'chlorine'</span>, <span class="st">'Cl'</span>],</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>                    [<span class="st">'bromine'</span>, <span class="st">'Br'</span>],</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>                    [<span class="st">'iodine'</span>, <span class="st">'I'</span>],</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>                    [<span class="st">'astatine'</span>, <span class="st">'At'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'2013'
[['chlorine', 'Cl'], ['bromine', 'Br'], ['iodine', 'I'], ['astatine', 'At']]</code></pre>
</div>
<p>Would your solution work regardless of whether you knew beforehand
the length of the string or list (e.g. if you wanted to apply the
solution to a set of lists of different lengths)? If not, try to change
your approach to make it more robust.</p>
<p>Hint: Remember that indices can be negative as well as positive</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Use negative indices to count elements from the end of a container
(such as list or string):</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>string_for_slicing[<span class="op">-</span><span class="dv">4</span>:]</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>list_for_slicing[<span class="op">-</span><span class="dv">4</span>:]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="non-continuous-slices" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="non-continuous-slices" class="callout-inner">
<h3 class="callout-title">Non-Continuous Slices<a class="anchor" aria-label="anchor" href="#non-continuous-slices"></a>
</h3>
<div class="callout-content">
<p>So far we’ve seen how to use slicing to take single blocks of
successive entries from a sequence. But what if we want to take a subset
of entries that aren’t next to each other in the sequence?</p>
<p>You can achieve this by providing a third argument to the range
within the brackets, called the <em>step size</em>. The example below
shows how you can take every third entry in a list:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>primes <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">23</span>, <span class="dv">29</span>, <span class="dv">31</span>, <span class="dv">37</span>]</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>subset <span class="op">=</span> primes[<span class="dv">0</span>:<span class="dv">12</span>:<span class="dv">3</span>]</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'subset'</span>, subset)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">subset</span> <span class="op">[</span><span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">17</span>, <span class="fl">29</span><span class="op">]</span></span></code></pre>
</div>
<p>Notice that the slice taken begins with the first entry in the range,
followed by entries taken at equally-spaced intervals (the steps)
thereafter. If you wanted to begin the subset with the third entry, you
would need to specify that as the starting point of the sliced
range:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>primes <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">23</span>, <span class="dv">29</span>, <span class="dv">31</span>, <span class="dv">37</span>]</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>subset <span class="op">=</span> primes[<span class="dv">2</span>:<span class="dv">12</span>:<span class="dv">3</span>]</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'subset'</span>, subset)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">subset</span> <span class="op">[</span><span class="fl">5</span>, <span class="fl">13</span>, <span class="fl">23</span>, <span class="fl">37</span><span class="op">]</span></span></code></pre>
</div>
<p>Use the step size argument to create a new string that contains only
every other character in the string “In an octopus’s garden in the
shade”. Start with creating a variable to hold the string:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>beatles <span class="op">=</span> <span class="st">"In an octopus's garden in the shade"</span></span></code></pre>
</div>
<p>What slice of <code>beatles</code> will produce the following output
(i.e., the first character, third character, and every other character
through the end of the string)?</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>I notpssgre ntesae</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>To obtain every other character you need to provide a slice with the
step size of 2:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>beatles[<span class="dv">0</span>:<span class="dv">35</span>:<span class="dv">2</span>]</span></code></pre>
</div>
<p>You can also leave out the beginning and end of the slice to take the
whole string and provide only the step argument to go every second
element:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>beatles[::<span class="dv">2</span>]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>If you want to take a slice from the beginning of a sequence, you can
omit the first index in the range:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>date <span class="op">=</span> <span class="st">'Monday 4 January 2016'</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>day <span class="op">=</span> date[<span class="dv">0</span>:<span class="dv">6</span>]</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Using 0 to begin range:'</span>, day)</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>day <span class="op">=</span> date[:<span class="dv">6</span>]</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Omitting beginning index:'</span>, day)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using 0 to begin range: Monday
Omitting beginning index: Monday</code></pre>
</div>
<p>And similarly, you can omit the ending index in the range to take a
slice to the very end of the sequence:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">'jan'</span>, <span class="st">'feb'</span>, <span class="st">'mar'</span>, <span class="st">'apr'</span>, <span class="st">'may'</span>, <span class="st">'jun'</span>, <span class="st">'jul'</span>, <span class="st">'aug'</span>, <span class="st">'sep'</span>, <span class="st">'oct'</span>, <span class="st">'nov'</span>, <span class="st">'dec'</span>]</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>sond <span class="op">=</span> months[<span class="dv">8</span>:<span class="dv">12</span>]</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'With known last position:'</span>, sond)</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>sond <span class="op">=</span> months[<span class="dv">8</span>:<span class="bu">len</span>(months)]</span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Using len() to get last entry:'</span>, sond)</span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a>sond <span class="op">=</span> months[<span class="dv">8</span>:]</span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Omitting ending index:'</span>, sond)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>With known last position: ['sep', 'oct', 'nov', 'dec']
Using len() to get last entry: ['sep', 'oct', 'nov', 'dec']
Omitting ending index: ['sep', 'oct', 'nov', 'dec']</code></pre>
</div>
<div id="overloading" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="overloading" class="callout-inner">
<h3 class="callout-title">Overloading<a class="anchor" aria-label="anchor" href="#overloading"></a>
</h3>
<div class="callout-content">
<p><code>+</code> usually means addition, but when used on strings or
lists, it means “concatenate”. Given that, what do you think the
multiplication operator <code>*</code> does on lists? In particular,
what will be the output of the following code?</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>counts <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>]</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>repeats <span class="op">=</span> counts <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="bu">print</span>(repeats)</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>[2, 4, 6, 8, 10, 2, 4, 6, 8, 10]</code></li>
<li><code>[4, 8, 12, 16, 20]</code></li>
<li><code>[[2, 4, 6, 8, 10],[2, 4, 6, 8, 10]]</code></li>
<li><code>[2, 4, 6, 8, 10, 4, 8, 12, 16, 20]</code></li>
</ol>
<p>The technical term for this is <em>operator overloading</em>: a
single operator, like <code>+</code> or <code>*</code>, can do different
things depending on what it’s applied to.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The multiplication operator <code>*</code> used on a list replicates
elements of the list and concatenates them together:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2, 4, 6, 8, 10, 2, 4, 6, 8, 10]</code></pre>
</div>
<p>It’s equivalent to:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>counts <span class="op">+</span> counts</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>[value1, value2, value3, ...]</code> creates a list.</li>
<li>Lists can contain any Python object, including lists (i.e., list of
lists).</li>
<li>Lists are indexed and sliced with square brackets (e.g., list<span class="math display">\[0\]</span> and list<span class="math display">\[2:9\]</span>), in the same way as strings and
arrays.</li>
<li>Lists are mutable (i.e., their values can be changed in place).</li>
<li>Strings are immutable (i.e., the characters in them cannot be
changed).</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-loop"><p>Content from <a href="05-loop.html">Repeating Actions with Loops</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/05-loop.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I do the same operations on many different values?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what a <code>for</code> loop does.</li>
<li>Correctly write <code>for</code> loops to repeat simple
calculations.</li>
<li>Trace changes to a loop variable as the loop runs.</li>
<li>Trace changes to other variables as they are updated by a
<code>for</code> loop.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the episode about visualizing data, we wrote Python code that
plots values of interest from our first dataset
(<code>gapminder_gdp_europe.csv</code>).</p>
<figure><img src="fig/03-min_max_avg_with_labels.svg" alt="The plots of the min, max, and average GDP of countries in Europe, that we created earlier." class="figure mx-auto d-block"></figure><p>We still have four more datasets to perform our analysis over, and
we’ll want to create plots for all of our data sets. Preferably, we’d do
this with a single statement, and to do that, we’ll have to teach the
computer how to repeat things.</p>
<p>An example task that we might want to repeat is accessing numbers in
a list, which we will do by printing each number on a line of its
own.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]</span></code></pre>
</div>
<p>In Python, a list is basically an ordered collection of elements, and
every element has a unique number associated with it — its index. This
means that we can access elements in a list using their indices. For
example, we can get the first number in the list <code>odds</code>, by
using <code>odds[0]</code>. One way to print each number is to use four
<code>print</code> statements:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">0</span>])</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">1</span>])</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">2</span>])</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">3</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">7</span></span></code></pre>
</div>
<p>This is a bad approach for three reasons:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Not scalable</strong>. Imagine you need to print a list
that has hundreds of elements. It might be easier to type them in
manually.</p></li>
<li><p><strong>Difficult to maintain</strong>. If we want to decorate
each printed element with an asterisk or any other character, we would
have to change four lines of code. While this might not be a problem for
small lists, it would definitely be a problem for longer ones.</p></li>
<li><p><strong>Fragile</strong>. If we use it with a list that has more
elements than what we initially envisioned, it will only display part of
the list’s elements. A shorter list, on the other hand, will cause an
error because it will be trying to display elements of the list that do
not exist.</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">0</span>])</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">1</span>])</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">2</span>])</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="bu">print</span>(odds[<span class="dv">3</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-3-7974b6cdaf14&gt; in &lt;module&gt;()
      3 print(odds[1])
      4 print(odds[2])
----&gt; 5 print(odds[3])

IndexError: list index out of range</code></pre>
</div>
<p>Here’s a better approach: a <a href="reference.html#for-loop">for
loop</a></p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> odds:</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="bu">print</span>(num)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">7</span></span></code></pre>
</div>
<p>This is shorter — certainly shorter than something that prints every
number in a hundred-number list — and more robust as well:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> odds:</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="bu">print</span>(num)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">7</span></span>
<span><span class="fl">9</span></span>
<span><span class="fl">11</span></span></code></pre>
</div>
<p>The improved version uses a <a href="reference.html#for-loop">for
loop</a> to repeat an operation — in this case, printing — once for each
thing in a sequence. The general form of a loop is:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="cf">for</span> variable <span class="kw">in</span> collection:</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="co"># do things using variable, such as print</span></span></code></pre>
</div>
<p>Using the odds example above, the loop might look like this:</p>
<figure><img src="fig/05-loops_image_num.png" alt="Loop variable 'num' being assigned the value of each element in the list odds in turn and then being printed" class="figure mx-auto d-block"></figure><p>Each number (<code>num</code>) in the variable <code>odds</code> is
looped through and printed one number after another. The other numbers
in the diagram denote which loop cycle the number was printed in (1
being the first loop cycle, and 6 being the final loop cycle).</p>
<p>We can call the <a href="reference.html#loop-variable">loop
variable</a> anything we like, but there must be a colon at the end of
the line starting the loop, and we must indent anything we want to run
inside the loop. Unlike many other languages, there is no command to
signify the end of the loop body (e.g. <code>end for</code>); everything
indented after the <code>for</code> statement belongs to the loop.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="whats-in-a-name">What’s in a name?<a class="anchor" aria-label="anchor" href="#whats-in-a-name"></a>
</h3>
<div class="callout-content">
<p>In the example above, the loop variable was given the name
<code>num</code> as a mnemonic; it is short for ‘number’. We can choose
any name we want for variables. We might just as easily have chosen the
name <code>banana</code> for the loop variable, as long as we use the
same name when we invoke the variable inside the loop:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>odds <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="cf">for</span> banana <span class="kw">in</span> odds:</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="bu">print</span>(banana)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">7</span></span>
<span><span class="fl">9</span></span>
<span><span class="fl">11</span></span></code></pre>
</div>
<p>It is a good idea to choose variable names that are meaningful,
otherwise it would be more difficult to understand what the loop is
doing.</p>
</div>
</div>
</div>
<p>Here’s another loop that repeatedly updates a variable:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>length <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>names <span class="op">=</span> [<span class="st">'Curie'</span>, <span class="st">'Darwin'</span>, <span class="st">'Turing'</span>]</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="cf">for</span> value <span class="kw">in</span> names:</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    length <span class="op">=</span> length <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'There are'</span>, length, <span class="st">'names in the list.'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>There are 3 names in the list.</code></pre>
</div>
<p>It’s worth tracing the execution of this little program step by step.
Since there are three names in <code>names</code>, the statement on line
4 will be executed three times. The first time around,
<code>length</code> is zero (the value assigned to it on line 1) and
<code>value</code> is <code>Curie</code>. The statement adds 1 to the
old value of <code>length</code>, producing 1, and updates
<code>length</code> to refer to that new value. The next time around,
<code>value</code> is <code>Darwin</code> and <code>length</code> is 1,
so <code>length</code> is updated to be 2. After one more update,
<code>length</code> is 3; since there is nothing left in
<code>names</code> for Python to process, the loop finishes and the
<code>print</code> function on line 5 tells us our final answer.</p>
<p>Note that a loop variable is a variable that is being used to record
progress in a loop. It still exists after the loop is over, and we can
re-use variables previously defined as loop variables as well:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>name <span class="op">=</span> <span class="st">'Rosalind'</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="cf">for</span> name <span class="kw">in</span> [<span class="st">'Curie'</span>, <span class="st">'Darwin'</span>, <span class="st">'Turing'</span>]:</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>    <span class="bu">print</span>(name)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'after the loop, name is'</span>, name)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Curie
Darwin
Turing
after the loop, name is Turing</code></pre>
</div>
<p>Note also that finding the length of an object is such a common
operation that Python actually has a built-in function to do it called
<code>len</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">4</span></span></code></pre>
</div>
<p><code>len</code> is much faster than any function we could write
ourselves, and much easier to read than a two-line loop. It will also
give us the length of many other things that we haven’t met yet, so we
should always use it when we can.</p>
<div id="from-1-to-n" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="from-1-to-n" class="callout-inner">
<h3 class="callout-title">From 1 to N<a class="anchor" aria-label="anchor" href="#from-1-to-n"></a>
</h3>
<div class="callout-content">
<p>Python has a built-in function called <code>range</code> that
generates a sequence of numbers. <code>range</code> can accept 1, 2, or
3 parameters.</p>
<ul>
<li>If one parameter is given, <code>range</code> generates a sequence
of that length, starting at zero and incrementing by 1. For example,
<code>range(3)</code> produces the numbers <code>0, 1, 2</code>.</li>
<li>If two parameters are given, <code>range</code> starts at the first
and ends just before the second, incrementing by one. For example,
<code>range(2, 5)</code> produces <code>2, 3, 4</code>.</li>
<li>If <code>range</code> is given 3 parameters, it starts at the first
one, ends just before the second one, and increments by the third one.
For example, <code>range(3, 10, 2)</code> produces
<code>3, 5, 7, 9</code>.</li>
</ul>
<p>Using <code>range</code>, write a loop that uses <code>range</code>
to print the first 3 natural numbers:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="dv">3</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">4</span>):</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="bu">print</span>(number)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="understanding-the-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="understanding-the-loops" class="callout-inner">
<h3 class="callout-title">Understanding the loops<a class="anchor" aria-label="anchor" href="#understanding-the-loops"></a>
</h3>
<div class="callout-content">
<p>Given the following loop:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>word <span class="op">=</span> <span class="st">'oxygen'</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="cf">for</span> letter <span class="kw">in</span> word:</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>    <span class="bu">print</span>(letter)</span></code></pre>
</div>
<p>How many times is the body of the loop executed?</p>
<ul>
<li>3 times</li>
<li>4 times</li>
<li>5 times</li>
<li>6 times</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The body of the loop is executed 6 times.</p>
</div>
</div>
</div>
</div>
<div id="computing-powers-with-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="computing-powers-with-loops" class="callout-inner">
<h3 class="callout-title">Computing Powers With Loops<a class="anchor" aria-label="anchor" href="#computing-powers-with-loops"></a>
</h3>
<div class="callout-content">
<p>Exponentiation is built into Python:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">5</span> <span class="op">**</span> <span class="dv">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">125</span></span></code></pre>
</div>
<p>Write a loop that calculates the same result as <code>5 ** 3</code>
using multiplication (and without exponentiation).</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">3</span>):</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>    result <span class="op">=</span> result <span class="op">*</span> <span class="dv">5</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="bu">print</span>(result)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="summing-a-list" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="summing-a-list" class="callout-inner">
<h3 class="callout-title">Summing a list<a class="anchor" aria-label="anchor" href="#summing-a-list"></a>
</h3>
<div class="callout-content">
<p>Write a loop that calculates the sum of elements in a list by adding
each element and printing the final value, so
<code>[124, 402, 36]</code> prints 562</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">124</span>, <span class="dv">402</span>, <span class="dv">36</span>]</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>summed <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> numbers:</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>    summed <span class="op">=</span> summed <span class="op">+</span> num</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="bu">print</span>(summed)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="computing-the-value-of-a-polynomial" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="computing-the-value-of-a-polynomial" class="callout-inner">
<h3 class="callout-title">Computing the Value of a Polynomial<a class="anchor" aria-label="anchor" href="#computing-the-value-of-a-polynomial"></a>
</h3>
<div class="callout-content">
<p>The built-in function <code>enumerate</code> takes a sequence (e.g. a
<a href="04-lists.html">list</a>) and generates a new sequence of the
same length. Each element of the new sequence is a pair composed of the
index (0, 1, 2,…) and the value from the original sequence:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="cf">for</span> idx, val <span class="kw">in</span> <span class="bu">enumerate</span>(a_list):</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>    <span class="co"># Do something using idx and val</span></span></code></pre>
</div>
<p>The code above loops through <code>a_list</code>, assigning the index
to <code>idx</code> and the value to <code>val</code>.</p>
<p>Suppose you have encoded a polynomial as a list of coefficients in
the following way: the first element is the constant term, the second
element is the coefficient of the linear term, the third is the
coefficient of the quadratic term, etc.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>coeffs <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>]</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>y <span class="op">=</span> coeffs[<span class="dv">0</span>] <span class="op">*</span> x<span class="op">**</span><span class="dv">0</span> <span class="op">+</span> coeffs[<span class="dv">1</span>] <span class="op">*</span> x<span class="op">**</span><span class="dv">1</span> <span class="op">+</span> coeffs[<span class="dv">2</span>] <span class="op">*</span> x<span class="op">**</span><span class="dv">2</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="bu">print</span>(y)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">97</span></span></code></pre>
</div>
<p>Write a loop using <code>enumerate(coeffs)</code> which computes the
value <code>y</code> of any polynomial, given <code>x</code> and
<code>coeffs</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="cf">for</span> idx, coef <span class="kw">in</span> <span class="bu">enumerate</span>(coeffs):</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>    y <span class="op">=</span> y <span class="op">+</span> coef <span class="op">*</span> x<span class="op">**</span>idx</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>for variable in sequence</code> to process the elements of
a sequence one at a time.</li>
<li>The body of a <code>for</code> loop must be indented.</li>
<li>Use <code>len(thing)</code> to determine the length of something
that contains other values.</li>
</ul>
</div>
</div>
</div></section><section id="aio-06-files"><p>Content from <a href="06-files.html">Analyzing Data from Multiple Files</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/06-files.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I do the same operations on many different files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use a library function to get a list of filenames that match a
wildcard pattern.</li>
<li>Write a <code>for</code> loop to process multiple files.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As a final piece to processing our GDP data, we need a way to get a
list of all the files in our <code>data</code> directory whose names
start with <code>gapminder_</code> and end with <code>.csv</code>. The
following library will help us to achieve this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> glob</span></code></pre>
</div>
<p>The <code>glob</code> library contains a function, also called
<code>glob</code>, that finds files and directories whose names match a
pattern. We provide those patterns as strings: the character
<code>*</code> matches zero or more characters, while <code>?</code>
matches any one character. We can use this to get the names of all the
CSV files in the current directory:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">print</span>(glob.glob(<span class="st">'data/gapminder_*.csv'</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['gapminder_gdp_americas.csv', 'gapminder_gdp_africa.csv', 'gapminder_gdp_europe.csv', 
'gapminder_gdp_asia.csv', 'gapminder_gdp_oceania.csv']</code></pre>
</div>
<p>As these examples show, <code>glob.glob</code>’s result is a list of
file and directory paths in arbitrary order. This means we can loop over
it to do something with each filename in turn. In our case, the
“something” we want to do is generate a set of plots for each file in
our GDP dataset.</p>
<div id="determining-matches" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="determining-matches" class="callout-inner">
<h3 class="callout-title">Determining Matches<a class="anchor" aria-label="anchor" href="#determining-matches"></a>
</h3>
<div class="callout-content">
<p>Which of these files is <em>not</em> matched by the expression
<code>glob.glob('data/*as*.csv')</code>?</p>
<ol style="list-style-type: decimal">
<li><code>data/gapminder_gdp_africa.csv</code></li>
<li><code>data/gapminder_gdp_americas.csv</code></li>
<li><code>data/gapminder_gdp_asia.csv</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>1 is not matched by the glob.</p>
</div>
</div>
</div>
</div>
<div id="minimum-file-size" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="minimum-file-size" class="callout-inner">
<h3 class="callout-title">Minimum File Size<a class="anchor" aria-label="anchor" href="#minimum-file-size"></a>
</h3>
<div class="callout-content">
<p>Modify this program so that it prints the number of records in the
file that has the fewest records.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>fewest <span class="op">=</span> ____</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> glob.glob(<span class="st">'data/*.csv'</span>):</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    dataframe <span class="op">=</span> pd.____(filename)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    fewest <span class="op">=</span> <span class="bu">min</span>(____, dataframe.shape[<span class="dv">0</span>])</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'smallest file has'</span>, fewest, <span class="st">'records'</span>)</span></code></pre>
</div>
<p>Note that the [<code>DataFrame.shape()</code> method][shape-method]
returns a tuple with the number of rows and columns of the data
frame.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>fewest <span class="op">=</span> <span class="bu">float</span>(<span class="st">'Inf'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> glob.glob(<span class="st">'data/*.csv'</span>):</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    dataframe <span class="op">=</span> pd.read_csv(filename)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    fewest <span class="op">=</span> <span class="bu">min</span>(fewest, dataframe.shape[<span class="dv">0</span>])</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'smallest file has'</span>, fewest, <span class="st">'records'</span>)</span></code></pre>
</div>
<p>You might have chosen to initialize the <code>fewest</code> variable
with a number greater than the numbers you’re dealing with, but that
could lead to trouble if you reuse the code with bigger numbers. Python
lets you use positive infinity, which will work no matter how big your
numbers are. What other special strings does the [<code>float</code>
function][float-function] recognize?</p>
</div>
</div>
</div>
</div>
<p>If we want to start by analyzing just the first three files in
alphabetical order, we can use the <code>sorted</code> built-in function
to generate a new sorted list from the <code>glob.glob</code>
output:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>filenames <span class="op">=</span> <span class="bu">sorted</span>(glob.glob(<span class="st">'data/gapminder_*.csv'</span>))</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>filenames <span class="op">=</span> filenames[<span class="dv">0</span>:<span class="dv">3</span>]</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="bu">print</span>(filename)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    continent <span class="op">=</span> filename[<span class="dv">14</span>:<span class="op">-</span><span class="dv">4</span>].capitalize()</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>    data_gdp <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>    fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">18.0</span>, <span class="fl">3.0</span>))</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>    axes_1 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    axes_2 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    axes_3 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>    axes_1.set_title(<span class="st">'Min'</span>)</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>    axes_1.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>    axes_1.plot(data_gdp.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>))</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>    axes_2.set_title(<span class="st">'Max'</span>)</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>    axes_2.plot(data_gdp.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'rows'</span>))</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>    axes_3.set_title(<span class="st">'Average'</span>)</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>    axes_3.plot(data_gdp.mean(axis<span class="op">=</span><span class="st">'rows'</span>))</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>    fig.suptitle(<span class="st">'GDP/capita statistics for countries in '</span> <span class="op">+</span> continent)</span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>    fig.tight_layout()</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>    plt.show()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">data</span><span class="op">/</span><span class="va">gapminder_gdp_africa.csv</span></span></code></pre>
</div>
<figure><img src="fig/06-files_00.png" alt="Output from the first iteration of the for loop. Three line graphs showing the yearly minimum, maximum and average GDP over the years for the countries in the first dataset." class="figure mx-auto d-block"></figure><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">data</span><span class="op">/</span><span class="va">gapminder_gdp_americas.csv</span></span></code></pre>
</div>
<figure><img src="fig/06-files_01.png" alt="Output from the first iteration of the for loop. Three line graphs showing the yearly minimum, maximum and average GDP over the years for the countries in the second dataset." class="figure mx-auto d-block"></figure><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">data</span><span class="op">/</span><span class="va">gapminder_gdp_asia.csv</span></span></code></pre>
</div>
<figure><img src="fig/06-files_02.png" alt="Output from the first iteration of the for loop. Three line graphs showing the yearly minimum, maximum and average GDP over the years for the countries in the third dataset." class="figure mx-auto d-block"></figure><p>The average plot generated for the Americas dataset looks a bit
strange. How is it possible that the average value across the years is
flat? Also, we find a similar behaviour for the minimum graph for the
Asia dataset, where in this case it’s always 0.</p>
<p>From inspecting the data we can see that some entries for the Asia
dataset has a 0 value. This may suggest that there were potential issues
with data collection. The Americas dataset, however, doesn’t show any
clear indication by visually inspecting the data, nevertheless, it seems
very improbable that the average remained constant for the whole
time.</p>
<div id="comparing-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="comparing-data" class="callout-inner">
<h3 class="callout-title">Comparing Data<a class="anchor" aria-label="anchor" href="#comparing-data"></a>
</h3>
<div class="callout-content">
<p>Write a program that reads in the regional data sets and plots the
average GDP per capita for each region over time in a single chart.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>This solution builds a useful legend by using the <a href="https://docs.python.org/3/library/stdtypes.html#str.split" class="external-link">string
<code>split</code> method</a> to extract the <code>region</code> from
the path ‘data/gapminder_gdp_a_specific_region.csv’.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> glob.glob(<span class="st">'data/gapminder_gdp*.csv'</span>):</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    dataframe <span class="op">=</span> pd.read_csv(filename)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    <span class="co"># extract &lt;region&gt; from the filename, expected to be in the format 'data/gapminder_gdp_&lt;region&gt;.csv'.</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="co"># we will split the string using the split method and `_` as our separator,</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    <span class="co"># retrieve the last string in the list that split returns (`&lt;region&gt;.csv`),</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>    <span class="co"># and then remove the `.csv` extension from that string.</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>    region <span class="op">=</span> filename.split(<span class="st">'_'</span>)[<span class="op">-</span><span class="dv">1</span>][:<span class="op">-</span><span class="dv">4</span>]</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>    dataframe.mean().plot(ax<span class="op">=</span>ax, label<span class="op">=</span>region)</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>plt.legend()</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>After spending some time investigating the different statistical
plots, we gain some insight into the various datasets.</p>
<p>The datasets appear to fall into two categories:</p>
<ul>
<li>seemingly “normal” datasets but display suspicious average values
(such as Americas)</li>
<li>“bad” datasets that shows 0 for the minima across the years (maybe
due to missing data?) for different countries each year.</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>glob.glob(pattern)</code> to create a list of files whose
names match a pattern.</li>
<li>Use <code>*</code> in a pattern to match zero or more characters,
and <code>?</code> to match any single character.</li>
</ul>
</div>
</div>
</div></section><section id="aio-07-cond"><p>Content from <a href="07-cond.html">Making Choices</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/07-cond.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can my programs do different things based on data values?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write conditional statements including <code>if</code>,
<code>elif</code>, and <code>else</code> branches.</li>
<li>Correctly evaluate expressions containing <code>and</code> and
<code>or</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In our last lesson, we discovered something suspicious was going on
in our GDP data by drawing some plots. How can we use Python to
automatically recognize the different features we saw, and take a
different action for each? In this lesson, we’ll learn how to write code
that runs only when certain conditions are true.</p>
<section id="conditionals"><h2 class="section-heading">Conditionals<a class="anchor" aria-label="anchor" href="#conditionals"></a>
</h2>
<hr class="half-width">
<p>We can ask Python to take different actions, depending on a
condition, with an <code>if</code> statement:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>num <span class="op">=</span> <span class="dv">37</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">100</span>:</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'greater'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'not greater'</span>)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'done'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>not greater
done</code></pre>
</div>
<p>The second line of this code uses the keyword <code>if</code> to tell
Python that we want to make a choice. If the test that follows the
<code>if</code> statement is true, the body of the <code>if</code>
(i.e., the set of lines indented underneath it) is executed, and
“greater” is printed. If the test is false, the body of the
<code>else</code> is executed instead, and “not greater” is printed.
Only one or the other is ever executed before continuing on with program
execution to print “done”:</p>
<figure><img src="fig/python-flowchart-conditional.png" alt="A flowchart diagram of the if-else construct that tests if variable num is greater than 100" class="figure mx-auto d-block"></figure><p>Conditional statements don’t have to include an <code>else</code>. If
there isn’t one, Python simply does nothing if the test is false:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>num <span class="op">=</span> <span class="dv">53</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'before conditional...'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">100</span>:</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="bu">print</span>(num, <span class="st">'is greater than 100'</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'...after conditional'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
...after conditional</code></pre>
</div>
<p>We can also chain several tests together using <code>elif</code>,
which is short for “else if”. The following Python code uses
<code>elif</code> to print the sign of a number.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>num <span class="op">=</span> <span class="op">-</span><span class="dv">3</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="bu">print</span>(num, <span class="st">'is positive'</span>)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="cf">elif</span> num <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="bu">print</span>(num, <span class="st">'is zero'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="bu">print</span>(num, <span class="st">'is negative'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-3 is negative</code></pre>
</div>
<p>Note that to test for equality we use a double equals sign
<code>==</code> rather than a single equals sign <code>=</code> which is
used to assign values.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="comparing-in-python">Comparing in Python<a class="anchor" aria-label="anchor" href="#comparing-in-python"></a>
</h3>
<div class="callout-content">
<p>Along with the <code>&gt;</code> and <code>==</code> operators we
have already used for comparing values in our conditionals, there are a
few more options to know about:</p>
<ul>
<li>
<code>&gt;</code>: greater than</li>
<li>
<code>&lt;</code>: less than</li>
<li>
<code>==</code>: equal to</li>
<li>
<code>!=</code>: does not equal</li>
<li>
<code>&gt;=</code>: greater than or equal to</li>
<li>
<code>&lt;=</code>: less than or equal to</li>
</ul>
</div>
</div>
</div>
<p>We can also combine tests using <code>and</code> and <code>or</code>.
<code>and</code> is only true if both parts are true:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="cf">if</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="kw">and</span> (<span class="op">-</span><span class="dv">1</span> <span class="op">&gt;=</span> <span class="dv">0</span>):</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'both parts are true'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'at least one part is false'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>at least one part is false</code></pre>
</div>
<p>while <code>or</code> is true if at least one part is true:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="cf">if</span> (<span class="dv">1</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="kw">or</span> (<span class="dv">1</span> <span class="op">&gt;=</span> <span class="dv">0</span>):</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'at least one test is true'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>at least one test is true</code></pre>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="true-and-false">
<code>True</code> and <code>False</code>
<a class="anchor" aria-label="anchor" href="#true-and-false"></a>
</h3>
<div class="callout-content">
<p><code>True</code> and <code>False</code> are special words in Python
called <code>booleans</code>, which represent truth values. A statement
such as <code>1 &lt; 0</code> returns the value <code>False</code>,
while <code>-1 &lt; 0</code> returns the value <code>True</code>.</p>
</div>
</div>
</div>
</section><section id="checking-our-data"><h2 class="section-heading">Checking our Data<a class="anchor" aria-label="anchor" href="#checking-our-data"></a>
</h2>
<hr class="half-width">
<p>Now that we’ve seen how conditionals work, we can use them to check
for the suspicious features we saw in our inflammation data. We are
about to use functions provided by the <code>pandas</code> module again.
Therefore, if you’re working in a new Python session, make sure to load
the module with:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre>
</div>
<p>From the first set of plots, we saw that the minimum and average
exhibit a strange behavior for some of our dataset. Wouldn’t it be a
good idea to detect such behavior and report it as suspicious? Let’s do
that! However, instead of checking every entry manually, let’s check if
the minimum and the maximum for the minimum across years is the
same.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>min_data <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>min_min_data <span class="op">=</span> min_data.<span class="bu">min</span>()</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>max_min_data <span class="op">=</span> min_data.<span class="bu">max</span>()</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="cf">if</span> min_min_data <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> max_min_data <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Suspicious looking minima!'</span>)</span></code></pre>
</div>
<p>We also saw a different problem with America dataset; the average
across the years was constant (looks like someone had manipulated the
data). We can also check for this with an <code>elif</code>
condition:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="cf">elif</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">min</span>()) <span class="op">==</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">max</span>()):</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Average is flat!'</span>)</span></code></pre>
</div>
<p>And if neither of these conditions are true, we can use
<code>else</code> to give the all-clear:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Seems OK!'</span>)</span></code></pre>
</div>
<p>Let’s test that out:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_asia.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>min_data <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>min_min_data <span class="op">=</span> min_data.<span class="bu">min</span>()</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>max_min_data <span class="op">=</span> min_data.<span class="bu">max</span>()</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="cf">if</span> min_min_data <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> max_min_data <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Suspicious looking minima!'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="cf">elif</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">min</span>()) <span class="op">==</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">max</span>()):</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Average is flat!'</span>)</span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Seems OK!'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Suspicious looking minima!</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_americas.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>min_data <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>min_min_data <span class="op">=</span> min_data.<span class="bu">min</span>()</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>max_min_data <span class="op">=</span> min_data.<span class="bu">max</span>()</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="cf">if</span> min_min_data <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> max_min_data <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Suspicious looking minima!'</span>)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="cf">elif</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">min</span>()) <span class="op">==</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">max</span>()):</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Average is flat!'</span>)</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Seems OK!'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Average is flat!</code></pre>
</div>
<p>In this way, we have asked Python to do something different depending
on the condition of our data. Here we printed messages in all cases, but
we could also imagine not using the <code>else</code> catch-all so that
messages are only printed when something is wrong, freeing us from
having to manually examine every plot for features we’ve seen
before.</p>
<div id="how-many-paths" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="how-many-paths" class="callout-inner">
<h3 class="callout-title">How Many Paths?<a class="anchor" aria-label="anchor" href="#how-many-paths"></a>
</h3>
<div class="callout-content">
<p>Consider this code:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="cf">if</span> <span class="dv">4</span> <span class="op">&gt;</span> <span class="dv">5</span>:</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'A'</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="cf">elif</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'B'</span>)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="cf">elif</span> <span class="dv">4</span> <span class="op">&lt;</span> <span class="dv">5</span>:</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'C'</span>)</span></code></pre>
</div>
<p>Which of the following would be printed if you were to run this code?
Why did you pick this answer?</p>
<ol style="list-style-type: decimal">
<li>A</li>
<li>B</li>
<li>C</li>
<li>B and C</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>C gets printed because the first two conditions,
<code>4 &gt; 5</code> and <code>4 == 5</code>, are not true, but
<code>4 &lt; 5</code> is true. In this case only one of these conditions
can be true for at a time, but in other scenarios multiple
<code>elif</code> conditions could be met. In these scenarios only the
action associated with the first true <code>elif</code> condition will
occur, starting from the top of the conditional section. <img src="fig/python-else-if.png" alt="A flowchart diagram of a conditional section with multiple elif conditions and some possible outcomes." class="figure">
This contrasts with the case of multiple <code>if</code> statements,
where every action can occur as long as their condition is met. <img src="fig/python-multi-if.png" alt="A flowchart diagram of a conditional section with multiple if statements and some possible outcomes." class="figure"></p>
</div>
</div>
</div>
</div>
<div id="what-is-truth" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="what-is-truth" class="callout-inner">
<h3 class="callout-title">What Is Truth?<a class="anchor" aria-label="anchor" href="#what-is-truth"></a>
</h3>
<div class="callout-content">
<p><code>True</code> and <code>False</code> booleans are not the only
values in Python that are true and false. In fact, <em>any</em> value
can be used in an <code>if</code> or <code>elif</code>. After reading
and running the code below, explain what the rule is for which values
are considered true and which are considered false.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="cf">if</span> <span class="st">''</span>:</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'empty string is true'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="cf">if</span> <span class="st">'word'</span>:</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'word is true'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="cf">if</span> []:</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'empty list is true'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="cf">if</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]:</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'non-empty list is true'</span>)</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="cf">if</span> <span class="dv">0</span>:</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'zero is true'</span>)</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="cf">if</span> <span class="dv">1</span>:</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'one is true'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="thats-not-not-what-i-meant" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="thats-not-not-what-i-meant" class="callout-inner">
<h3 class="callout-title">That’s Not Not What I Meant<a class="anchor" aria-label="anchor" href="#thats-not-not-what-i-meant"></a>
</h3>
<div class="callout-content">
<p>Sometimes it is useful to check whether some condition is not true.
The Boolean operator <code>not</code> can do this explicitly. After
reading and running the code below, write some <code>if</code>
statements that use <code>not</code> to test the rule that you
formulated in the previous challenge.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> <span class="st">''</span>:</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'empty string is not true'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> <span class="st">'word'</span>:</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'word is not true'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> <span class="kw">not</span> <span class="va">True</span>:</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'not not True is true'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="close-enough" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="close-enough" class="callout-inner">
<h3 class="callout-title">Close Enough<a class="anchor" aria-label="anchor" href="#close-enough"></a>
</h3>
<div class="callout-content">
<p>Write some conditions that print <code>True</code> if the variable
<code>a</code> is within 10% of the variable <code>b</code> and
<code>False</code> otherwise. Compare your implementation with your
partner’s: do you get the same answer for all possible pairs of
numbers?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Hint</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>There is a <a href="https://docs.python.org/3/library/functions.html#abs" class="external-link">built-in
function <code>abs</code></a> that returns the absolute value of a
number:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">abs</span>(<span class="op">-</span><span class="dv">12</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">12</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Solution 1</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>b <span class="op">=</span> <span class="fl">5.1</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="cf">if</span> <span class="bu">abs</span>(a <span class="op">-</span> b) <span class="op">&lt;=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="bu">abs</span>(b):</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'True'</span>)</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'False'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Solution 2</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">abs</span>(a <span class="op">-</span> b) <span class="op">&lt;=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="bu">abs</span>(b))</span></code></pre>
</div>
<p>This works because the Booleans <code>True</code> and
<code>False</code> have string representations which can be printed.</p>
</div>
</div>
</div>
</div>
<div id="in-place-operators" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="in-place-operators" class="callout-inner">
<h3 class="callout-title">In-Place Operators<a class="anchor" aria-label="anchor" href="#in-place-operators"></a>
</h3>
<div class="callout-content">
<p>Python (and most other languages in the C family) provides <a href="reference.html#in-place-operators">in-place operators</a> that
work like this:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">1</span>  <span class="co"># original value</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>x <span class="op">+=</span> <span class="dv">1</span> <span class="co"># add one to x, assigning result back to x</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>x <span class="op">*=</span> <span class="dv">3</span> <span class="co"># multiply x by 3</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">6</span></span></code></pre>
</div>
<p>Write some code that sums the positive and negative numbers in a list
separately, using in-place operators. Do you think the result is more or
less readable than writing the same without in-place operators?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>positive_sum <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>negative_sum <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>test_list <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">7</span>, <span class="op">-</span><span class="dv">8</span>]</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> test_list:</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>    <span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>        positive_sum <span class="op">+=</span> num</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a>    <span class="cf">elif</span> num <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a>        negative_sum <span class="op">+=</span> num</span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="bu">print</span>(positive_sum, negative_sum)</span></code></pre>
</div>
<p>Here <code>pass</code> means “don’t do anything”. In this particular
case, it’s not actually needed, since if <code>num == 0</code> neither
sum needs to change, but it illustrates the use of <code>elif</code> and
<code>pass</code>.</p>
</div>
</div>
</div>
</div>
<div id="counting-vowels" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="counting-vowels" class="callout-inner">
<h3 class="callout-title">Counting Vowels<a class="anchor" aria-label="anchor" href="#counting-vowels"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Write a loop that counts the number of vowels in a character
string.</li>
<li>Test it on a few individual words and full sentences.</li>
<li>Once you are done, compare your solution to your neighbor’s. Did you
make the same decisions about how to handle the letter ‘y’ (which some
people think is a vowel, and some do not)?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">Show me the solution</h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>vowels <span class="op">=</span> <span class="st">'aeiouAEIOU'</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>sentence <span class="op">=</span> <span class="st">'Mary had a little lamb.'</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="cf">for</span> char <span class="kw">in</span> sentence:</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="cf">if</span> char <span class="kw">in</span> vowels:</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>        count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The number of vowels in this string is '</span> <span class="op">+</span> <span class="bu">str</span>(count))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="trimming-values" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="trimming-values" class="callout-inner">
<h3 class="callout-title">Trimming Values<a class="anchor" aria-label="anchor" href="#trimming-values"></a>
</h3>
<div class="callout-content">
<p>Fill in the blanks so that this program creates a new list containing
zeroes where the original list’s values were negative and ones where the
original list’s values were positive.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>original <span class="op">=</span> [<span class="op">-</span><span class="fl">1.5</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">1.3</span>, <span class="fl">0.4</span>]</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>result <span class="op">=</span> ____</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="cf">for</span> value <span class="kw">in</span> original:</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>    <span class="cf">if</span> ____:</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>        result.append(<span class="dv">0</span>)</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>        ____</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="bu">print</span>(result)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[0, 1, 1, 1, 0, 1]</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">Show me the solution</h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>original <span class="op">=</span> [<span class="op">-</span><span class="fl">1.5</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.0</span>, <span class="op">-</span><span class="fl">1.3</span>, <span class="fl">0.4</span>]</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>result <span class="op">=</span> []</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="cf">for</span> value <span class="kw">in</span> original:</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>    <span class="cf">if</span> value <span class="op">&lt;</span> <span class="fl">0.0</span>:</span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>        result.append(<span class="dv">0</span>)</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>        result.append(<span class="dv">1</span>)</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="bu">print</span>(result)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="processing-small-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="processing-small-files" class="callout-inner">
<h3 class="callout-title">Processing Small Files<a class="anchor" aria-label="anchor" href="#processing-small-files"></a>
</h3>
<div class="callout-content">
<p>Modify this program so that it only processes files with fewer than
50 records.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> glob.glob(<span class="st">'data/*.csv'</span>):</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>    contents <span class="op">=</span> pd.read_csv(filename)</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    ____:</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>        <span class="bu">print</span>(filename, <span class="bu">len</span>(contents))</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">Show me the solution</h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> glob.glob(<span class="st">'data/*.csv'</span>):</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>    contents <span class="op">=</span> pd.read_csv(filename)</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(contents) <span class="op">&lt;</span> <span class="dv">50</span>:</span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a>        <span class="bu">print</span>(filename, <span class="bu">len</span>(contents))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="initializing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="initializing" class="callout-inner">
<h3 class="callout-title">Initializing<a class="anchor" aria-label="anchor" href="#initializing"></a>
</h3>
<div class="callout-content">
<p>Modify this program so that it finds the largest and smallest values
in the list no matter what the range of values originally is.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>values <span class="op">=</span> [...some test data...]</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>smallest, largest <span class="op">=</span> <span class="va">None</span>, <span class="va">None</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="cf">for</span> v <span class="kw">in</span> values:</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>    <span class="cf">if</span> ____:</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>        smallest, largest <span class="op">=</span> v, v</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>    ____:</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>        smallest <span class="op">=</span> <span class="bu">min</span>(____, v)</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>        largest <span class="op">=</span> <span class="bu">max</span>(____, v)</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="bu">print</span>(smallest, largest)</span></code></pre>
</div>
<p>What are the advantages and disadvantages of using this method to
find the range of the data?</p>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">Show me the solution</h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" aria-labelledby="headingSolution9" data-bs-parent="#accordionSolution9">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>values <span class="op">=</span> [<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">65</span>,<span class="dv">78</span>,<span class="op">-</span><span class="dv">54</span>,<span class="op">-</span><span class="dv">24</span>,<span class="dv">100</span>]</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>smallest, largest <span class="op">=</span> <span class="va">None</span>, <span class="va">None</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="cf">for</span> v <span class="kw">in</span> values:</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>    <span class="cf">if</span> smallest <span class="kw">is</span> <span class="va">None</span> <span class="kw">and</span> largest <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>        smallest, largest <span class="op">=</span> v, v</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a>        smallest <span class="op">=</span> <span class="bu">min</span>(smallest, v)</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a>        largest <span class="op">=</span> <span class="bu">max</span>(largest, v)</span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="bu">print</span>(smallest, largest)</span></code></pre>
</div>
<p>If you wrote <code>== None</code> instead of <code>is None</code>,
that works too, but Python programmers always write <code>is None</code>
because of the special way <code>None</code> works in the language.</p>
<p>It can be argued that an advantage of using this method would be to
make the code more readable. However, a disadvantage is that this code
is not efficient because within each iteration of the <code>for</code>
loop statement, there are two more loops that run over two numbers each
(the <code>min</code> and <code>max</code> functions). It would be more
efficient to iterate over each number just once:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>values <span class="op">=</span> [<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">65</span>,<span class="dv">78</span>,<span class="op">-</span><span class="dv">54</span>,<span class="op">-</span><span class="dv">24</span>,<span class="dv">100</span>]</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>smallest, largest <span class="op">=</span> <span class="va">None</span>, <span class="va">None</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="cf">for</span> v <span class="kw">in</span> values:</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>    <span class="cf">if</span> smallest <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> v <span class="op">&lt;</span> smallest:</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>        smallest <span class="op">=</span> v</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>    <span class="cf">if</span> largest <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> v <span class="op">&gt;</span> largest:</span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>        largest <span class="op">=</span> v</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="bu">print</span>(smallest, largest)</span></code></pre>
</div>
<p>Now we have one loop, but four comparison tests. There are two ways
we could improve it further: either use fewer comparisons in each
iteration, or use two loops that each contain only one comparison test.
The simplest solution is often the best:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>values <span class="op">=</span> [<span class="op">-</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">65</span>,<span class="dv">78</span>,<span class="op">-</span><span class="dv">54</span>,<span class="op">-</span><span class="dv">24</span>,<span class="dv">100</span>]</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>smallest <span class="op">=</span> <span class="bu">min</span>(values)</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>largest <span class="op">=</span> <span class="bu">max</span>(values)</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="bu">print</span>(smallest, largest)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>if condition</code> to start a conditional statement,
<code>elif condition</code> to provide additional tests, and
<code>else</code> to provide a default.</li>
<li>The bodies of the branches of conditional statements must be
indented.</li>
<li>Use <code>==</code> to test for equality.</li>
<li>
<code>X and Y</code> is only true if both <code>X</code> and
<code>Y</code> are true.</li>
<li>
<code>X or Y</code> is true if either <code>X</code> or
<code>Y</code>, or both, are true.</li>
<li>Zero, the empty string, and the empty list are considered false; all
other numbers, strings, and lists are considered true.</li>
<li>
<code>True</code> and <code>False</code> represent truth
values.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-08-func"><p>Content from <a href="08-func.html">Creating Functions</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/08-func.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I define new functions?</li>
<li>What’s the difference between defining and calling a function?</li>
<li>What happens when I call a function?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Define a function that takes parameters.</li>
<li>Return a value from a function.</li>
<li>Test and debug a function.</li>
<li>Set default values for function parameters.</li>
<li>Explain why we should divide programs into small, single-purpose
functions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Prerequisite<a class="anchor" aria-label="anchor" href="#prereq1"></a>
</h3>
<div class="callout-content">
<p>In this lesson we are going to be using the data in the
<code>penguin_data.csv</code> file, which is a subset of the freely
available dataset <a href="https://github.com/allisonhorst/palmerpenguins/tree/main" class="external-link"><code>palmerpenguins</code></a>.
This dataset contains the species, culmen length, culmen depth, flipper
length and mass of 343 penguins observed on the Palmer archipelago,
Antarctica.</p>
<figure><img src="https://github.com/allisonhorst/palmerpenguins/blob/main/man/figures/culmen_depth.png" class="figure mx-auto d-block"></figure><p>If you are starting a new notebook, you’ll need to
<code>import</code> Pandas and load this data into a variable, which we
will call <code>penguins</code>. We have assigned each penguin a name,
which we will use as the row labels (and pass to the
<code>index_col</code> parameter).</p>
<p>We will also be making plots, so we’ll need to import
<code>matplotlib.pyplot</code> like we did in lesson 3. And finally, we
also need the mathematical constant <span class="math inline">\(\pi\)</span> (<code>pi</code>), which we can
<code>import</code> from the <code>math</code> library that comes with
Python. For this we will be using <code>from</code> to only import a
single “thing” (pi in this case).</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> pi</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>penguins <span class="op">=</span> pd.read_csv(<span class="st">'data/penguin_data.csv'</span>, index_col<span class="op">=</span><span class="st">'name'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Pi is:"</span>, pi)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Our dataset looks like:"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="bu">print</span>(penguins.head(<span class="dv">5</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Pi is: 3.141592653589793
Our dataset looks like:
                id    species  culmen depth (mm)  culmen length (mm)  \
name
lyndale      N34A2     Gentoo               16.3                51.5
drexel       N32A1     Adelie               16.6                35.9
delaware     N56A2     Gentoo               16.0                48.6
phillips     N20A2     Gentoo               16.8                49.8
south shore  N65A2  Chinstrap               18.8                51.0

             flipper length (mm)  mass (kg)
name
lyndale                    230.0       5.50
drexel                     190.0       3.05
delaware                   230.0       5.80
phillips                   230.0       5.70
south shore                203.0       4.10</code></pre>
</div>
</div>
</div>
</div>
<p>Having recently returned from a research trip to Antarctica, a
researcher has hypothesised that penguin species with larger bills are
able to consume more food than those with smaller bills. The trouble is,
the data that’s been collected doesn’t record the information they want
directly - we will need to infer this information from the data that has
been recorded.</p>
<p>We’re going to have to do a lot of calculations with the data to help
justify this researcher’s claims. It would be helpful if we didn’t have
to manually type out these calculations <em>every time</em> we want to
perform them. This is where functions come in: given some
<em>inputs</em>, they define a sequence of steps which produce an
<em>output</em>.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="functions-are-like-recipes">Functions are like recipes<a class="anchor" aria-label="anchor" href="#functions-are-like-recipes"></a>
</h3>
<div class="callout-content">
<p>Python views functions in the same ways as humans might view recipes
when cooking. Given some ingredients (the inputs), you follow the recipe
(the instructions/steps), to produce a meal (the output). You might
decide to switch out the vegetables you’re using, or switch chips for
something like sweet potato fried, and so you get a different meal even
if the <em>steps you take</em> to make the meal are the same.</p>
<p>You only have to look in one place for the recipe to know what you’re
doing. Similarly, functions let us write one set of instructions that
can be run multiple times in our code. This also helps if we find a bug
in our instructions - we only have to change the instructions in one
place (the function) rather than all over our notebook!</p>
</div>
</div>
</div>
<p>The researcher informs us that we can treat the bill of a penguin as
a cylinder, with the “depth” being the diameter of the cylinder and the
“length” the height. The volume of a cylinder is given by <span class="math display">\[ \text{cylinder volume} = \text{cylinder height}
\times \pi \left(\text{cylinder radius} \right)^2. \]</span> This is not
a simple calculation to write out every time we need to do it, and we
will most likely want to do this calculation a lot in our analysis! So
we can define a <em>function</em> that can perform this calculation for
us.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">def</span> cylinder_volume(height, radius):</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    volume <span class="op">=</span> height <span class="op">*</span> pi <span class="op">*</span> radius <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    <span class="cf">return</span> volume</span></code></pre>
</div>
<figure><img src="fig/python-labelled-function.svg" alt="Labeled parts of a Python function definition" class="figure mx-auto d-block"></figure><p>A function always start with “def”, followed by the name of the
function (<code>cylinder_volume</code>). After the name, we put in
brackets the parameters (or arguments) that the function takes
(<code>height, radius</code>). The body concludes with a
<code>return</code> keyword that tells Python the value that this
function should provide as the output. In this function we’re also using
<code>**</code>, that’s the operator can be used to raise a number to a
power.</p>
<p>When we call the function, the values we pass to it are assigned to
those variables so that we can use them inside the function. Inside the
function, we use a <a href="reference.html#return-statement">return
statement</a> to send a result back to whoever asked for it. Let’s try
running our function:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>cylinder_volume(<span class="dv">1</span>, <span class="dv">1</span>)</span></code></pre>
</div>
<p>The volume of a cylinder with radius 1 and height 1, should be
<code>1 * pi * 1 ** 2 = pi</code></p>
<p>This command should call our function, using “1” as the input for
<code>height</code>, and “1” as the input for <code>radius</code>, and
return the function value. In fact, calling our own function is no
different from calling any other function:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'cylinder with no height has volume:'</span>, cylinder_volume(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'cylinder with height 1 and radius 1 has volume:'</span>, cylinder_volume(<span class="dv">1</span>, <span class="dv">1</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cylinder with no height has volume: 0.0
cylinder with height 1 and radius 1 has volume: 3.141592653589793</code></pre>
</div>
<p>We’ve successfully called the function that we defined, and we have
access to the value that we returned.</p>
<section id="composing-functions"><h2 class="section-heading">Composing Functions<a class="anchor" aria-label="anchor" href="#composing-functions"></a>
</h2>
<hr class="half-width">
<p>Now that we have a function to calculate the volume of a cylinder, we
can start to estimate the bill sizes of our penguins. From the
researcher’s explanation, the bill size of a penguin can be worked out
as: <span class="math display">\[ \text{bill size} = \text{culmen
height} \times \pi \left(\frac{\text{culmen depth}}{2} \right)^2,
\]</span> since the culmen depth is the cylinder’s diameter — which is
double the radius.</p>
<p>So how can we write out a function to estimate the bill size from the
culmen length and culmen depth? We could write out the formula above,
but we don’t need to. Instead, we can <a href="reference.html#compose">compose</a> our
<code>cylinder_volume</code> function with a statement that divides the
diameter by 2 to obtain the radius. We use it then to compute the bill
size of the penguin ‘phillips’.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">def</span> penguin_bill_size(culmen_length, culmen_depth):</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    culmen_radius <span class="op">=</span> culmen_depth <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    culmen_size <span class="op">=</span> cylinder_volume(culmen_length, culmen_radius)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="cf">return</span> culmen_size</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>phillips_length <span class="op">=</span> penguins.loc[<span class="st">'phillips'</span>,<span class="st">'culmen length (mm)'</span>]</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>phillips_depth <span class="op">=</span> penguins.loc[<span class="st">'phillips'</span>,<span class="st">'culmen depth (mm)'</span>]</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Penguin phillips has bill size'</span>, penguin_bill_size(phillips_length, phillips_depth), <span class="st">"mm^3"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Penguin phillips has bill size 11039.204726337332 mm^3</code></pre>
</div>
<p>This is our first taste of how larger programs are built: we define
basic operations, then combine them in ever-larger chunks to get the
effect we want. Real-life functions will usually be larger than the ones
shown here — typically half a dozen to a few dozen lines — but they
shouldn’t ever be much longer than that, or the next person who reads it
won’t be able to understand what’s going on.</p>
</section><section id="variable-scope"><h2 class="section-heading">Variable Scope<a class="anchor" aria-label="anchor" href="#variable-scope"></a>
</h2>
<hr class="half-width">
<p>In composing our <code>cylinder_volume</code> function, we created
variables <em>inside</em> of those functions —
<code>culmen_radius</code> and <code>culmen_size</code> inside
<code>penguin_bill_size</code>, and <code>volume</code> within
<code>cylinder_radius</code>. We refer to these variables as <a href="reference.html#local-variable">local variables</a> because they no
longer exist once the function is done executing. If we try to access
their values outside of the function, we will encounter an error:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The culmen_size was:'</span>, culmen_size)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
/tmp/ipykernel_8392/2249064020.py in &lt;module&gt;
----&gt; 1 print('The culmen_radius was:', culmen_size)

NameError: name 'culmen_size' is not defined</code></pre>
</div>
<p>If you want to reuse the bill size you’ve calculated, you can store
the result of the function call in a variable:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>bill_size <span class="op">=</span> penguin_bill_size(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'bill_size was:'</span>, bill_size)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>bill_size was: 3.141592653589793</code></pre>
</div>
<p>The variable <code>bill_size</code>, being defined outside any
function, is said to be <a href="reference.html#global-variable">global</a>.</p>
<p>Inside a function, one can read the value of such global variables.
For example, our <code>cylinder_volume</code> function is able to read
the value of <code>pi</code>, even though we didn’t actually assign
<code>pi</code> within the function!</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">def</span> cylinder_volume(height, radius):</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"This function knows the value of pi is"</span>, pi)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    volume <span class="op">=</span> height <span class="op">*</span> pi <span class="op">*</span> radius <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="cf">return</span> volume</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>volume <span class="op">=</span> cylinder_volume(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Volume was:"</span>, volume)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>This function knows the value of pi is 3.141592653589793
Volume was: 0.0</code></pre>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="operating-on-dataframe-columns">Operating on dataframe columns<a class="anchor" aria-label="anchor" href="#operating-on-dataframe-columns"></a>
</h3>
<div class="callout-content">
<p>Our <code>penguin_bill_size</code> function performs well when we
give it two individual numbers for the culmen length and depth. But our
dataframe has 343 penguins in it — we don’t want to call the function
343 times if we can avoid it! Fortunately for us, dataframes are clever
enough to allow us to “operate along columns”. If we want to do the
<em>same</em> calculation with all the values in two dataframe columns,
we can just give our function the dataframe <em>columns</em> containing
all the culmen lengths and culmen depths:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>bill_sizes <span class="op">=</span> penguin_bill_size(penguins[<span class="st">'culmen length (mm)'</span>], penguins[<span class="st">'culmen depth (mm)'</span>])</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="bu">print</span>(bill_sizes)</span></code></pre>
</div>
<p>This is an example of <em>vectorisation</em>; Python can perform the
same command across a set of data much faster than it would if we called
the <code>penguin_bill_size</code> 343 times on the individual culmen
lengths and depths!</p>
</div>
</div>
</div>
</section><section id="tidying-up"><h2 class="section-heading">Tidying up<a class="anchor" aria-label="anchor" href="#tidying-up"></a>
</h2>
<hr class="half-width">
<p>Now that we know how to wrap bits of code up in functions, we can
make our analysis of the size of penguin bills easier to read and reuse.
The researcher was interested in whether different penguin species have
different bill sizes, and a natural way to test this is to produce a box
plot for each of the species we have data on. First, let’s make a
<code>visualise_bill_sizes</code> function that generates a box plot for
a single species of penguin:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">def</span> visualise_bill_sizes(penguin_data, species_name):</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>    <span class="cf">if</span> species_name <span class="kw">in</span> penguin_data[<span class="st">'species'</span>].values:</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>        <span class="co"># We have some data on that species of penguin!</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>        this_species <span class="op">=</span> penguins.loc[penguins[<span class="st">'species'</span>] <span class="op">==</span> species_name]</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>        <span class="co"># Now let's work out the bill sizes of these penguins</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>        bill_sizes <span class="op">=</span> penguin_bill_size(this_species[<span class="st">'culmen length (mm)'</span>], this_species[<span class="st">'culmen depth (mm)'</span>])</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>        <span class="co"># Now let's make a plot of these bill sizes</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>        fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">10.</span>, <span class="fl">3.</span>))</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>        bill_sizes.plot.box(vert<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>        plt.title(species_name <span class="op">+</span> <span class="st">" penguins"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>        plt.xlabel(<span class="st">"Bill sizes (mm^3)"</span>)</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>        plt.show()</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"There is no data on penguin species:"</span>, species_name)</span></code></pre>
</div>
<p>This function checks first whether the species name requested exists
on the dataframe. If the species exists, then it proceeds to generate
the plot, otherwise it prints a message informing that the species is
not in the dataframe.</p>
<p>Wait! Didn’t we forget to specify what this functions should return?
Well, we didn’t. In Python, functions are not required to include a
<code>return</code> statement and can be used for the sole purpose of
grouping together pieces of code that conceptually do one thing. In such
cases, function names usually describe what they do, <em>e.g.</em>
<code>visualise_bill_sizes</code>.</p>
<p>Notice that rather than jumbling this code together in one giant
<code>for</code> loop, we can now read and reuse both ideas separately.
We can produce a box plot for each species of penguin using a
<code>for</code> loop, and by putting our function inside it!</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>penguins <span class="op">=</span> pd.read_csv(<span class="st">'data/penguin_data.csv'</span>, index_col<span class="op">=</span><span class="st">'name'</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>unique_species <span class="op">=</span> penguins[<span class="st">'species'</span>].unique</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="cf">for</span> species <span class="kw">in</span> unique_species:</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    visualise_bill_sizes(penguins, species)</span></code></pre>
</div>
<figure><img src="fig/08-box-plots.png" alt="Box plots of the distribution of bill sizes for different species of penguins" class="figure mx-auto d-block"></figure><p>By giving our functions human-readable names, we can more easily read
and understand what is happening in the <code>for</code> loop. Even
better, if at some later date we want to use either of those pieces of
code again, we can do so in a single line.</p>
<div id="combining-strings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="combining-strings" class="callout-inner">
<h3 class="callout-title">Combining Strings<a class="anchor" aria-label="anchor" href="#combining-strings"></a>
</h3>
<div class="callout-content">
<p>“Adding” two strings produces their concatenation:
<code>'a' + 'b'</code> is <code>'ab'</code>. Write a function called
<code>fence</code> that takes two parameters called
<code>original</code> and <code>wrapper</code> and returns a new string
that has the wrapper character at the beginning and end of the original.
A call to your function should look like this:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">print</span>(fence(<span class="st">'name'</span>, <span class="st">'*'</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>*name*</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">def</span> fence(original, wrapper):</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="cf">return</span> wrapper <span class="op">+</span> original <span class="op">+</span> wrapper</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="return-versus-print" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="return-versus-print" class="callout-inner">
<h3 class="callout-title">Return versus print<a class="anchor" aria-label="anchor" href="#return-versus-print"></a>
</h3>
<div class="callout-content">
<p>Note that <code>return</code> and <code>print</code> are not
interchangeable. <code>print</code> is a Python function that
<em>prints</em> data to the screen. It enables us, <em>users</em>, see
the data. <code>return</code> statement, on the other hand, makes data
visible to the program. Let’s have a look at the following function:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="bu">print</span>(a <span class="op">+</span> b)</span></code></pre>
</div>
<p><strong>Question</strong>: What will we see if we execute the
following commands?</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>A <span class="op">=</span> add(<span class="dv">7</span>, <span class="dv">3</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="bu">print</span>(A)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Python will first execute the function <code>add</code> with
<code>a = 7</code> and <code>b = 3</code>, and, therefore, print
<code>10</code>. However, because function <code>add</code> does not
have a line that starts with <code>return</code> (no <code>return</code>
“statement”), it will, by default, return nothing which, in Python
world, is called <code>None</code>. Therefore, <code>A</code> will be
assigned to <code>None</code> and the last line (<code>print(A)</code>)
will print <code>None</code>. As a result, we will see:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span>
<span><span class="va">None</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="rescaling-an-array" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="rescaling-an-array" class="callout-inner">
<h3 class="callout-title">Rescaling an Array<a class="anchor" aria-label="anchor" href="#rescaling-an-array"></a>
</h3>
<div class="callout-content">
<p>Our researcher has decided that it would be much clearer if all the
bill sizes were rescaled so that the corresponding values in the
<code>'species'</code> column lie in the range 0.0 to 1.0. Write a new
function <code>rescaled_bill_sizes</code> that: - Takes a dataframe of
penguins as it’s input. - Calculates the bill sizes of all the penguins
in the dataframe, then rescales the values to be in this range. -
Returns the rescaled bill sizes as the output.</p>
<p>Hint: If <code>L</code> and <code>H</code> are the lowest and highest
values of the original bill sizes, then the replacement for a bill size
<code>size</code> should be <code>(size-L) / (H-L)</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">def</span> rescaled_bill_sizes(data):</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>    bill_sizes <span class="op">=</span> penguin_bill_size(data[<span class="st">'culmen length (mm)'</span>], data[<span class="st">'culmen depth (mm)'</span>])</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>    L <span class="op">=</span> bill_sizes.<span class="bu">min</span>()</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>    H <span class="op">=</span> bill_sizes.<span class="bu">max</span>()</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>    rescaled_bill_sizes <span class="op">=</span> (bill_sizes <span class="op">-</span> L) <span class="op">/</span> (H <span class="op">-</span> L)</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    <span class="cf">return</span> rescaled_bill_sizes</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="variables-inside-and-outside-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-inside-and-outside-functions" class="callout-inner">
<h3 class="callout-title">Variables Inside and Outside Functions<a class="anchor" aria-label="anchor" href="#variables-inside-and-outside-functions"></a>
</h3>
<div class="callout-content">
<p>What does the following piece of code display when run — and why?</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>f <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="kw">def</span> f2k(f):</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    k <span class="op">=</span> ((f <span class="op">-</span> <span class="dv">32</span>) <span class="op">*</span> (<span class="fl">5.0</span> <span class="op">/</span> <span class="fl">9.0</span>)) <span class="op">+</span> <span class="fl">273.15</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="cf">return</span> k</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="bu">print</span>(f2k(<span class="dv">8</span>))</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="bu">print</span>(f2k(<span class="dv">41</span>))</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="bu">print</span>(f2k(<span class="dv">32</span>))</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="bu">print</span>(k)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">259.81666666666666</span></span>
<span><span class="fl">278.15</span></span>
<span><span class="fl">273.15</span></span>
<span><span class="fl">0</span></span></code></pre>
</div>
<p><code>k</code> is 0 because the <code>k</code> inside the function
<code>f2k</code> doesn’t know about the <code>k</code> defined outside
the function. When the <code>f2k</code> function is called, it creates a
<a href="reference.html#local-variable">local variable</a>
<code>k</code>. The function does not return any values and does not
alter <code>k</code> outside of its local copy. Therefore the original
value of <code>k</code> remains unchanged. Beware that a local
<code>k</code> is created because <code>f2k</code> internal statements
<em>affect</em> a new value to it. If <code>k</code> was only
<code>read</code>, it would simply retrieve the global <code>k</code>
value.</p>
</div>
</div>
</div>
</div>
<div id="variables-inside-and-outside-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-inside-and-outside-functions" class="callout-inner">
<h3 class="callout-title">Variables Inside and Outside Functions<em>(continued)</em><a class="anchor" aria-label="anchor" href="#variables-inside-and-outside-functions"></a>
</h3>
<div class="callout-content">
<p>Do you recognise what is this function doing?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>It converts temperature between Fahrenheit and Kelvin degrees.
Probably, it would have been easier to understand if written in this
way:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">def</span> fahr_to_kelvin(temp_f):</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>    temp_celsius <span class="op">=</span> (temp_f <span class="op">-</span> <span class="dv">32</span>) <span class="op">*</span> (<span class="dv">5</span><span class="op">/</span><span class="dv">9</span>)</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>    temp_kelvin <span class="op">=</span> temp_celsius <span class="op">+</span> <span class="fl">273.15</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>    <span class="cf">return</span> temp_kelvin</span></code></pre>
</div>
<p>Naming functions and variables in a readable helps the next person
who comes to read your code. That next person could be your
future-self!</p>
</div>
</div>
</div>
</div>
<div id="producing-a-scatter-plot" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="producing-a-scatter-plot" class="callout-inner">
<h3 class="callout-title">Producing a scatter plot<a class="anchor" aria-label="anchor" href="#producing-a-scatter-plot"></a>
</h3>
<div class="callout-content">
<p>Write a function <code>plot_bill_size_vs_flipper</code> that: - Takes
the penguin data and the name of a species as its arguments - Produces a
scatter plot for that species; with the flipper size on the x-axis and
bill size on the y-axis - Shows this plot on the screen.</p>
<p>Hint: <code>plt.scatter(x_data, y_data)</code> produces a scatter
plot.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">Show me the solution</h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="kw">def</span> plot_bill_size_vs_flipper(penguin_data, species_name):</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>    <span class="cf">if</span> species_name <span class="kw">in</span> penguin_data[<span class="st">'species'</span>].values:</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>        this_species <span class="op">=</span> penguins.loc[penguins[<span class="st">'species'</span>] <span class="op">==</span> species_name]</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>        bill_sizes <span class="op">=</span> penguin_bill_size(this_species[<span class="st">'culmen length (mm)'</span>], this_species[<span class="st">'culmen depth (mm)'</span>])</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>        fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">5.</span>, <span class="fl">5.</span>))</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>        plt.scatter(this_species[<span class="st">'flipper length (mm)'</span>], bill_sizes)</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a>        plt.title(species_name <span class="op">+</span> <span class="st">" penguins"</span>)</span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>        plt.xlabel(<span class="st">"Flipper length (mm)"</span>)</span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a>        plt.ylabel(<span class="st">"Bill sizes (mm^3)"</span>)</span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a>        plt.show()</span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"There is no data on penguin species:"</span>, species_name)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="tidying-up-1"><h2 class="section-heading">Tidying up<a class="anchor" aria-label="anchor" href="#tidying-up-1"></a>
</h2>
<hr class="half-width">
<p>Now that we know how to wrap bits of code up in functions, we can
make our GDP analysis easier to read and easier to reuse. First, let’s
make a <code>visualize</code> function that generates our plots:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="kw">def</span> visualize(filename):</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    continent <span class="op">=</span> filename.split(<span class="st">'_'</span>)[<span class="op">-</span><span class="dv">1</span>][:<span class="op">-</span><span class="dv">4</span>].capitalize()</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    data_gdp <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>    fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="fl">18.0</span>, <span class="fl">3.0</span>))</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>    axes_1 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>    axes_2 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>    axes_3 <span class="op">=</span> fig.add_subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a>    axes_1.set_title(<span class="st">'Min'</span>)</span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a>    axes_1.set_ylabel(<span class="st">'GDP/capita'</span>)</span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a>    axes_1.plot(data_gdp.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>))</span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a>    axes_2.set_title(<span class="st">'Max'</span>)</span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a>    axes_2.plot(data_gdp.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'rows'</span>))</span>
<span id="cb29-19"><a href="#cb29-19" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" tabindex="-1"></a>    axes_3.set_title(<span class="st">'Average'</span>)</span>
<span id="cb29-21"><a href="#cb29-21" tabindex="-1"></a>    axes_3.plot(data_gdp.mean(axis<span class="op">=</span><span class="st">'rows'</span>))</span>
<span id="cb29-22"><a href="#cb29-22" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" tabindex="-1"></a>    fig.suptitle(<span class="st">'GDP/capita statistics for countries in '</span> <span class="op">+</span> continent)</span>
<span id="cb29-24"><a href="#cb29-24" tabindex="-1"></a>    fig.tight_layout()</span>
<span id="cb29-25"><a href="#cb29-25" tabindex="-1"></a>    plt.show()</span></code></pre>
</div>
<p>and another function called <code>detect_problems</code> that checks
for those systematics we noticed:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="kw">def</span> detect_problems(filename):</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>    data_gdp <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>    min_data <span class="op">=</span> data_gdp.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'rows'</span>)</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>    min_min_data <span class="op">=</span> min_data.<span class="bu">min</span>()</span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>    max_min_data <span class="op">=</span> min_data.<span class="bu">max</span>()</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a>    <span class="cf">if</span> min_min_data <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> max_min_data <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Suspicious looking minima!'</span>)</span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">min</span>()) <span class="op">==</span> <span class="bu">round</span>(data.mean(axis<span class="op">=</span><span class="st">'rows'</span>).<span class="bu">max</span>()):</span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Average is flat!'</span>)</span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Seems OK!'</span>)</span></code></pre>
</div>
<p>Notice that rather than jumbling this code together in one giant
<code>for</code> loop, we can now read and reuse both ideas separately.
We can reproduce the previous analysis with a much simpler
<code>for</code> loop:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>filenames <span class="op">=</span> <span class="bu">sorted</span>(glob.glob(<span class="st">'data/gapminder_*.csv'</span>))</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> filenames[:<span class="dv">3</span>]:</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>    <span class="bu">print</span>(filename)</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>    visualize(filename)</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a>    detect_problems(filename)</span></code></pre>
</div>
<p>By giving our functions human-readable names, we can more easily read
and understand what is happening in the <code>for</code> loop. Even
better, if at some later date we want to use either of those pieces of
code again, we can do so in a single line.</p>
</section><section id="testing-and-documenting"><h2 class="section-heading">Testing and Documenting<a class="anchor" aria-label="anchor" href="#testing-and-documenting"></a>
</h2>
<hr class="half-width">
<p>Once we start putting things in functions so that we can re-use them,
we need to start testing that those functions are working correctly. To
see how to do this, let’s write a function to convert values between USD
to GBP:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="kw">def</span> usd_to_gbp(data, usd_gbp_rate):</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>    <span class="cf">return</span> (data <span class="op">*</span> usd_gbp_rate)</span></code></pre>
</div>
<p>We could test this on our actual data, but since we don’t know what
the values ought to be, it will be hard to tell if the result was
correct. Instead, let’s input a value manually, 1 USD, and 0.8 USD-GBP
rate:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="bu">print</span>(usd_to_gbp(<span class="dv">1</span>, <span class="fl">0.8</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0.8</span></span></code></pre>
</div>
<p>That looks right, so let’s try <code>usd_to_gbp</code> on our real
data:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>data_gdp <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_oceania.csv'</span>, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'in USD'</span>)</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="bu">print</span>(data_gdp.loc[:, <span class="dv">1952</span>:<span class="dv">1962</span>])</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'in GBP'</span>)</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="bu">print</span>(usd_to_gbp(data_gdp.loc[:, <span class="dv">1952</span>:<span class="dv">1962</span>], <span class="fl">0.8</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>in USD
                       1952            1957            1962
country
Australia       10039.59564     10949.64959     12217.22686
New Zealand     10556.57566     12247.39532     13175.67800

in GBP
                       1952            1957            1962
country
Australia       8031.676512     8759.719672     9773.781488
New Zealand     8445.260528     9797.916256    10540.542400</code></pre>
</div>
<p>We have one more task to do first, though: we should write some <a href="reference.html#documentation">documentation</a> for our function
to remind ourselves later what it’s for and how to use it.</p>
<p>The usual way to put documentation in software is to add <a href="reference.html#comment">comments</a> like this:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co"># usd_to_gbp(data, usd_gbp_rate):</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="co"># return the input data converted to GBP</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="kw">def</span> usd_to_gbp(data, usd_gbp_rate):</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>    <span class="cf">return</span> (data <span class="op">*</span> usd_gbp_rate)</span></code></pre>
</div>
<p>There’s a better way, though. If the first thing in a function is a
string that isn’t assigned to a variable, that string is attached to the
function as its documentation:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="kw">def</span> usd_to_gbp(data, usd_gbp_rate):</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>    <span class="co">"""Return the input data converted to GBP.</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>    <span class="cf">return</span> (data <span class="op">*</span> usd_gbp_rate)</span></code></pre>
</div>
<p>This is better because we can now ask Python’s built-in help system
to show us the documentation for the function:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="bu">help</span>(usd_to_gbp)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on function usd_to_gbp in module __main__:

usd_to_gbp(data, usd_gbp_rate):
    Return the input data converted to GBP.</code></pre>
</div>
<p>A string like this is called a <a href="reference.html#docstring">docstring</a>. We don’t need to use
triple quotes when we write one, but if we do, we can break the string
across multiple lines:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="kw">def</span> usd_to_gbp(data, usd_gbp_rate):</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>    <span class="co">"""Return the input data converted to GBP.</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="co">    Examples</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; usd_to_gbp(10, 0.80)</span></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="co">    8.</span></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a>    <span class="cf">return</span> (data <span class="op">*</span> usd_gbp_rate)</span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a><span class="bu">help</span>(usd_to_gbp)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on function usd_to_gbp in module __main__:

usd_to_gbp(data, usd_gbp_rate):
    Return the input data converted to GBP.

    Examples
    --------
    &gt;&gt;&gt; usd_to_gbp(10, 0.80)
    8.</code></pre>
</div>
</section><section id="defining-defaults"><h2 class="section-heading">Defining Defaults<a class="anchor" aria-label="anchor" href="#defining-defaults"></a>
</h2>
<hr class="half-width">
<p>We have passed parameters to functions in two ways: directly, as in
<code>type(data)</code>, and by name, as in
<code>pd.read_csv(filename, index_col='country')</code>. but we still
need to say <code>index_col=</code>:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>pd.read_csv(<span class="st">'data/gapminder_gdp_oceania.csv'</span>, <span class="st">'country'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Traceback (most recent call last):
ParserWarning: Falling back to the 'python' engine because the 'c' engine does not support regex separators (separators &gt; 1 char and different from '\s+' are interpreted as regex); you can avoid this warning by specifying engine='python'.
  oceania =  pd.read_csv('data/gapminder_gdp_oceania.csv', 'country')</code></pre>
</div>
<p>To understand what’s going on, and make our own functions easier to
use, let’s re-define our <code>usd_to_gbp</code> function like this:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="kw">def</span> usd_to_gbp(data, usd_gbp_rate<span class="op">=</span><span class="fl">0.8</span>):</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>    <span class="co">"""Return the input data converted to GBP (usd to gbp rate as 0.8 by default).</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="co">    Examples</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; usd_to_gbp(10)</span></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a><span class="co">    8.</span></span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a>    <span class="cf">return</span> (data <span class="op">*</span> usd_gbp_rate)</span></code></pre>
</div>
<p>The key change is that the second parameter is now written
<code>usd_gbp_rate=0.8</code> instead of just <code>usd_gbp_rate</code>.
If we call the function with two arguments, it works as it did
before:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="bu">print</span>(usd_to_gbp(<span class="dv">1</span>, <span class="fl">0.3</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0.3</span></span></code></pre>
</div>
<p>But we can also now call it with just one parameter, in which case
<code>usd_gbp_rate</code> is automatically assigned the <a href="reference.html#default-value">default value</a> of 0.8.</p>
<p>This is handy: if we usually want a function to work one way, but
occasionally need it to do something else, we can allow people to pass a
parameter when they need to but provide a default to make the normal
case easier. The example below shows how Python matches values to
parameters:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="kw">def</span> display(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>, c<span class="op">=</span><span class="dv">3</span>):</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a:'</span>, a, <span class="st">'b:'</span>, b, <span class="st">'c:'</span>, c)</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'no parameters:'</span>)</span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>display()</span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'one parameter:'</span>)</span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a>display(<span class="dv">55</span>)</span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'two parameters:'</span>)</span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a>display(<span class="dv">55</span>, <span class="dv">66</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>no parameters:
a: 1 b: 2 c: 3
one parameter:
a: 55 b: 2 c: 3
two parameters:
a: 55 b: 66 c: 3</code></pre>
</div>
<p>As this example shows, parameters are matched up from left to right,
and any that haven’t been given a value explicitly get their default
value. We can override this behavior by naming the value as we pass it
in:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'only setting the value of c'</span>)</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>display(c<span class="op">=</span><span class="dv">77</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>only setting the value of c
a: 1 b: 2 c: 77</code></pre>
</div>
<p>With that in hand, let’s look at the help for
<code>pd.read_csv</code>:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="bu">help</span>(pd.read_csv)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on function read_csv in module pandas.io.parsers.readers:

read_csv(filepath_or_buffer: 'FilePath | ReadCsvBuffer[bytes] | ReadCsvBuffer[str]', *, sep: 'str | None | lib.NoDefault' = &lt;no_default&gt;, ...
    Read a comma-separated values (csv) file into DataFrame.

    Also supports optionally iterating or breaking of the file
    into chunks.

    Additional help can be found in the online docs for
    `IO Tools &lt;https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html&gt;`_.

    Parameters
    ----------
...</code></pre>
</div>
<p>There’s a lot of information here, but the most important part is the
first couple of lines:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>read_csv(filepath_or_buffer: 'FilePath | ReadCsvBuffer[bytes] | ReadCsvBuffer[str]', *, sep: 'str | None | lib.NoDefault' = &lt;no_default&gt;, ...</code></pre>
</div>
<p>This tells us that <code>read_csv</code> has one parameter called
<code>filepath_or_buffer</code> that doesn’t have a default value, and
many others that do. If we call the function like this:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>pd.read_csv(<span class="st">'data/gapminder_gdp_oceania'</span>, <span class="st">'country'</span>)</span></code></pre>
</div>
<p>then the filename is assigned to <code>filepath_or_buffer</code>
(which is what we want), but the index column string
<code>'country'</code> is assigned to <code>sep</code> rather than
<code>index_col</code>, because <code>sep</code> is the second parameter
in the list. However <code>'country'</code> isn’t a known delimiter so
our code produced an error message when we tried to run it. When we call
<code>pd.read_csv</code> we don’t have to provide
<code>filepath_or_buffer=</code> for the filename because it’s the first
item in the list, but if we want the <code>'country'</code> to be
assigned to the variable <code>index_col</code>, we <em>do</em> have to
provide <code>index_col=</code> for the second parameter since
<code>ndex_col</code> is not the second parameter in the list.</p>
<div id="mixing-default-and-non-default-parameters" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="mixing-default-and-non-default-parameters" class="callout-inner">
<h3 class="callout-title">Mixing Default and Non-Default Parameters<a class="anchor" aria-label="anchor" href="#mixing-default-and-non-default-parameters"></a>
</h3>
<div class="callout-content">
<p>Given the following code:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="kw">def</span> numbers(one, two<span class="op">=</span><span class="dv">2</span>, three, four<span class="op">=</span><span class="dv">4</span>):</span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">str</span>(one) <span class="op">+</span> <span class="bu">str</span>(two) <span class="op">+</span> <span class="bu">str</span>(three) <span class="op">+</span> <span class="bu">str</span>(four)</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>    <span class="cf">return</span> n</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="bu">print</span>(numbers(<span class="dv">1</span>, three<span class="op">=</span><span class="dv">3</span>))</span></code></pre>
</div>
<p>what do you expect will be printed? What is actually printed? What
rule do you think Python is following?</p>
<ol style="list-style-type: decimal">
<li><code>1234</code></li>
<li><code>one2three4</code></li>
<li><code>1239</code></li>
<li><code>SyntaxError</code></li>
</ol>
<p>Given that, what does the following piece of code display when
run?</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="kw">def</span> func(a, b<span class="op">=</span><span class="dv">3</span>, c<span class="op">=</span><span class="dv">6</span>):</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a: '</span>, a, <span class="st">'b: '</span>, b, <span class="st">'c:'</span>, c)</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>func(<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>a: b: 3 c: 6</code></li>
<li><code>a: -1 b: 3 c: 6</code></li>
<li><code>a: -1 b: 2 c: 6</code></li>
<li><code>a: b: -1 c: 2</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">Show me the solution</h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>Attempting to define the <code>numbers</code> function results in
<code>4. SyntaxError</code>. The defined parameters <code>two</code> and
<code>four</code> are given default values. Because <code>one</code> and
<code>three</code> are not given default values, they are required to be
included as arguments when the function is called and must be placed
before any parameters that have default values in the function
definition.</p>
<p>The given call to <code>func</code> displays
<code>a: -1 b: 2 c: 6</code>. -1 is assigned to the first parameter
<code>a</code>, 2 is assigned to the next parameter <code>b</code>, and
<code>c</code> is not passed a value, so it uses its default value
6.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Define a function using
<code>def function_name(parameter)</code>.</li>
<li>The body of a function must be indented.</li>
<li>Call a function using <code>function_name(value)</code>.</li>
<li>Variables defined within a function can only be seen and used within
the body of the function.</li>
<li>Variables created outside of any function are called global
variables.</li>
<li>Within a function, we can access global variables.</li>
<li>If we want to do the same calculation on all entries in our columns,
we can pass the dataframe columns as the inputs to a function.</li>
<li>Use <code>help(thing)</code> to view help for something.</li>
<li>Put docstrings in functions to provide help for that function.</li>
<li>Specify default values for parameters when defining a function using
<code>name=value</code> in the parameter list.</li>
<li>Parameters can be passed by matching based on name, by position, or
by omitting them (in which case the default value is used).</li>
<li>Put code whose parameters change frequently in a function, then call
it with different parameter values to customize its behavior.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-09-errors"><p>Content from <a href="09-errors.html">Errors and Exceptions</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/09-errors.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How does Python report errors?</li>
<li>How can I handle errors in Python programs?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to read a traceback, and determine where the error took
place and what type it is.</li>
<li>To be able to describe the types of situations in which syntax
errors, indentation errors, name errors, index errors, and missing file
errors occur.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Every programmer encounters errors, both those who are just
beginning, and those who have been programming for years. Encountering
errors and exceptions can be very frustrating at times, and can make
coding feel like a hopeless endeavour. However, understanding what the
different types of errors are and when you are likely to encounter them
can help a lot. Once you know <em>why</em> you get certain types of
errors, they become much easier to fix.</p>
<p>Errors in Python have a very specific form, called a <a href="reference.html#traceback">traceback</a>. Let’s examine one:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># This code has an intentional error. You can type it directly or</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># use it for reference to understand the error message below.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">def</span> favorite_ice_cream():</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    ice_creams <span class="op">=</span> [</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>        <span class="st">'chocolate'</span>,</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>        <span class="st">'vanilla'</span>,</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>        <span class="st">'strawberry'</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    ]</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    <span class="bu">print</span>(ice_creams[<span class="dv">3</span>])</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>favorite_ice_cream()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-1-70bd89baa4df&gt; in &lt;module&gt;()
      9     print(ice_creams[3])
      10
----&gt; 11 favorite_ice_cream()

&lt;ipython-input-1-70bd89baa4df&gt; in favorite_ice_cream()
      7         'strawberry'
      8     ]
----&gt; 9     print(ice_creams[3])
      10
      11 favorite_ice_cream()

IndexError: list index out of range</code></pre>
</div>
<p>This particular traceback has two levels. You can determine the
number of levels by looking for the number of arrows on the left hand
side. In this case:</p>
<ol style="list-style-type: decimal">
<li><p>The first shows code from the cell above, with an arrow pointing
to Line 11 (which is <code>favorite_ice_cream()</code>).</p></li>
<li><p>The second shows some code in the function
<code>favorite_ice_cream</code>, with an arrow pointing to Line 9 (which
is <code>print(ice_creams[3])</code>).</p></li>
</ol>
<p>The last level is the actual place where the error occurred. The
other level(s) show what function the program executed to get to the
next level down. So, in this case, the program first performed a <a href="reference.html#function-call">function call</a> to the function
<code>favorite_ice_cream</code>. Inside this function, the program
encountered an error on Line 6, when it tried to run the code
<code>print(ice_creams[3])</code>.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="long-tracebacks">Long Tracebacks<a class="anchor" aria-label="anchor" href="#long-tracebacks"></a>
</h3>
<div class="callout-content">
<p>Sometimes, you might see a traceback that is very long -- sometimes
they might even be 20 levels deep! This can make it seem like something
horrible happened, but the length of the error message does not reflect
severity, rather, it indicates that your program called many functions
before it encountered the error. Most of the time, the actual place
where the error occurred is at the bottom-most level, so you can skip
down the traceback to the bottom.</p>
</div>
</div>
</div>
<p>So what error did the program actually encounter? In the last line of
the traceback, Python helpfully tells us the category or type of error
(in this case, it is an <code>IndexError</code>) and a more detailed
error message (in this case, it says “list index out of range”).</p>
<p>If you encounter an error and don’t know what it means, it is still
important to read the traceback closely. That way, if you fix the error,
but encounter a new one, you can tell that the error changed.
Additionally, sometimes knowing <em>where</em> the error occurred is
enough to fix it, even if you don’t entirely understand the message.</p>
<p>If you do encounter an error you don’t recognize, try looking at the
<a href="https://docs.python.org/3/library/exceptions.html" class="external-link">official
documentation on errors</a>. However, note that you may not always be
able to find the error there, as it is possible to create custom errors.
In that case, hopefully the custom error message is informative enough
to help you figure out what went wrong.</p>
<div id="reading-error-messages" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reading-error-messages" class="callout-inner">
<h3 class="callout-title">Reading Error Messages<a class="anchor" aria-label="anchor" href="#reading-error-messages"></a>
</h3>
<div class="callout-content">
<p>Read the Python code and the resulting traceback below, and answer
the following questions:</p>
<ol style="list-style-type: decimal">
<li>How many levels does the traceback have?</li>
<li>What is the function name where the error occurred?</li>
<li>On which line number in this function did the error occur?</li>
<li>What is the type of error?</li>
<li>What is the error message?</li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># This code has an intentional error. Do not type it directly;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># use it for reference to understand the error message below.</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="kw">def</span> print_message(day):</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    messages <span class="op">=</span> [</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>        <span class="st">'Hello, world!'</span>,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>        <span class="st">'Today is Tuesday!'</span>,</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>        <span class="st">'It is the middle of the week.'</span>,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>        <span class="st">'Today is Donnerstag in German!'</span>,</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>        <span class="st">'Last day of the week!'</span>,</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>        <span class="st">'Hooray for the weekend!'</span>,</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>        <span class="st">'Aw, the weekend is almost over.'</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    ]</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="bu">print</span>(messages[day])</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="kw">def</span> print_sunday_message():</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>    print_message(<span class="dv">7</span>)</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>print_sunday_message()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-7-3ad455d81842&gt; in &lt;module&gt;
     16     print_message(7)
     17 
---&gt; 18 print_sunday_message()
     19 

&lt;ipython-input-7-3ad455d81842&gt; in print_sunday_message()
     14 
     15 def print_sunday_message():
---&gt; 16     print_message(7)
     17 
     18 print_sunday_message()

&lt;ipython-input-7-3ad455d81842&gt; in print_message(day)
     11         'Aw, the weekend is almost over.'
     12     ]
---&gt; 13     print(messages[day])
     14 
     15 def print_sunday_message():

IndexError: list index out of range</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>3 levels</li>
<li><code>print_message</code></li>
<li>13</li>
<li><code>IndexError</code></li>
<li>
<code>list index out of range</code> You can then infer that
<code>7</code> is not the right index to use with
<code>messages</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="better-errors-on-newer-pythons">Better errors on newer Pythons<a class="anchor" aria-label="anchor" href="#better-errors-on-newer-pythons"></a>
</h3>
<div class="callout-content">
<p>Newer versions of Python have improved error printouts. If you are
debugging errors, it is often helpful to use the latest Python version,
even if you support older versions of Python.</p>
</div>
</div>
</div>
<section id="syntax-errors"><h2 class="section-heading">Syntax Errors<a class="anchor" aria-label="anchor" href="#syntax-errors"></a>
</h2>
<hr class="half-width">
<p>When you forget a colon at the end of a line, accidentally add one
space too many when indenting under an <code>if</code> statement, or
forget a parenthesis, you will encounter a <a href="reference.html#syntax-error">syntax error</a>. This means that
Python couldn’t figure out how to read your program. This is similar to
forgetting punctuation in English: for example, this text is difficult
to read there is no punctuation there is also no capitalization why is
this hard because you have to figure out where each sentence ends you
also have to figure out where each sentence begins to some extent it
might be ambiguous if there should be a sentence break or not</p>
<p>People can typically figure out what is meant by text with no
punctuation, but people are much smarter than computers. If Python
doesn’t know how to read the program, it will give up and inform you
with an error. For example:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">def</span> some_function()</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    msg <span class="op">=</span> <span class="st">'hello, world!'</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="bu">print</span>(msg)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>     <span class="cf">return</span> msg</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  File "&lt;ipython-input-3-6bb841ea1423&gt;", line 1
    def some_function()
                       ^
SyntaxError: invalid syntax</code></pre>
</div>
<p>Here, Python tells us that there is a <code>SyntaxError</code> on
line 1, and even puts a little arrow in the place where there is an
issue. In this case the problem is that the function definition is
missing a colon at the end.</p>
<p>Actually, the function above has <em>two</em> issues with syntax. If
we fix the problem with the colon, we see that there is <em>also</em> an
<code>IndentationError</code>, which means that the lines in the
function definition do not all have the same indentation:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">def</span> some_function():</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    msg <span class="op">=</span> <span class="st">'hello, world!'</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="bu">print</span>(msg)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>     <span class="cf">return</span> msg</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  File "&lt;ipython-input-4-ae290e7659cb&gt;", line 4
    return msg
    ^
IndentationError: unexpected indent</code></pre>
</div>
<p>Both <code>SyntaxError</code> and <code>IndentationError</code>
indicate a problem with the syntax of your program, but an
<code>IndentationError</code> is more specific: it <em>always</em> means
that there is a problem with how your code is indented.</p>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="tabs-and-spaces">Tabs and Spaces<a class="anchor" aria-label="anchor" href="#tabs-and-spaces"></a>
</h3>
<div class="callout-content">
<p>Some indentation errors are harder to spot than others. In
particular, mixing spaces and tabs can be difficult to spot because they
are both <a href="reference.html#whitespace">whitespace</a>. In the
example below, the first two lines in the body of the function
<code>some_function</code> are indented with tabs, while the third line
— with spaces. If you’re working in a Jupyter notebook, be sure to copy
and paste this example rather than trying to type it in manually because
Jupyter automatically replaces tabs with spaces.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">def</span> some_function():</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>	msg <span class="op">=</span> <span class="st">'hello, world!'</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>	<span class="bu">print</span>(msg)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>        <span class="cf">return</span> msg</span></code></pre>
</div>
<p>Visually it is impossible to spot the error. Fortunately, Python does
not allow you to mix tabs and spaces.</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  File "&lt;ipython-input-5-653b36fbcd41&gt;", line 4
    return msg
              ^
TabError: inconsistent use of tabs and spaces in indentation</code></pre>
</div>
</div>
</div>
</div>
</section><section id="variable-name-errors"><h2 class="section-heading">Variable Name Errors<a class="anchor" aria-label="anchor" href="#variable-name-errors"></a>
</h2>
<hr class="half-width">
<p>Another very common type of error is called a <code>NameError</code>,
and occurs when you try to use a variable that does not exist. For
example:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">print</span>(a)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-7-9d7b17ad5387&gt; in &lt;module&gt;()
----&gt; 1 print(a)

NameError: name 'a' is not defined</code></pre>
</div>
<p>Variable name errors come with some of the most informative error
messages, which are usually of the form “name ‘the_variable_name’ is not
defined”.</p>
<p>Why does this error message occur? That’s a harder question to
answer, because it depends on what your code is supposed to do. However,
there are a few very common reasons why you might have an undefined
variable. The first is that you meant to use a <a href="reference.html#string">string</a>, but forgot to put quotes around
it:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="bu">print</span>(hello)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-8-9553ee03b645&gt; in &lt;module&gt;()
----&gt; 1 print(hello)

NameError: name 'hello' is not defined</code></pre>
</div>
<p>The second reason is that you might be trying to use a variable that
does not yet exist. In the following example, <code>count</code> should
have been defined (e.g., with <code>count = 0</code>) before the for
loop:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>    count <span class="op">=</span> count <span class="op">+</span> number</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The count is:'</span>, count)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-9-dd6a12d7ca5c&gt; in &lt;module&gt;()
      1 for number in range(10):
----&gt; 2     count = count + number
      3 print('The count is:', count)

NameError: name 'count' is not defined</code></pre>
</div>
<p>Finally, the third possibility is that you made a typo when you were
writing your code. Let’s say we fixed the error above by adding the line
<code>Count = 0</code> before the for loop. Frustratingly, this actually
does not fix the error. Remember that variables are <a href="reference.html#case-sensitive">case-sensitive</a>, so the variable
<code>count</code> is different from <code>Count</code>. We still get
the same error, because we still have not defined
<code>count</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>Count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    count <span class="op">=</span> count <span class="op">+</span> number</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The count is:'</span>, count)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input-10-d77d40059aea&gt; in &lt;module&gt;()
      1 Count = 0
      2 for number in range(10):
----&gt; 3     count = count + number
      4 print('The count is:', count)

NameError: name 'count' is not defined</code></pre>
</div>
</section><section id="index-errors"><h2 class="section-heading">Index Errors<a class="anchor" aria-label="anchor" href="#index-errors"></a>
</h2>
<hr class="half-width">
<p>Next up are errors having to do with containers (like lists and
strings) and the items within them. If you try to access an item in a
list or a string that does not exist, then you will get an error. This
makes sense: if you asked someone what day they would like to get
coffee, and they answered “caturday”, you might be a bit annoyed. Python
gets similarly annoyed if you try to ask it for an item that doesn’t
exist:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>letters <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>]</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Letter #1 is'</span>, letters[<span class="dv">0</span>])</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Letter #2 is'</span>, letters[<span class="dv">1</span>])</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Letter #3 is'</span>, letters[<span class="dv">2</span>])</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Letter #4 is'</span>, letters[<span class="dv">3</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Letter</span> <span class="co">#1 is a</span></span>
<span><span class="va">Letter</span> <span class="co">#2 is b</span></span>
<span><span class="va">Letter</span> <span class="co">#3 is c</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input-11-d817f55b7d6c&gt; in &lt;module&gt;()
      3 print('Letter #2 is', letters[1])
      4 print('Letter #3 is', letters[2])
----&gt; 5 print('Letter #4 is', letters[3])

IndexError: list index out of range</code></pre>
</div>
<p>Here, Python is telling us that there is an <code>IndexError</code>
in our code, meaning we tried to access a list index that did not
exist.</p>
</section><section id="file-errors"><h2 class="section-heading">File Errors<a class="anchor" aria-label="anchor" href="#file-errors"></a>
</h2>
<hr class="half-width">
<p>The last type of error we’ll cover today are those associated with
reading and writing files: <code>FileNotFoundError</code>. If you try to
read a file that does not exist, you will receive a
<code>FileNotFoundError</code> telling you so. If you attempt to write
to a file that was opened read-only, Python 3 returns an
<code>UnsupportedOperationError</code>. More generally, problems with
input and output manifest as <code>OSError</code>s, which may show up as
a more specific subclass; you can see <a href="https://docs.python.org/3/library/exceptions.html#os-exceptions" class="external-link">the
list in the Python docs</a>. They all have a unique UNIX
<code>errno</code>, which is you can see in the error message.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>file_handle <span class="op">=</span> <span class="bu">open</span>(<span class="st">'myfile.txt'</span>, <span class="st">'r'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
&lt;ipython-input-14-f6e1ac4aee96&gt; in &lt;module&gt;()
----&gt; 1 file_handle = open('myfile.txt', 'r')

FileNotFoundError: [Errno 2] No such file or directory: 'myfile.txt'</code></pre>
</div>
<p>One reason for receiving this error is that you specified an
incorrect path to the file. For example, if I am currently in a folder
called <code>myproject</code>, and I have a file in
<code>myproject/writing/myfile.txt</code>, but I try to open
<code>myfile.txt</code>, this will fail. The correct path would be
<code>writing/myfile.txt</code>. It is also possible that the file name
or its path contains a typo.</p>
<p>A related issue can occur if you use the “read” flag instead of the
“write” flag. Python will not give you an error if you try to open a
file for writing when the file does not exist. However, if you meant to
open a file for reading, but accidentally opened it for writing, and
then try to read from it, you will get an
<code>UnsupportedOperation</code> error telling you that the file was
not opened for reading:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>file_handle <span class="op">=</span> <span class="bu">open</span>(<span class="st">'myfile.txt'</span>, <span class="st">'w'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>file_handle.read()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
UnsupportedOperation                      Traceback (most recent call last)
&lt;ipython-input-15-b846479bc61f&gt; in &lt;module&gt;()
      1 file_handle = open('myfile.txt', 'w')
----&gt; 2 file_handle.read()

UnsupportedOperation: not readable</code></pre>
</div>
<p>These are the most common errors with files, though many others
exist. If you get an error that you’ve never seen before, searching the
Internet for that error type often reveals common reasons why you might
get that error.</p>
<div id="identifying-syntax-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="identifying-syntax-errors" class="callout-inner">
<h3 class="callout-title">Identifying Syntax Errors<a class="anchor" aria-label="anchor" href="#identifying-syntax-errors"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Read the code below, and (without running it) try to identify what
the errors are.</li>
<li>Run the code, and read the error message. Is it a
<code>SyntaxError</code> or an <code>IndentationError</code>?</li>
<li>Fix the error.</li>
<li>Repeat steps 2 and 3, until you have fixed all the errors.</li>
</ol>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="kw">def</span> another_function</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'Syntax errors are annoying.'</span>)</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>   <span class="bu">print</span>(<span class="st">'But at least Python tells us about them!'</span>)</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'So they are usually not too hard to fix.'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p><code>SyntaxError</code> for missing <code>():</code> at end of first
line, <code>IndentationError</code> for mismatch between second and
third lines. A fixed version is:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">def</span> another_function():</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Syntax errors are annoying.'</span>)</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'But at least Python tells us about them!'</span>)</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'So they are usually not too hard to fix.'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="identifying-variable-name-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="identifying-variable-name-errors" class="callout-inner">
<h3 class="callout-title">Identifying Variable Name Errors<a class="anchor" aria-label="anchor" href="#identifying-variable-name-errors"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Read the code below, and (without running it) try to identify what
the errors are.</li>
<li>Run the code, and read the error message. What type of
<code>NameError</code> do you think this is? In other words, is it a
string with no quotes, a misspelled variable, or a variable that should
have been defined but was not?</li>
<li>Fix the error.</li>
<li>Repeat steps 2 and 3, until you have fixed all the errors.</li>
</ol>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>    <span class="co"># use a if the number is a multiple of 3, otherwise use b</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    <span class="cf">if</span> (Number <span class="op">%</span> <span class="dv">3</span>) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>        message <span class="op">=</span> message <span class="op">+</span> a</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>        message <span class="op">=</span> message <span class="op">+</span> <span class="st">'b'</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="bu">print</span>(message)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>3 <code>NameError</code>s for <code>number</code> being misspelled,
for <code>message</code> not defined, and for <code>a</code> not being
in quotes.</p>
<p>Fixed version:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>message <span class="op">=</span> <span class="st">''</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    <span class="co"># use a if the number is a multiple of 3, otherwise use b</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    <span class="cf">if</span> (number <span class="op">%</span> <span class="dv">3</span>) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>        message <span class="op">=</span> message <span class="op">+</span> <span class="st">'a'</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>        message <span class="op">=</span> message <span class="op">+</span> <span class="st">'b'</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="bu">print</span>(message)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="identifying-index-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="identifying-index-errors" class="callout-inner">
<h3 class="callout-title">Identifying Index Errors<a class="anchor" aria-label="anchor" href="#identifying-index-errors"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Read the code below, and (without running it) try to identify what
the errors are.</li>
<li>Run the code, and read the error message. What type of error is
it?</li>
<li>Fix the error.</li>
</ol>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>seasons <span class="op">=</span> [<span class="st">'Spring'</span>, <span class="st">'Summer'</span>, <span class="st">'Fall'</span>, <span class="st">'Winter'</span>]</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'My favorite season is '</span>, seasons[<span class="dv">4</span>])</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p><code>IndexError</code>; the last entry is <code>seasons[3]</code>,
so <code>seasons[4]</code> doesn’t make sense. A fixed version is:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>seasons <span class="op">=</span> [<span class="st">'Spring'</span>, <span class="st">'Summer'</span>, <span class="st">'Fall'</span>, <span class="st">'Winter'</span>]</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'My favorite season is '</span>, seasons[<span class="op">-</span><span class="dv">1</span>])</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Tracebacks can look intimidating, but they give us a lot of useful
information about what went wrong in our program, including where the
error occurred and what type of error it was.</li>
<li>An error having to do with the ‘grammar’ or syntax of the program is
called a <code>SyntaxError</code>. If the issue has to do with how the
code is indented, then it will be called an
<code>IndentationError</code>.</li>
<li>A <code>NameError</code> will occur when trying to use a variable
that does not exist. Possible causes are that a variable definition is
missing, a variable reference differs from its definition in spelling or
capitalization, or the code contains a string that is missing quotes
around it.</li>
<li>Containers like lists and strings will generate errors if you try to
access items in them that do not exist. This type of error is called an
<code>IndexError</code>.</li>
<li>Trying to read a file that does not exist will give you an
<code>FileNotFoundError</code>. Trying to read a file that is open for
writing, or writing to a file that is open for reading, will give you an
<code>IOError</code>.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-10-defensive"><p>Content from <a href="10-defensive.html">Defensive Programming</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/10-defensive.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make my programs more reliable?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what an assertion is.</li>
<li>Add assertions that check the program’s state is correct.</li>
<li>Correctly add precondition and postcondition assertions to
functions.</li>
<li>Explain what test-driven development is, and use it when creating
new functions.</li>
<li>Explain why variables should be initialized using actual data values
rather than arbitrary constants.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Our previous lessons have introduced the basic tools of programming:
variables and lists, file I/O, loops, conditionals, and functions. What
they <em>haven’t</em> done is show us how to tell whether a program is
getting the right answer, and how to tell if it’s <em>still</em> getting
the right answer as we make changes to it.</p>
<p>To achieve that, we need to:</p>
<ul>
<li>Write programs that check their own operation.</li>
<li>Write and run tests for widely-used functions.</li>
<li>Make sure we know what “correct” actually means.</li>
</ul>
<p>The good news is, doing these things will speed up our programming,
not slow it down. As in real carpentry — the kind done with lumber — the
time saved by measuring carefully before cutting a piece of wood is much
greater than the time that measuring takes.</p>
<section id="assertions"><h2 class="section-heading">Assertions<a class="anchor" aria-label="anchor" href="#assertions"></a>
</h2>
<hr class="half-width">
<p>The first step toward getting the right answers from our programs is
to assume that mistakes <em>will</em> happen and to guard against them.
This is called <a href="reference.html#defensive-programming">defensive
programming</a>, and the most common way to do it is to add <a href="reference.html#assertion">assertions</a> to our code so that it
checks itself as it runs. An assertion is simply a statement that
something must be true at a certain point in a program. When Python sees
one, it evaluates the assertion’s condition. If it’s true, Python does
nothing, but if it’s false, Python halts the program immediately and
prints the error message if one is provided. For example, this piece of
code halts as soon as the loop encounters a value that isn’t
positive:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="fl">1.5</span>, <span class="fl">2.3</span>, <span class="fl">0.7</span>, <span class="op">-</span><span class="fl">0.001</span>, <span class="fl">4.4</span>]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>total <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> numbers:</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="cf">assert</span> num <span class="op">&gt;</span> <span class="fl">0.0</span>, <span class="st">'Data should only contain positive values'</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    total <span class="op">+=</span> num</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'total is:'</span>, total)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-19-33d87ea29ae4&gt; in &lt;module&gt;()
      2 total = 0.0
      3 for num in numbers:
----&gt; 4     assert num &gt; 0.0, 'Data should only contain positive values'
      5     total += num
      6 print('total is:', total)

AssertionError: Data should only contain positive values</code></pre>
</div>
<p>Programs like the Firefox browser are full of assertions: 10-20% of
the code they contain are there to check that the other 80–90% are
working correctly. Broadly speaking, assertions fall into three
categories:</p>
<ul>
<li><p>A <a href="reference.html#precondition">precondition</a> is
something that must be true at the start of a function in order for it
to work correctly.</p></li>
<li><p>A <a href="reference.html#postcondition">postcondition</a> is
something that the function guarantees is true when it
finishes.</p></li>
<li><p>An <a href="reference.html#invariant">invariant</a> is something
that is always true at a particular point inside a piece of
code.</p></li>
</ul>
<p>For example, suppose we are representing rectangles using a <a href="reference.html#tuple">tuple</a> of four coordinates
<code>(x0, y0, x1, y1)</code>, representing the lower left and upper
right corners of the rectangle. In order to do some calculations, we
need to normalize the rectangle so that the lower left corner is at the
origin and the longest side is 1.0 units long. This function does that,
but checks that its input is correctly formatted and that its result
makes sense:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">def</span> normalize_rectangle(rect):</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    <span class="co">"""Normalizes a rectangle so that it is at the origin and 1.0 units long on its longest axis.</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">    Input should be of the format (x0, y0, x1, y1).</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">    (x0, y0) and (x1, y1) define the lower left and upper right corners</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">    of the rectangle, respectively."""</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(rect) <span class="op">==</span> <span class="dv">4</span>, <span class="st">'Rectangles must contain 4 coordinates'</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    x0, y0, x1, y1 <span class="op">=</span> rect</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    <span class="cf">assert</span> x0 <span class="op">&lt;</span> x1, <span class="st">'Invalid X coordinates'</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="cf">assert</span> y0 <span class="op">&lt;</span> y1, <span class="st">'Invalid Y coordinates'</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    dx <span class="op">=</span> x1 <span class="op">-</span> x0</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    dy <span class="op">=</span> y1 <span class="op">-</span> y0</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="cf">if</span> dx <span class="op">&gt;</span> dy:</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>        scaled <span class="op">=</span> dx <span class="op">/</span> dy</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>        upper_x, upper_y <span class="op">=</span> <span class="fl">1.0</span>, scaled</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>        scaled <span class="op">=</span> dx <span class="op">/</span> dy</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>        upper_x, upper_y <span class="op">=</span> scaled, <span class="fl">1.0</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    <span class="cf">assert</span> <span class="dv">0</span> <span class="op">&lt;</span> upper_x <span class="op">&lt;=</span> <span class="fl">1.0</span>, <span class="st">'Calculated upper X coordinate invalid'</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>    <span class="cf">assert</span> <span class="dv">0</span> <span class="op">&lt;</span> upper_y <span class="op">&lt;=</span> <span class="fl">1.0</span>, <span class="st">'Calculated upper Y coordinate invalid'</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">0</span>, <span class="dv">0</span>, upper_x, upper_y)</span></code></pre>
</div>
<p>The preconditions on lines 6, 8, and 9 catch invalid inputs:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="bu">print</span>(normalize_rectangle( (<span class="fl">0.0</span>, <span class="fl">1.0</span>, <span class="fl">2.0</span>) )) <span class="co"># missing the fourth coordinate</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-2-1b9cd8e18a1f&gt; in &lt;module&gt;
----&gt; 1 print(normalize_rectangle( (0.0, 1.0, 2.0) )) # missing the fourth coordinate

&lt;ipython-input-1-c94cf5b065b9&gt; in normalize_rectangle(rect)
      4     (x0, y0) and (x1, y1) define the lower left and upper right corners
      5     of the rectangle, respectively."""
----&gt; 6     assert len(rect) == 4, 'Rectangles must contain 4 coordinates'
      7     x0, y0, x1, y1 = rect
      8     assert x0 &lt; x1, 'Invalid X coordinates'

AssertionError: Rectangles must contain 4 coordinates</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="bu">print</span>(normalize_rectangle( (<span class="fl">4.0</span>, <span class="fl">2.0</span>, <span class="fl">1.0</span>, <span class="fl">5.0</span>) )) <span class="co"># X axis inverted</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-3-325036405532&gt; in &lt;module&gt;
----&gt; 1 print(normalize_rectangle( (4.0, 2.0, 1.0, 5.0) )) # X axis inverted

&lt;ipython-input-1-c94cf5b065b9&gt; in normalize_rectangle(rect)
      6     assert len(rect) == 4, 'Rectangles must contain 4 coordinates'
      7     x0, y0, x1, y1 = rect
----&gt; 8     assert x0 &lt; x1, 'Invalid X coordinates'
      9     assert y0 &lt; y1, 'Invalid Y coordinates'
     10

AssertionError: Invalid X coordinates</code></pre>
</div>
<p>The post-conditions on lines 20 and 21 help us catch bugs by telling
us when our calculations might have been incorrect. For example, if we
normalize a rectangle that is taller than it is wide everything seems
OK:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="bu">print</span>(normalize_rectangle( (<span class="fl">0.0</span>, <span class="fl">0.0</span>, <span class="fl">1.0</span>, <span class="fl">5.0</span>) ))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(0, 0, 0.2, 1.0)</code></pre>
</div>
<p>but if we normalize one that’s wider than it is tall, the assertion
is triggered:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(normalize_rectangle( (<span class="fl">0.0</span>, <span class="fl">0.0</span>, <span class="fl">5.0</span>, <span class="fl">1.0</span>) ))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-5-8d4a48f1d068&gt; in &lt;module&gt;
----&gt; 1 print(normalize_rectangle( (0.0, 0.0, 5.0, 1.0) ))

&lt;ipython-input-1-c94cf5b065b9&gt; in normalize_rectangle(rect)
     19
     20     assert 0 &lt; upper_x &lt;= 1.0, 'Calculated upper X coordinate invalid'
---&gt; 21     assert 0 &lt; upper_y &lt;= 1.0, 'Calculated upper Y coordinate invalid'
     22
     23     return (0, 0, upper_x, upper_y)

AssertionError: Calculated upper Y coordinate invalid</code></pre>
</div>
<p>Re-reading our function, we realize that line 14 should divide
<code>dy</code> by <code>dx</code> rather than <code>dx</code> by
<code>dy</code>. In a Jupyter notebook, you can display line numbers by
typing <kbd>Ctrl</kbd>+<kbd>M</kbd> followed by <kbd>L</kbd>. If we had
left out the assertion at the end of the function, we would have created
and returned something that had the right shape as a valid answer, but
wasn’t. Detecting and debugging that would almost certainly have taken
more time in the long run than writing the assertion.</p>
<p>But assertions aren’t just about catching errors: they also help
people understand programs. Each assertion gives the person reading the
program a chance to check (consciously or otherwise) that their
understanding matches what the code is doing.</p>
<p>Most good programmers follow two rules when adding assertions to
their code. The first is, <em>fail early, fail often</em>. The greater
the distance between when and where an error occurs and when it’s
noticed, the harder the error will be to debug, so good code catches
mistakes as early as possible.</p>
<p>The second rule is, <em>turn bugs into assertions or tests</em>.
Whenever you fix a bug, write an assertion that catches the mistake
should you make it again. If you made a mistake in a piece of code, the
odds are good that you have made other mistakes nearby, or will make the
same mistake (or a related one) the next time you change it. Writing
assertions to check that you haven’t <a href="reference.html#regression">regressed</a> (i.e., haven’t
re-introduced an old problem) can save a lot of time in the long run,
and helps to warn people who are reading the code (including your future
self) that this bit is tricky.</p>
</section><section id="test-driven-development"><h2 class="section-heading">Test-Driven Development<a class="anchor" aria-label="anchor" href="#test-driven-development"></a>
</h2>
<hr class="half-width">
<p>An assertion checks that something is true at a particular point in
the program. The next step is to check the overall behavior of a piece
of code, i.e., to make sure that it produces the right output when it’s
given a particular input. For example, suppose we need to find where two
or more time series overlap. The range of each time series is
represented as a pair of numbers, which are the time the interval
started and ended. The output is the largest range that they all
include:</p>
<figure><img src="fig/python-overlapping-ranges.svg" alt="Graph showing three number lines and, at the bottom,the interval that they overlap." class="figure mx-auto d-block"></figure><p>Most novice programmers would solve this problem like this:</p>
<ol style="list-style-type: decimal">
<li>Write a function <code>range_overlap</code>.</li>
<li>Call it interactively on two or three different inputs.</li>
<li>If it produces the wrong answer, fix the function and re-run that
test.</li>
</ol>
<p>This clearly works — after all, thousands of scientists are doing it
right now — but there’s a better way:</p>
<ol style="list-style-type: decimal">
<li>Write a short function for each test.</li>
<li>Write a <code>range_overlap</code> function that should pass those
tests.</li>
<li>If <code>range_overlap</code> produces any wrong answers, fix it and
re-run the test functions.</li>
</ol>
<p>Writing the tests <em>before</em> writing the function they exercise
is called <a href="reference.html#test-driven-development">test-driven
development</a> (TDD). Its advocates believe it produces better code
faster because:</p>
<ol style="list-style-type: decimal">
<li>If people write tests after writing the thing to be tested, they are
subject to confirmation bias, i.e., they subconsciously write tests to
show that their code is correct, rather than to find errors.</li>
<li>Writing tests helps programmers figure out what the function is
actually supposed to do.</li>
</ol>
<p>We start by defining an empty function
<code>range_overlap</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">def</span> range_overlap(ranges):</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre>
</div>
<p>Here are three test statements for <code>range_overlap</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>) ]) <span class="op">==</span> (<span class="fl">0.0</span>, <span class="fl">1.0</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">2.0</span>, <span class="fl">3.0</span>), (<span class="fl">2.0</span>, <span class="fl">4.0</span>) ]) <span class="op">==</span> (<span class="fl">2.0</span>, <span class="fl">3.0</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">0.0</span>, <span class="fl">2.0</span>), (<span class="op">-</span><span class="fl">1.0</span>, <span class="fl">1.0</span>) ]) <span class="op">==</span> (<span class="fl">0.0</span>, <span class="fl">1.0</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-25-d8be150fbef6&gt; in &lt;module&gt;()
----&gt; 1 assert range_overlap([ (0.0, 1.0) ]) == (0.0, 1.0)
      2 assert range_overlap([ (2.0, 3.0), (2.0, 4.0) ]) == (2.0, 3.0)
      3 assert range_overlap([ (0.0, 1.0), (0.0, 2.0), (-1.0, 1.0) ]) == (0.0, 1.0)

AssertionError:</code></pre>
</div>
<p>The error is actually reassuring: we haven’t implemented any logic
into <code>range_overlap</code> yet, so if the tests passed, it would
indicate that we’ve written an entirely ineffective test.</p>
<p>And as a bonus of writing these tests, we’ve implicitly defined what
our input and output look like: we expect a list of pairs as input, and
produce a single pair as output.</p>
<p>Something important is missing, though. We don’t have any tests for
the case where the ranges don’t overlap at all:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">5.0</span>, <span class="fl">6.0</span>) ]) <span class="op">==</span> ???</span></code></pre>
</div>
<p>What should <code>range_overlap</code> do in this case: fail with an
error message, produce a special value like <code>(0.0, 0.0)</code> to
signal that there’s no overlap, or something else? Any actual
implementation of the function will do one of these things; writing the
tests first helps us figure out which is best <em>before</em> we’re
emotionally invested in whatever we happened to write before we realized
there was an issue.</p>
<p>And what about this case?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">1.0</span>, <span class="fl">2.0</span>) ]) <span class="op">==</span> ???</span></code></pre>
</div>
<p>Do two segments that touch at their endpoints overlap or not?
Mathematicians usually say “yes”, but engineers usually say “no”. The
best answer is “whatever is most useful in the rest of our program”, but
again, any actual implementation of <code>range_overlap</code> is going
to do <em>something</em>, and whatever it is ought to be consistent with
what it does when there’s no overlap at all.</p>
<p>Since we’re planning to use the range this function returns as the X
axis in a time series chart, we decide that:</p>
<ol style="list-style-type: decimal">
<li>every overlap has to have non-zero width, and</li>
<li>we will return the special value <code>None</code> when there’s no
overlap.</li>
</ol>
<p><code>None</code> is built into Python, and means “nothing here”.
(Other languages often call the equivalent value <code>null</code> or
<code>nil</code>). With that decision made, we can finish writing our
last two tests:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">5.0</span>, <span class="fl">6.0</span>) ]) <span class="op">==</span> <span class="va">None</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">1.0</span>, <span class="fl">2.0</span>) ]) <span class="op">==</span> <span class="va">None</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-26-d877ef460ba2&gt; in &lt;module&gt;()
----&gt; 1 assert range_overlap([ (0.0, 1.0), (5.0, 6.0) ]) == None
      2 assert range_overlap([ (0.0, 1.0), (1.0, 2.0) ]) == None

AssertionError:</code></pre>
</div>
<p>Again, we get an error because we haven’t written our function, but
we’re now ready to do so:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">def</span> range_overlap(ranges):</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="co">"""Return common overlap among a set of [left, right] ranges."""</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    max_left <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    min_right <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="cf">for</span> (left, right) <span class="kw">in</span> ranges:</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>        max_left <span class="op">=</span> <span class="bu">max</span>(max_left, left)</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>        min_right <span class="op">=</span> <span class="bu">min</span>(min_right, right)</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>    <span class="cf">return</span> (max_left, min_right)</span></code></pre>
</div>
<p>Take a moment to think about why we calculate the left endpoint of
the overlap as the maximum of the input left endpoints, and the overlap
right endpoint as the minimum of the input right endpoints. We’d now
like to re-run our tests, but they’re scattered across three different
cells. To make running them easier, let’s put them all in a
function:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">def</span> test_range_overlap():</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">5.0</span>, <span class="fl">6.0</span>) ]) <span class="op">==</span> <span class="va">None</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">1.0</span>, <span class="fl">2.0</span>) ]) <span class="op">==</span> <span class="va">None</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>) ]) <span class="op">==</span> (<span class="fl">0.0</span>, <span class="fl">1.0</span>)</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="cf">assert</span> range_overlap([ (<span class="fl">2.0</span>, <span class="fl">3.0</span>), (<span class="fl">2.0</span>, <span class="fl">4.0</span>) ]) <span class="op">==</span> (<span class="fl">2.0</span>, <span class="fl">3.0</span>)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="cf">assert</span> range_overlap([ (<span class="fl">0.0</span>, <span class="fl">1.0</span>), (<span class="fl">0.0</span>, <span class="fl">2.0</span>), (<span class="op">-</span><span class="fl">1.0</span>, <span class="fl">1.0</span>) ]) <span class="op">==</span> (<span class="fl">0.0</span>, <span class="fl">1.0</span>)</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    <span class="cf">assert</span> range_overlap([]) <span class="op">==</span> <span class="va">None</span></span></code></pre>
</div>
<p>We can now test <code>range_overlap</code> with a single function
call:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>test_range_overlap()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-29-cf9215c96457&gt; in &lt;module&gt;()
----&gt; 1 test_range_overlap()

&lt;ipython-input-28-5d4cd6fd41d9&gt; in test_range_overlap()
      1 def test_range_overlap():
----&gt; 2     assert range_overlap([ (0.0, 1.0), (5.0, 6.0) ]) == None
      3     assert range_overlap([ (0.0, 1.0), (1.0, 2.0) ]) == None
      4     assert range_overlap([ (0.0, 1.0) ]) == (0.0, 1.0)
      5     assert range_overlap([ (2.0, 3.0), (2.0, 4.0) ]) == (2.0, 3.0)

AssertionError:</code></pre>
</div>
<p>The first test that was supposed to produce <code>None</code> fails,
so we know something is wrong with our function. We <em>don’t</em> know
whether the other tests passed or failed because Python halted the
program as soon as it spotted the first error. Still, some information
is better than none, and if we trace the behavior of the function with
that input, we realize that we’re initializing <code>max_left</code> and
<code>min_right</code> to 0.0 and 1.0 respectively, regardless of the
input values. This violates another important rule of programming:
<em>always initialize from data</em>.</p>
<div id="pre--and-post-conditions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="pre--and-post-conditions" class="callout-inner">
<h3 class="callout-title">Pre- and Post-Conditions<a class="anchor" aria-label="anchor" href="#pre--and-post-conditions"></a>
</h3>
<div class="callout-content">
<p>Suppose you are writing a function called <code>average</code> that
calculates the average of the numbers in a list. What pre-conditions and
post-conditions would you write for it? Compare your answer to your
neighbor’s: can you think of a function that will pass your tests but
not his/hers or vice versa?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># a possible pre-condition:</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">len</span>(input_list) <span class="op">&gt;</span> <span class="dv">0</span>, <span class="st">'List length must be non-zero'</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co"># a possible post-condition:</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="cf">assert</span> numpy.amin(input_list) <span class="op">&lt;=</span> average <span class="op">&lt;=</span> numpy.amax(input_list),</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">'Average should be between min and max of input values (inclusive)'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="testing-assertions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="testing-assertions" class="callout-inner">
<h3 class="callout-title">Testing Assertions<a class="anchor" aria-label="anchor" href="#testing-assertions"></a>
</h3>
<div class="callout-content">
<p>Given a sequence of a number of cars, the function
<code>get_total_cars</code> returns the total number of cars.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>get_total_cars([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>get_total_cars([<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ValueError: invalid literal for int() with base 10: 'a'</code></pre>
</div>
<p>Explain in words what the assertions in this function check, and for
each one, give an example of input that will make that assertion
fail.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="kw">def</span> get_total(values):</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(values) <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    <span class="cf">for</span> element <span class="kw">in</span> values:</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>        <span class="cf">assert</span> <span class="bu">int</span>(element)</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>    values <span class="op">=</span> [<span class="bu">int</span>(element) <span class="cf">for</span> element <span class="kw">in</span> values]</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>    total <span class="op">=</span> <span class="bu">sum</span>(values)</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a>    <span class="cf">assert</span> total <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>    <span class="cf">return</span> total</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ul>
<li>The first assertion checks that the input sequence
<code>values</code> is not empty. An empty sequence such as
<code>[]</code> will make it fail.</li>
<li>The second assertion checks that each value in the list can be
turned into an integer. Input such as <code>[1, 2, 'c', 3]</code> will
make it fail.</li>
<li>The third assertion checks that the total of the list is greater
than 0. Input such as <code>[-10, 2, 3]</code> will make it fail.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Program defensively, i.e., assume that errors are going to arise,
and write code to detect them when they do.</li>
<li>Put assertions in programs to check their state as they run, and to
help readers understand how those programs are supposed to work.</li>
<li>Use preconditions to check that the inputs to a function are safe to
use.</li>
<li>Use postconditions to check that the output from a function is safe
to use.</li>
<li>Write tests before writing code in order to help determine exactly
what that code is supposed to do.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-11-debugging"><p>Content from <a href="11-debugging.html">Debugging</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/11-debugging.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I debug my program?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Debug code containing an error systematically.</li>
<li>Identify ways of making code less error-prone and more easily
tested.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Once testing has uncovered problems, the next step is to fix them.
Many novices do this by making more-or-less random changes to their code
until it seems to produce the right answer, but that’s very inefficient
(and the result is usually only correct for the one case they’re
testing). The more experienced a programmer is, the more systematically
they debug, and most follow some variation on the rules explained
below.</p>
<section id="know-what-its-supposed-to-do"><h2 class="section-heading">Know What It’s Supposed to Do<a class="anchor" aria-label="anchor" href="#know-what-its-supposed-to-do"></a>
</h2>
<hr class="half-width">
<p>The first step in debugging something is to <em>know what it’s
supposed to do</em>. “My program doesn’t work” isn’t good enough: in
order to diagnose and fix problems, we need to be able to tell correct
output from incorrect. If we can write a test case for the failing case
— i.e., if we can assert that with <em>these</em> inputs, the function
should produce <em>that</em> result — then we’re ready to start
debugging. If we can’t, then we need to figure out how we’re going to
know when we’ve fixed things.</p>
<p>But writing test cases for scientific software is frequently harder
than writing test cases for commercial applications, because if we knew
what the output of the scientific code was supposed to be, we wouldn’t
be running the software: we’d be writing up our results and moving on to
the next program. In practice, scientists tend to do the following:</p>
<ol style="list-style-type: decimal">
<li><p><em>Test with simplified data.</em> Before doing statistics on a
real data set, we should try calculating statistics for a single record,
for two identical records, for two records whose values are one step
apart, or for some other case where we can calculate the right answer by
hand.</p></li>
<li><p><em>Test a simplified case.</em> If our program is supposed to
simulate magnetic eddies in rapidly-rotating blobs of supercooled
helium, our first test should be a blob of helium that isn’t rotating,
and isn’t being subjected to any external electromagnetic fields.
Similarly, if we’re looking at the effects of climate change on
speciation, our first test should hold temperature, precipitation, and
other factors constant.</p></li>
<li><p><em>Compare to an oracle.</em> A <a href="reference.html#test-oracle">test oracle</a> is something whose
results are trusted, such as experimental data, an older program, or a
human expert. We use test oracles to determine if our new program
produces the correct results. If we have a test oracle, we should store
its output for particular cases so that we can compare it with our new
results as often as we like without re-running that program.</p></li>
<li><p><em>Check conservation laws.</em> Mass, energy, and other
quantities are conserved in physical systems, so they should be in
programs as well. Similarly, if we are analyzing patient data, the
number of records should either stay the same or decrease as we move
from one analysis to the next (since we might throw away outliers or
records with missing values). If “new” patients start appearing out of
nowhere as we move through our pipeline, it’s probably a sign that
something is wrong.</p></li>
<li><p><em>Visualize.</em> Data analysts frequently use simple
visualizations to check both the science they’re doing and the
correctness of their code (just as we did in the <a href="02-numpy.html">opening lesson</a> of this tutorial). This should
only be used for debugging as a last resort, though, since it’s very
hard to compare two visualizations automatically.</p></li>
</ol></section><section id="make-it-fail-every-time"><h2 class="section-heading">Make It Fail Every Time<a class="anchor" aria-label="anchor" href="#make-it-fail-every-time"></a>
</h2>
<hr class="half-width">
<p>We can only debug something when it fails, so the second step is
always to find a test case that <em>makes it fail every time</em>. The
“every time” part is important because few things are more frustrating
than debugging an intermittent problem: if we have to call a function a
dozen times to get a single failure, the odds are good that we’ll scroll
past the failure when it actually occurs.</p>
<p>As part of this, it’s always important to check that our code is
“plugged in”, i.e., that we’re actually exercising the problem that we
think we are. Every programmer has spent hours chasing a bug, only to
realize that they were actually calling their code on the wrong data set
or with the wrong configuration parameters, or are using the wrong
version of the software entirely. Mistakes like these are particularly
likely to happen when we’re tired, frustrated, and up against a
deadline, which is one of the reasons late-night (or overnight) coding
sessions are almost never worthwhile.</p>
</section><section id="make-it-fail-fast"><h2 class="section-heading">Make It Fail Fast<a class="anchor" aria-label="anchor" href="#make-it-fail-fast"></a>
</h2>
<hr class="half-width">
<p>If it takes 20 minutes for the bug to surface, we can only do three
experiments an hour. This means that we’ll get less data in more time
and that we’re more likely to be distracted by other things as we wait
for our program to fail, which means the time we <em>are</em> spending
on the problem is less focused. It’s therefore critical to <em>make it
fail fast</em>.</p>
<p>As well as making the program fail fast in time, we want to make it
fail fast in space, i.e., we want to localize the failure to the
smallest possible region of code:</p>
<ol style="list-style-type: decimal">
<li><p>The smaller the gap between cause and effect, the easier the
connection is to find. Many programmers therefore use a divide and
conquer strategy to find bugs, i.e., if the output of a function is
wrong, they check whether things are OK in the middle, then concentrate
on either the first or second half, and so on.</p></li>
<li><p>N things can interact in N! different ways, so every line of code
that <em>isn’t</em> run as part of a test means more than one thing we
don’t need to worry about.</p></li>
</ol></section><section id="change-one-thing-at-a-time-for-a-reason"><h2 class="section-heading">Change One Thing at a Time, For a Reason<a class="anchor" aria-label="anchor" href="#change-one-thing-at-a-time-for-a-reason"></a>
</h2>
<hr class="half-width">
<p>Replacing random chunks of code is unlikely to do much good. (After
all, if you got it wrong the first time, you’ll probably get it wrong
the second and third as well.) Good programmers therefore <em>change one
thing at a time, for a reason</em>. They are either trying to gather
more information (“is the bug still there if we change the order of the
loops?”) or test a fix (“can we make the bug go away by sorting our data
before processing it?”).</p>
<p>Every time we make a change, however small, we should re-run our
tests immediately, because the more things we change at once, the harder
it is to know what’s responsible for what (those N! interactions again).
And we should re-run <em>all</em> of our tests: more than half of fixes
made to code introduce (or re-introduce) bugs, so re-running all of our
tests tells us whether we have regressed.</p>
</section><section id="keep-track-of-what-youve-done"><h2 class="section-heading">Keep Track of What You’ve Done<a class="anchor" aria-label="anchor" href="#keep-track-of-what-youve-done"></a>
</h2>
<hr class="half-width">
<p>Good scientists keep track of what they’ve done so that they can
reproduce their work, and so that they don’t waste time repeating the
same experiments or running ones whose results won’t be interesting.
Similarly, debugging works best when we <em>keep track of what we’ve
done</em> and how well it worked. If we find ourselves asking, “Did left
followed by right with an odd number of lines cause the crash? Or was it
right followed by left? Or was I using an even number of lines?” then
it’s time to step away from the computer, take a deep breath, and start
working more systematically.</p>
<p>Records are particularly useful when the time comes to ask for help.
People are more likely to listen to us when we can explain clearly what
we did, and we’re better able to give them the information they need to
be useful.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="version-control-revisited">Version Control Revisited<a class="anchor" aria-label="anchor" href="#version-control-revisited"></a>
</h3>
<div class="callout-content">
<p>Version control is often used to reset software to a known state
during debugging, and to explore recent changes to code that might be
responsible for bugs. In particular, most version control systems
(e.g. git, Mercurial) have:</p>
<ol style="list-style-type: decimal">
<li>a <code>blame</code> command that shows who last changed each line
of a file;</li>
<li>a <code>bisect</code> command that helps with finding the commit
that introduced an issue.</li>
</ol>
</div>
</div>
</div>
</section><section id="be-humble"><h2 class="section-heading">Be Humble<a class="anchor" aria-label="anchor" href="#be-humble"></a>
</h2>
<hr class="half-width">
<p>And speaking of help: if we can’t find a bug in 10 minutes, we should
<em>be humble</em> and ask for help. Explaining the problem to someone
else is often useful, since hearing what we’re thinking helps us spot
inconsistencies and hidden assumptions. If you don’t have someone nearby
to share your problem description with, get a <a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging" class="external-link">rubber
duck</a>!</p>
<p>Asking for help also helps alleviate confirmation bias. If we have
just spent an hour writing a complicated program, we want it to work, so
we’re likely to keep telling ourselves why it should, rather than
searching for the reason it doesn’t. People who aren’t emotionally
invested in the code can be more objective, which is why they’re often
able to spot the simple mistakes we have overlooked.</p>
<p>Part of being humble is learning from our mistakes. Programmers tend
to get the same things wrong over and over: either they don’t understand
the language and libraries they’re working with, or their model of how
things work is wrong. In either case, taking note of why the error
occurred and checking for it next time quickly turns into not making the
mistake at all.</p>
<p>And that is what makes us most productive in the long run. As the
saying goes, <em>A week of hard work can sometimes save you an hour of
thought</em>. If we train ourselves to avoid making some kinds of
mistakes, to break our code into modular, testable chunks, and to turn
every assumption (or mistake) into an assertion, it will actually take
us <em>less</em> time to produce working programs, not more.</p>
<div id="debug-with-a-neighbor" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="debug-with-a-neighbor" class="callout-inner">
<h3 class="callout-title">Debug With a Neighbor<a class="anchor" aria-label="anchor" href="#debug-with-a-neighbor"></a>
</h3>
<div class="callout-content">
<p>Take a function that you have written today, and introduce a tricky
bug. Your function should still run, but will give the wrong output.
Switch seats with your neighbor and attempt to debug the bug that they
introduced into their function. Which of the principles discussed above
did you find helpful?</p>
</div>
</div>
</div>
<div id="not-supposed-to-be-the-same" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="not-supposed-to-be-the-same" class="callout-inner">
<h3 class="callout-title">Not Supposed to be the Same<a class="anchor" aria-label="anchor" href="#not-supposed-to-be-the-same"></a>
</h3>
<div class="callout-content">
<p>You are assisting a researcher with Python code that computes the
Body Mass Index (BMI) of patients. The researcher is concerned because
all patients seemingly have unusual and identical BMIs, despite having
different physiques. BMI is calculated as <strong>weight in
kilograms</strong> divided by the square of <strong>height in
metres</strong>.</p>
<p>Use the debugging principles in this exercise and locate problems
with the code. What suggestions would you give the researcher for
ensuring any later changes they make work correctly? What bugs do you
spot?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>patients <span class="op">=</span> [[<span class="dv">70</span>, <span class="fl">1.8</span>], [<span class="dv">80</span>, <span class="fl">1.9</span>], [<span class="dv">150</span>, <span class="fl">1.7</span>]]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">def</span> calculate_bmi(weight, height):</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="cf">return</span> weight <span class="op">/</span> (height <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="cf">for</span> patient <span class="kw">in</span> patients:</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    weight, height <span class="op">=</span> patients[<span class="dv">0</span>]</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    bmi <span class="op">=</span> calculate_bmi(height, weight)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Patient's BMI is:"</span>, bmi)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Patient's BMI is: 0.000367
Patient's BMI is: 0.000367
Patient's BMI is: 0.000367</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="section level3">
<h3 id="suggestions-for-debugging">Suggestions for debugging<a class="anchor" aria-label="anchor" href="#suggestions-for-debugging"></a>
</h3>
<ul>
<li>Add printing statement in the <code>calculate_bmi</code> function,
like <code>print('weight:', weight, 'height:', height)</code>, to make
clear that what the BMI is based on.</li>
<li>Change <code>print("Patient's BMI is: %f" % bmi)</code> to
<code>print("Patient's BMI (weight: %f, height: %f) is: %f" % (weight, height, bmi))</code>,
in order to be able to distinguish bugs in the function from bugs in the
loop.</li>
</ul>
</div>
<div class="section level3">
<h3 id="bugs-found">Bugs found<a class="anchor" aria-label="anchor" href="#bugs-found"></a>
</h3>
<ul>
<li><p>The loop is not being utilised correctly. <code>height</code> and
<code>weight</code> are always set as the first patient’s data during
each iteration of the loop.</p></li>
<li><p>The height/weight variables are reversed in the function call to
<code>calculate_bmi(...)</code>, the correct BMIs are 21.604938,
22.160665 and 51.903114.</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Know what code is supposed to do <em>before</em> trying to debug
it.</li>
<li>Make it fail every time.</li>
<li>Make it fail fast.</li>
<li>Change one thing at a time, and for a reason.</li>
<li>Keep track of what you’ve done.</li>
<li>Be humble.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-12-cmdline"><p>Content from <a href="12-cmdline.html">Command-Line Programs</a></p>
<hr>
<p>Last updated on 2024-02-23 |
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/episodes/12-cmdline.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I write Python programs that will work like Unix
command-line tools?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use the values of command-line arguments in a program.</li>
<li>Handle flags and files separately in a command-line program.</li>
<li>Read data from standard input in a program so that it can be used in
a pipeline.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The Jupyter Notebook and other interactive tools are great for
prototyping code and exploring data, but sooner or later we will want to
use our program in a pipeline or run it in a shell script to process
thousands of data files. In order to do that in an efficient way, we
need to make our programs work like other Unix command-line tools. For
example, we may want a program that reads a dataset and prints the
average GDP per country.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="switching-to-shell-commands">Switching to Shell Commands<a class="anchor" aria-label="anchor" href="#switching-to-shell-commands"></a>
</h3>
<div class="callout-content">
<p>In this lesson we are switching from typing commands in a Python
interpreter to typing commands in a shell terminal window (such as
bash). When you see a <code>$</code> in front of a command that tells
you to run that command in the shell rather than the Python
interpreter.</p>
</div>
</div>
</div>
<p>This program does exactly what we want - it prints the average GDP
per country for a given file.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_04.py <span class="at">--mean</span> gapminder_gdp_europe.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">5937.029526</span></span>
<span><span class="fl">36126.4927</span></span>
<span><span class="fl">33692.60508</span></span>
<span><span class="va">...</span></span>
<span><span class="fl">37506.41907</span></span>
<span><span class="fl">8458.276384</span></span>
<span><span class="fl">33203.26128</span></span></code></pre>
</div>
<p>We might also want to look at the minimum of the first four lines</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-4</span> gapminder_gdp_europe.csv <span class="kw">|</span> <span class="ex">python</span> ../code/readings_06.py <span class="at">--min</span></span></code></pre>
</div>
<p>or the maximum GDP in several files one after another:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_04.py <span class="at">--max</span> gapminder_gdp_<span class="pp">*</span>.csv</span></code></pre>
</div>
<p>Our scripts should do the following:</p>
<ol style="list-style-type: decimal">
<li>If no filename is given on the command line, read data from <a href="reference.html#standard-input">standard input</a>.</li>
<li>If one or more filenames are given, read data from them and report
statistics for each file separately.</li>
<li>Use the <code>--min</code>, <code>--mean</code>, or
<code>--max</code> flag to determine what statistic to print.</li>
</ol>
<p>To make this work, we need to know how to handle command-line
arguments in a program, and understand how to handle standard input.
We’ll tackle these questions in turn below.</p>
<section id="command-line-arguments"><h2 class="section-heading">Command-Line Arguments<a class="anchor" aria-label="anchor" href="#command-line-arguments"></a>
</h2>
<hr class="half-width">
<p>We are going to create a file with our python code in, then use the
bash shell to run the code. Using the text editor of your choice, save
the following in a text file called <code>sys_version.py</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'version is'</span>, sys.version)</span></code></pre>
</div>
<p>The first line imports a library called <code>sys</code>, which is
short for “system”. It defines values such as <code>sys.version</code>,
which describes which version of Python we are running. We can run this
script from the command line like this:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> python sys_version.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>version is 3.11.3 (main, Apr  5 2023, 15:52:25) [GCC 12.2.1 20230201]</code></pre>
</div>
<p>Create another file called <code>argv_list.py</code> and save the
following text to it.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'sys.argv is'</span>, sys.argv)</span></code></pre>
</div>
<p>The strange name <code>argv</code> stands for “argument values”.
Whenever Python runs a program, it takes all of the values given on the
command line and puts them in the list <code>sys.argv</code> so that the
program can determine what they were. If we run this program with no
arguments:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> python argv_list.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sys.argv is ['argv_list.py']</code></pre>
</div>
<p>the only thing in the list is the full path to our script, which is
always <code>sys.argv[0]</code>. If we run it with a few arguments,
however:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> python argv_list.py first second third</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sys.argv is ['argv_list.py', 'first', 'second', 'third']</code></pre>
</div>
<p>then Python adds each of those arguments to that magic list.</p>
<p>With this in hand, let’s build a version of <code>readings.py</code>
that always prints the per-country mean of a single data file. The first
step is to write a function that outlines our implementation, and a
placeholder for the function that does the actual work. By convention
this function is usually called <code>main</code>, though we can call it
whatever we want:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/readings_01.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    filename <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    <span class="cf">for</span> row_mean <span class="kw">in</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>):</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>        <span class="bu">print</span>(row_mean)</span></code></pre>
</div>
<p>This function gets the name of the script from
<code>sys.argv[0]</code>, because that’s where it’s always put, and the
name of the file to process from <code>sys.argv[1]</code>. Here’s a
simple test:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_01.py gapminder_gdp_oceania.csv</span></code></pre>
</div>
<p>There is no output because we have defined a function, but haven’t
actually called it. Let’s add a call to <code>main</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/readings_02.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    filename <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    <span class="cf">for</span> row_mean <span class="kw">in</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>):</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>        <span class="bu">print</span>(row_mean)</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>   main()</span></code></pre>
</div>
<p>and run that:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_02.py gapminder_gdp_oceania.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">9980.595634166664</span></span>
<span><span class="fl">17262.6228125</span></span></code></pre>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="running-versus-importing">Running Versus Importing<a class="anchor" aria-label="anchor" href="#running-versus-importing"></a>
</h3>
<div class="callout-content">
<p>Running a Python script in bash is very similar to importing that
file in Python. The biggest difference is that we don’t expect anything
to happen when we import a file, whereas when running a script, we
expect to see some output printed to the console.</p>
<p>In order for a Python script to work as expected when imported or
when run as a script, we typically put the part of the script that
produces output in the following if statement:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    main()  <span class="co"># Or whatever function produces output</span></span></code></pre>
</div>
<p>When you import a Python file, <code>__name__</code> is the name of
that file (e.g., when importing <code>readings.py</code>,
<code>__name__</code> is <code>'readings'</code>). However, when running
a script in bash, <code>__name__</code> is always set to
<code>'__main__'</code> in that script so that you can determine if the
file is being imported or run as a script.</p>
</div>
</div>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="the-right-way-to-do-it">The Right Way to Do It<a class="anchor" aria-label="anchor" href="#the-right-way-to-do-it"></a>
</h3>
<div class="callout-content">
<p>If our programs can take complex parameters or multiple filenames, we
shouldn’t handle <code>sys.argv</code> directly. Instead, we should use
Python’s <code>argparse</code> library, which handles common cases in a
systematic way, and also makes it easy for us to provide sensible error
messages for our users. We will not cover this module in this lesson but
you can go to Tshepang Lekhonkhobe’s <a href="https://docs.python.org/3/howto/argparse.html" class="external-link">Argparse
tutorial</a> that is part of Python’s Official Documentation.</p>
</div>
</div>
</div>
</section><section id="handling-multiple-files"><h2 class="section-heading">Handling Multiple Files<a class="anchor" aria-label="anchor" href="#handling-multiple-files"></a>
</h2>
<hr class="half-width">
<p>The next step is to teach our program how to handle multiple files.
Since 60 lines of output per file is a lot to page through, we’ll start
by using three smaller files:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> ls small_<span class="pp">*</span>.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>small_gdp_discworld.csv  small_gdp_middle-earth.csv</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> cat small_gdp_middle-earth.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country,800,1000,1200,1400,1600,1800
Rivendell, 100, 100, 200, 200, 300, 300
Mordor, 20, 40, 60, 80, 100, 300
Hobbiton,10, 10, 10, 10, 10, 10
Moria, 150, 250, 100, 50, 50, 0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_02.py small_gdp_middle-earth.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">200.0</span></span>
<span><span class="fl">100.0</span></span>
<span><span class="fl">10.0</span></span>
<span><span class="fl">100.0</span></span></code></pre>
</div>
<p>Using small data files as input also allows us to check our results
more easily: here, for example, we can see that our program is
calculating the mean correctly for each line, whereas we were really
taking it on faith before. This is yet another rule of programming:
<em>test the simple things first</em>.</p>
<p>We want our program to process each file separately, so we need a
loop that executes once for each filename. If we specify the files on
the command line, the filenames will be in <code>sys.argv</code>, but we
need to be careful: <code>sys.argv[0]</code> will always be the name of
our script, rather than the name of a file. We also need to handle an
unknown number of filenames, since our program could be run for any
number of files.</p>
<p>The solution to both problems is to loop over the contents of
<code>sys.argv[1:]</code>. The ‘1’ tells Python to start the slice at
location 1, so the program’s name isn’t included; since we’ve left off
the upper bound, the slice runs to the end of the list, and includes all
the filenames. Here’s our changed program
<code>readings_03.py</code>:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/readings_03.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> sys.argv[<span class="dv">1</span>:]:</span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>        data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>        <span class="cf">for</span> row_mean <span class="kw">in</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>):</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a>            <span class="bu">print</span>(row_mean)</span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a>    main()</span></code></pre>
</div>
<p>and here it is in action:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_03.py small_gdp_discworld.csv  small_gdp_middle-earth.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0.0</span></span>
<span><span class="fl">35.0</span></span>
<span><span class="fl">15.0</span></span>
<span><span class="fl">200.0</span></span>
<span><span class="fl">100.0</span></span>
<span><span class="fl">10.0</span></span>
<span><span class="fl">100.0</span></span></code></pre>
</div>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="section level3 callout-title callout-inner">
<h3 class="callout-title" id="the-right-way-to-do-it-1">The Right Way to Do It<a class="anchor" aria-label="anchor" href="#the-right-way-to-do-it-1"></a>
</h3>
<div class="callout-content">
<p>At this point, we have created three versions of our script called
<code>readings_01.py</code>, <code>readings_02.py</code>, and
<code>readings_03.py</code>. We wouldn’t do this in real life: instead,
we would have one file called <code>readings.py</code> that we committed
to version control every time we got an enhancement working. For
teaching, though, we need all the successive versions side by side.</p>
</div>
</div>
</div>
</section><section id="handling-command-line-flags"><h2 class="section-heading">Handling Command-Line Flags<a class="anchor" aria-label="anchor" href="#handling-command-line-flags"></a>
</h2>
<hr class="half-width">
<p>The next step is to teach our program to pay attention to the
<code>--min</code>, <code>--mean</code>, and <code>--max</code> flags.
These always appear before the names of the files, so we could do
this:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/readings_04.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>    action <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">2</span>:]</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>        data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a>        <span class="cf">if</span> action <span class="op">==</span> <span class="st">'--min'</span>:</span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a>            values <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a>        <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--mean'</span>:</span>
<span id="cb32-16"><a href="#cb32-16" tabindex="-1"></a>            values <span class="op">=</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb32-17"><a href="#cb32-17" tabindex="-1"></a>        <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--max'</span>:</span>
<span id="cb32-18"><a href="#cb32-18" tabindex="-1"></a>            values <span class="op">=</span> data.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb32-19"><a href="#cb32-19" tabindex="-1"></a></span>
<span id="cb32-20"><a href="#cb32-20" tabindex="-1"></a>        <span class="cf">for</span> val <span class="kw">in</span> values:</span>
<span id="cb32-21"><a href="#cb32-21" tabindex="-1"></a>            <span class="bu">print</span>(val)</span>
<span id="cb32-22"><a href="#cb32-22" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb32-25"><a href="#cb32-25" tabindex="-1"></a>    main()</span></code></pre>
</div>
<p>This works:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_04.py <span class="at">--max</span> small_gdp_discworld.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">60</span></span>
<span><span class="fl">20</span></span></code></pre>
</div>
<p>but there are several things wrong with it:</p>
<ol style="list-style-type: decimal">
<li><p><code>main</code> is too large to read comfortably.</p></li>
<li><p>If we do not specify at least two additional arguments on the
command-line, one for the <strong>flag</strong> and one for the
<strong>filename</strong>, but only one, the program will not throw an
exception but will run. It assumes that the file list is empty, as
<code>sys.argv[1]</code> will be considered the <code>action</code>,
even if it is a filename. <a href="reference.html#silence-failure">Silent failures</a> like this are
always hard to debug.</p></li>
<li><p>The program should check if the submitted <code>action</code> is
one of the three recognized flags.</p></li>
</ol>
<p>This version pulls the processing of each file out of the loop into a
function of its own. It also checks that <code>action</code> is one of
the allowed flags before doing any processing, so that the program fails
fast:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/readings_05.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>    action <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">2</span>:]</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a>    <span class="cf">assert</span> action <span class="kw">in</span> [<span class="st">'--min'</span>, <span class="st">'--mean'</span>, <span class="st">'--max'</span>], <span class="op">\</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a>           <span class="st">'Action is not one of --min, --mean, or --max: '</span> <span class="op">+</span> action</span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a>        process(filename, action)</span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a><span class="kw">def</span> process(filename, action):</span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a>    <span class="cf">if</span> action <span class="op">==</span> <span class="st">'--min'</span>:</span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--mean'</span>:</span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a>        values <span class="op">=</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--max'</span>:</span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" tabindex="-1"></a>    <span class="cf">for</span> val <span class="kw">in</span> values:</span>
<span id="cb36-24"><a href="#cb36-24" tabindex="-1"></a>        <span class="bu">print</span>(val)</span>
<span id="cb36-25"><a href="#cb36-25" tabindex="-1"></a></span>
<span id="cb36-26"><a href="#cb36-26" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb36-27"><a href="#cb36-27" tabindex="-1"></a>   main()</span></code></pre>
</div>
<p>This is four lines longer than its predecessor, but broken into more
digestible chunks of 8 and 12 lines.</p>
</section><section id="handling-standard-input"><h2 class="section-heading">Handling Standard Input<a class="anchor" aria-label="anchor" href="#handling-standard-input"></a>
</h2>
<hr class="half-width">
<p>The next thing our program has to do is read data from standard input
if no filenames are given so that we can put it in a pipeline, redirect
input to it, and so on. Let’s experiment in another script called
<code>count_stdin.py</code>:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/count_stdin.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> sys.stdin:</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>    count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="bu">print</span>(count, <span class="st">'lines in standard input'</span>)</span></code></pre>
</div>
<p>This little program reads lines from a special “file” called
<code>sys.stdin</code>, which is automatically connected to the
program’s standard input. We don’t have to open it — Python and the
operating system take care of that when the program starts up — but we
can do almost anything with it that we could do to a regular file. Let’s
try running it as if it were a regular command-line program:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> python ../code/count_stdin.py <span class="op">&lt;</span> small_gdp_middle-earth.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>5 lines in standard input</code></pre>
</div>
<p>A common mistake is to try to run something that reads from standard
input like this:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> python ../code/count_stdin.py small_gdp_middle-earth.csv</span></code></pre>
</div>
<p>i.e., to forget the <code>&lt;</code> character that redirects the
file to standard input. In this case, there’s nothing in standard input,
so the program waits at the start of the loop for someone to type
something on the keyboard. Since there’s no way for us to do this, our
program is stuck, and we have to halt it using the
<code>Interrupt</code> option from the <code>Kernel</code> menu in the
Notebook.</p>
<p>We now need to rewrite the program so that it loads data from
<code>sys.stdin</code> if no filenames are provided. Luckily,
<code>pandas.read_csv</code> can handle either a filename or an open
file as its first parameter, so we don’t actually need to change
<code>process</code>. Only <code>main</code> changes:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> cat ../code/readings_06.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a>    action <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">2</span>:]</span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a>    <span class="cf">assert</span> action <span class="kw">in</span> [<span class="st">'--min'</span>, <span class="st">'--mean'</span>, <span class="st">'--max'</span>], (</span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a>        <span class="st">'Action is not one of --min, --mean, or --max: '</span> <span class="op">+</span> action)</span>
<span id="cb43-10"><a href="#cb43-10" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb43-11"><a href="#cb43-11" tabindex="-1"></a>        process(sys.stdin, action)</span>
<span id="cb43-12"><a href="#cb43-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb43-13"><a href="#cb43-13" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb43-14"><a href="#cb43-14" tabindex="-1"></a>            process(filename, action)</span>
<span id="cb43-15"><a href="#cb43-15" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" tabindex="-1"></a><span class="kw">def</span> process(filename, action):</span>
<span id="cb43-17"><a href="#cb43-17" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb43-18"><a href="#cb43-18" tabindex="-1"></a></span>
<span id="cb43-19"><a href="#cb43-19" tabindex="-1"></a>    <span class="cf">if</span> action <span class="op">==</span> <span class="st">'--min'</span>:</span>
<span id="cb43-20"><a href="#cb43-20" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb43-21"><a href="#cb43-21" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--mean'</span>:</span>
<span id="cb43-22"><a href="#cb43-22" tabindex="-1"></a>        values <span class="op">=</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb43-23"><a href="#cb43-23" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--max'</span>:</span>
<span id="cb43-24"><a href="#cb43-24" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb43-25"><a href="#cb43-25" tabindex="-1"></a></span>
<span id="cb43-26"><a href="#cb43-26" tabindex="-1"></a>    <span class="cf">for</span> val <span class="kw">in</span> values:</span>
<span id="cb43-27"><a href="#cb43-27" tabindex="-1"></a>        <span class="bu">print</span>(val)</span>
<span id="cb43-28"><a href="#cb43-28" tabindex="-1"></a></span>
<span id="cb43-29"><a href="#cb43-29" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb43-30"><a href="#cb43-30" tabindex="-1"></a>    main()</span></code></pre>
</div>
<p>Let’s try it out:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> python ../code/readings_06.py <span class="at">--max</span> <span class="op">&lt;</span> small_gdp_discworld.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">60</span></span>
<span><span class="fl">20</span></span></code></pre>
</div>
<p>That’s better. In fact, that’s done: the program now does everything
we set out to do.</p>
<div id="arithmetic-on-the-command-line" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="arithmetic-on-the-command-line" class="callout-inner">
<h3 class="callout-title">Arithmetic on the Command Line<a class="anchor" aria-label="anchor" href="#arithmetic-on-the-command-line"></a>
</h3>
<div class="callout-content">
<p>Write a Python program that adds, subtracts, multiplies, or divides
two numbers provided on the command line:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> python arith.py <span class="at">--add</span> 1 2</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">3.0</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> python arith.py <span class="at">--subtract</span> 3 4</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="op">-</span><span class="fl">1.0</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(sys.argv) <span class="op">==</span> <span class="dv">4</span>, <span class="st">'Need exactly 3 arguments'</span></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a>    operator <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a>    <span class="cf">assert</span> operator <span class="kw">in</span> [<span class="st">'--add'</span>, <span class="st">'--subtract'</span>, <span class="st">'--multiply'</span>, <span class="st">'--divide'</span>], <span class="op">\</span></span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a>        <span class="st">'Operator is not one of --add, --subtract, --multiply, or --divide: bailing out'</span></span>
<span id="cb50-9"><a href="#cb50-9" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb50-10"><a href="#cb50-10" tabindex="-1"></a>        operand1, operand2 <span class="op">=</span> <span class="bu">float</span>(sys.argv[<span class="dv">2</span>]), <span class="bu">float</span>(sys.argv[<span class="dv">3</span>])</span>
<span id="cb50-11"><a href="#cb50-11" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb50-12"><a href="#cb50-12" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'cannot convert input to a number: bailing out'</span>)</span>
<span id="cb50-13"><a href="#cb50-13" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb50-14"><a href="#cb50-14" tabindex="-1"></a></span>
<span id="cb50-15"><a href="#cb50-15" tabindex="-1"></a>    do_arithmetic(operand1, operator, operand2)</span>
<span id="cb50-16"><a href="#cb50-16" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" tabindex="-1"></a><span class="kw">def</span> do_arithmetic(operand1, operator, operand2):</span>
<span id="cb50-18"><a href="#cb50-18" tabindex="-1"></a></span>
<span id="cb50-19"><a href="#cb50-19" tabindex="-1"></a>    <span class="cf">if</span> operator <span class="op">==</span> <span class="st">'add'</span>:</span>
<span id="cb50-20"><a href="#cb50-20" tabindex="-1"></a>        value <span class="op">=</span> operand1 <span class="op">+</span> operand2</span>
<span id="cb50-21"><a href="#cb50-21" tabindex="-1"></a>    <span class="cf">elif</span> operator <span class="op">==</span> <span class="st">'subtract'</span>:</span>
<span id="cb50-22"><a href="#cb50-22" tabindex="-1"></a>        value <span class="op">=</span> operand1 <span class="op">-</span> operand2</span>
<span id="cb50-23"><a href="#cb50-23" tabindex="-1"></a>    <span class="cf">elif</span> operator <span class="op">==</span> <span class="st">'multiply'</span>:</span>
<span id="cb50-24"><a href="#cb50-24" tabindex="-1"></a>        value <span class="op">=</span> operand1 <span class="op">*</span> operand2</span>
<span id="cb50-25"><a href="#cb50-25" tabindex="-1"></a>    <span class="cf">elif</span> operator <span class="op">==</span> <span class="st">'divide'</span>:</span>
<span id="cb50-26"><a href="#cb50-26" tabindex="-1"></a>        value <span class="op">=</span> operand1 <span class="op">/</span> operand2</span>
<span id="cb50-27"><a href="#cb50-27" tabindex="-1"></a>    <span class="bu">print</span>(value)</span>
<span id="cb50-28"><a href="#cb50-28" tabindex="-1"></a></span>
<span id="cb50-29"><a href="#cb50-29" tabindex="-1"></a>main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="finding-particular-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="finding-particular-files" class="callout-inner">
<h3 class="callout-title">Finding Particular Files<a class="anchor" aria-label="anchor" href="#finding-particular-files"></a>
</h3>
<div class="callout-content">
<p>Using the <code>glob</code> module introduced <a href="06-files.html">earlier</a>, write a simple version of
<code>ls</code> that shows files in the current directory with a
particular suffix. A call to this script should look like this:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> python my_ls.py py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">left.py</span></span>
<span><span class="va">right.py</span></span>
<span><span class="va">zero.py</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>    <span class="co">"""prints names of all files with sys.argv as suffix"""</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(sys.argv) <span class="op">&gt;=</span> <span class="dv">2</span>, <span class="st">'Argument list cannot be empty'</span></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a>    suffix <span class="op">=</span> sys.argv[<span class="dv">1</span>] <span class="co"># NB: behaviour is not as you'd expect if sys.argv[1] is *</span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a>    glob_input <span class="op">=</span> <span class="st">'*.'</span> <span class="op">+</span> suffix <span class="co"># construct the input</span></span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a>    glob_output <span class="op">=</span> <span class="bu">sorted</span>(glob.glob(glob_input)) <span class="co"># call the glob function</span></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>    <span class="cf">for</span> item <span class="kw">in</span> glob_output: <span class="co"># print the output</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>        <span class="bu">print</span>(item)</span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a>    <span class="cf">return</span></span>
<span id="cb53-13"><a href="#cb53-13" tabindex="-1"></a></span>
<span id="cb53-14"><a href="#cb53-14" tabindex="-1"></a>main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="changing-flags" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="changing-flags" class="callout-inner">
<h3 class="callout-title">Changing Flags<a class="anchor" aria-label="anchor" href="#changing-flags"></a>
</h3>
<div class="callout-content">
<p>Rewrite <code>readings.py</code> so that it uses <code>-n</code>,
<code>-m</code>, and <code>-x</code> instead of <code>--min</code>,
<code>--mean</code>, and <code>--max</code> respectively. Is the code
easier to read? Is the program easier to understand?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="co"># this is code/readings_07.py</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a>    action <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">2</span>:]</span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a>    <span class="cf">assert</span> action <span class="kw">in</span> [<span class="st">'-n'</span>, <span class="st">'-m'</span>, <span class="st">'-x'</span>], (</span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a>        <span class="st">'Action is not one of -n, -m, or -x: '</span> <span class="op">+</span> action)</span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a>        process(sys.stdin, action)</span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb54-14"><a href="#cb54-14" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb54-15"><a href="#cb54-15" tabindex="-1"></a>            process(filename, action)</span>
<span id="cb54-16"><a href="#cb54-16" tabindex="-1"></a></span>
<span id="cb54-17"><a href="#cb54-17" tabindex="-1"></a><span class="kw">def</span> process(filename, action):</span>
<span id="cb54-18"><a href="#cb54-18" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb54-19"><a href="#cb54-19" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" tabindex="-1"></a>    <span class="cf">if</span> action <span class="op">==</span> <span class="st">'-n'</span>:</span>
<span id="cb54-21"><a href="#cb54-21" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb54-22"><a href="#cb54-22" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'-m'</span>:</span>
<span id="cb54-23"><a href="#cb54-23" tabindex="-1"></a>        values <span class="op">=</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb54-24"><a href="#cb54-24" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'-x'</span>:</span>
<span id="cb54-25"><a href="#cb54-25" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb54-26"><a href="#cb54-26" tabindex="-1"></a></span>
<span id="cb54-27"><a href="#cb54-27" tabindex="-1"></a>    <span class="cf">for</span> val <span class="kw">in</span> values:</span>
<span id="cb54-28"><a href="#cb54-28" tabindex="-1"></a>        <span class="bu">print</span>(val)</span>
<span id="cb54-29"><a href="#cb54-29" tabindex="-1"></a></span>
<span id="cb54-30"><a href="#cb54-30" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb54-31"><a href="#cb54-31" tabindex="-1"></a>    main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="adding-a-help-message" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="adding-a-help-message" class="callout-inner">
<h3 class="callout-title">Adding a Help Message<a class="anchor" aria-label="anchor" href="#adding-a-help-message"></a>
</h3>
<div class="callout-content">
<p>Separately, modify <code>readings.py</code> so that if no parameters
are given (i.e., no action is specified and no filenames are given), it
prints a message explaining how it should be used.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="co"># this is code/readings_08.py</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">==</span> <span class="dv">1</span>:  <span class="co"># no arguments, so print help message</span></span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Usage: python readings_08.py action filenames</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a>              <span class="st">"Action:</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a>              <span class="st">"    Must be one of --min, --mean, or --max.</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a>              <span class="st">"Filenames:</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a>              <span class="st">"    If blank, input is taken from standard input (stdin).</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a>              <span class="st">"    Otherwise, each filename in the list of arguments is processed in turn."</span>)</span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a>    action <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">2</span>:]</span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a>    <span class="cf">assert</span> action <span class="kw">in</span> [<span class="st">'--min'</span>, <span class="st">'--mean'</span>, <span class="st">'--max'</span>], (</span>
<span id="cb55-19"><a href="#cb55-19" tabindex="-1"></a>        <span class="st">'Action is not one of --min, --mean, or --max: '</span> <span class="op">+</span> action)</span>
<span id="cb55-20"><a href="#cb55-20" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb55-21"><a href="#cb55-21" tabindex="-1"></a>        process(sys.stdin, action)</span>
<span id="cb55-22"><a href="#cb55-22" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb55-23"><a href="#cb55-23" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb55-24"><a href="#cb55-24" tabindex="-1"></a>            process(filename, action)</span>
<span id="cb55-25"><a href="#cb55-25" tabindex="-1"></a></span>
<span id="cb55-26"><a href="#cb55-26" tabindex="-1"></a><span class="kw">def</span> process(filename, action):</span>
<span id="cb55-27"><a href="#cb55-27" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb55-28"><a href="#cb55-28" tabindex="-1"></a></span>
<span id="cb55-29"><a href="#cb55-29" tabindex="-1"></a>    <span class="cf">if</span> action <span class="op">==</span> <span class="st">'--min'</span>:</span>
<span id="cb55-30"><a href="#cb55-30" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb55-31"><a href="#cb55-31" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--mean'</span>:</span>
<span id="cb55-32"><a href="#cb55-32" tabindex="-1"></a>        values <span class="op">=</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb55-33"><a href="#cb55-33" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--max'</span>:</span>
<span id="cb55-34"><a href="#cb55-34" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb55-35"><a href="#cb55-35" tabindex="-1"></a></span>
<span id="cb55-36"><a href="#cb55-36" tabindex="-1"></a>    <span class="cf">for</span> val <span class="kw">in</span> values:</span>
<span id="cb55-37"><a href="#cb55-37" tabindex="-1"></a>        <span class="bu">print</span>(val)</span>
<span id="cb55-38"><a href="#cb55-38" tabindex="-1"></a></span>
<span id="cb55-39"><a href="#cb55-39" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb55-40"><a href="#cb55-40" tabindex="-1"></a>    main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="adding-a-default-action" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="adding-a-default-action" class="callout-inner">
<h3 class="callout-title">Adding a Default Action<a class="anchor" aria-label="anchor" href="#adding-a-default-action"></a>
</h3>
<div class="callout-content">
<p>Separately, modify <code>readings.py</code> so that if no action is
given it displays the means of the data.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="co"># this is code/readings_09.py</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a>    action <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a>    <span class="cf">if</span> action <span class="kw">not</span> <span class="kw">in</span> [<span class="st">'--min'</span>, <span class="st">'--mean'</span>, <span class="st">'--max'</span>]:  <span class="co"># if no action given</span></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a>        action <span class="op">=</span> <span class="st">'--mean'</span>  <span class="co"># set a default action, that being mean</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a>        <span class="co"># start the filenames one place earlier in the argv list</span></span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a>        filenames <span class="op">=</span> sys.argv[<span class="dv">1</span>:]</span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a>        filenames <span class="op">=</span> sys.argv[<span class="dv">2</span>:]</span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a>        process(sys.stdin, action)</span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a>            process(filename, action)</span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a><span class="kw">def</span> process(filename, action):</span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a>    data <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>)</span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a></span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a>    <span class="cf">if</span> action <span class="op">==</span> <span class="st">'--min'</span>:</span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">min</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb56-26"><a href="#cb56-26" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--mean'</span>:</span>
<span id="cb56-27"><a href="#cb56-27" tabindex="-1"></a>        values <span class="op">=</span> data.mean(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb56-28"><a href="#cb56-28" tabindex="-1"></a>    <span class="cf">elif</span> action <span class="op">==</span> <span class="st">'--max'</span>:</span>
<span id="cb56-29"><a href="#cb56-29" tabindex="-1"></a>        values <span class="op">=</span> data.<span class="bu">max</span>(axis<span class="op">=</span><span class="st">'columns'</span>)</span>
<span id="cb56-30"><a href="#cb56-30" tabindex="-1"></a></span>
<span id="cb56-31"><a href="#cb56-31" tabindex="-1"></a>    <span class="cf">for</span> val <span class="kw">in</span> values:</span>
<span id="cb56-32"><a href="#cb56-32" tabindex="-1"></a>        <span class="bu">print</span>(val)</span>
<span id="cb56-33"><a href="#cb56-33" tabindex="-1"></a></span>
<span id="cb56-34"><a href="#cb56-34" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb56-35"><a href="#cb56-35" tabindex="-1"></a>    main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="a-file-checker" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-file-checker" class="callout-inner">
<h3 class="callout-title">A File-Checker<a class="anchor" aria-label="anchor" href="#a-file-checker"></a>
</h3>
<div class="callout-content">
<p>Write a program called <code>check.py</code> that takes the names of
one or more GDP-like CSV data files as arguments and checks that all the
files have the same number of rows and columns. What is the best way to
test your program?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">Show me the solution</h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">1</span>:]</span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">&lt;=</span> <span class="dv">1</span>:  <span class="co"># nothing to check</span></span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Only 1 file specified on input'</span>)</span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb57-10"><a href="#cb57-10" tabindex="-1"></a>        nrow0, ncol0 <span class="op">=</span> row_col_count(filenames[<span class="dv">0</span>])</span>
<span id="cb57-11"><a href="#cb57-11" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'First file </span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st"> rows and </span><span class="sc">%d</span><span class="st"> columns'</span> <span class="op">%</span> (</span>
<span id="cb57-12"><a href="#cb57-12" tabindex="-1"></a>            filenames[<span class="dv">0</span>], nrow0, ncol0))</span>
<span id="cb57-13"><a href="#cb57-13" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> filenames[<span class="dv">1</span>:]:</span>
<span id="cb57-14"><a href="#cb57-14" tabindex="-1"></a>            nrow, ncol <span class="op">=</span> row_col_count(filename)</span>
<span id="cb57-15"><a href="#cb57-15" tabindex="-1"></a>            <span class="cf">if</span> nrow <span class="op">!=</span> nrow0 <span class="kw">or</span> ncol <span class="op">!=</span> ncol0:</span>
<span id="cb57-16"><a href="#cb57-16" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">'File </span><span class="sc">%s</span><span class="st"> does not check: </span><span class="sc">%d</span><span class="st"> rows and </span><span class="sc">%d</span><span class="st"> columns'</span></span>
<span id="cb57-17"><a href="#cb57-17" tabindex="-1"></a>                      <span class="op">%</span> (filename, nrow, ncol))</span>
<span id="cb57-18"><a href="#cb57-18" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb57-19"><a href="#cb57-19" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">'File </span><span class="sc">%s</span><span class="st"> checks'</span> <span class="op">%</span> filename)</span>
<span id="cb57-20"><a href="#cb57-20" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb57-21"><a href="#cb57-21" tabindex="-1"></a></span>
<span id="cb57-22"><a href="#cb57-22" tabindex="-1"></a></span>
<span id="cb57-23"><a href="#cb57-23" tabindex="-1"></a><span class="kw">def</span> row_col_count(filename):</span>
<span id="cb57-24"><a href="#cb57-24" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb57-25"><a href="#cb57-25" tabindex="-1"></a>        nrow, ncol <span class="op">=</span> pd.read_csv(filename, index_col<span class="op">=</span><span class="st">'country'</span>).shape</span>
<span id="cb57-26"><a href="#cb57-26" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb57-27"><a href="#cb57-27" tabindex="-1"></a>        <span class="co"># This occurs if the file doesn't have same number of rows and columns,</span></span>
<span id="cb57-28"><a href="#cb57-28" tabindex="-1"></a>        <span class="co"># or if it has non-numeric content</span></span>
<span id="cb57-29"><a href="#cb57-29" tabindex="-1"></a>        nrow, ncol <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb57-30"><a href="#cb57-30" tabindex="-1"></a>    <span class="cf">return</span> nrow, ncol</span>
<span id="cb57-31"><a href="#cb57-31" tabindex="-1"></a></span>
<span id="cb57-32"><a href="#cb57-32" tabindex="-1"></a></span>
<span id="cb57-33"><a href="#cb57-33" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb57-34"><a href="#cb57-34" tabindex="-1"></a>    main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="counting-lines" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="counting-lines" class="callout-inner">
<h3 class="callout-title">Counting Lines<a class="anchor" aria-label="anchor" href="#counting-lines"></a>
</h3>
<div class="callout-content">
<p>Write a program called <code>line_count.py</code> that works like the
Unix <code>wc</code> command:</p>
<ul>
<li>If no filenames are given, it reports the number of lines in
standard input.</li>
<li>If one or more filenames are given, it reports the number of lines
in each, followed by the total number of lines.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">Show me the solution</h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a>    <span class="co">"""print each input filename and the number of lines in it,</span></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="co">       and print the sum of the number of lines"""</span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">1</span>:]</span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a>    sum_nlines <span class="op">=</span> <span class="dv">0</span> <span class="co">#initialize counting variable</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">==</span> <span class="dv">0</span>: <span class="co"># no filenames, just stdin</span></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>        sum_nlines <span class="op">=</span> count_file_like(sys.stdin)</span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'stdin: </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> sum_nlines)</span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a>        <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a>            nlines <span class="op">=</span> count_file(filename)</span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'</span><span class="sc">%s</span><span class="st"> </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> (filename, nlines))</span>
<span id="cb58-16"><a href="#cb58-16" tabindex="-1"></a>            sum_nlines <span class="op">+=</span> nlines</span>
<span id="cb58-17"><a href="#cb58-17" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'total: </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> sum_nlines)</span>
<span id="cb58-18"><a href="#cb58-18" tabindex="-1"></a></span>
<span id="cb58-19"><a href="#cb58-19" tabindex="-1"></a><span class="kw">def</span> count_file(filename):</span>
<span id="cb58-20"><a href="#cb58-20" tabindex="-1"></a>    <span class="co">"""count the number of lines in a file"""</span></span>
<span id="cb58-21"><a href="#cb58-21" tabindex="-1"></a>    f <span class="op">=</span> <span class="bu">open</span>(filename,<span class="st">'r'</span>)</span>
<span id="cb58-22"><a href="#cb58-22" tabindex="-1"></a>    nlines <span class="op">=</span> <span class="bu">len</span>(f.readlines())</span>
<span id="cb58-23"><a href="#cb58-23" tabindex="-1"></a>    f.close()</span>
<span id="cb58-24"><a href="#cb58-24" tabindex="-1"></a>    <span class="cf">return</span>(nlines)</span>
<span id="cb58-25"><a href="#cb58-25" tabindex="-1"></a></span>
<span id="cb58-26"><a href="#cb58-26" tabindex="-1"></a><span class="kw">def</span> count_file_like(file_like):</span>
<span id="cb58-27"><a href="#cb58-27" tabindex="-1"></a>    <span class="co">"""count the number of lines in a file-like object (eg stdin)"""</span></span>
<span id="cb58-28"><a href="#cb58-28" tabindex="-1"></a>    n <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb58-29"><a href="#cb58-29" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> file_like:</span>
<span id="cb58-30"><a href="#cb58-30" tabindex="-1"></a>        n <span class="op">=</span> n<span class="op">+</span><span class="dv">1</span></span>
<span id="cb58-31"><a href="#cb58-31" tabindex="-1"></a>    <span class="cf">return</span> n</span>
<span id="cb58-32"><a href="#cb58-32" tabindex="-1"></a></span>
<span id="cb58-33"><a href="#cb58-33" tabindex="-1"></a>main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="generate-an-error-message" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="generate-an-error-message" class="callout-inner">
<h3 class="callout-title">Generate an Error Message<a class="anchor" aria-label="anchor" href="#generate-an-error-message"></a>
</h3>
<div class="callout-content">
<p>Write a program called <code>check_arguments.py</code> that prints
usage then exits the program if no arguments are provided. (Hint: You
can use <code>sys.exit()</code> to exit the program.)</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="ex">$</span> python check_arguments.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>usage: python check_argument.py filename.txt</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="ex">$</span> python check_arguments.py filename.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Thanks for specifying arguments!</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">Show me the solution</h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a>    script <span class="op">=</span> sys.argv[<span class="dv">0</span>]</span>
<span id="cb63-5"><a href="#cb63-5" tabindex="-1"></a>    arguments <span class="op">=</span> sys.argv[<span class="dv">1</span>:]</span>
<span id="cb63-6"><a href="#cb63-6" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arguments) <span class="op">&gt;=</span> <span class="dv">1</span>:</span>
<span id="cb63-7"><a href="#cb63-7" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Thanks for specifying argument'</span>)</span>
<span id="cb63-8"><a href="#cb63-8" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb63-9"><a href="#cb63-9" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'usage: python check_argument.py filename.txt'</span>)</span>
<span id="cb63-10"><a href="#cb63-10" tabindex="-1"></a>        sys.exit()</span>
<span id="cb63-11"><a href="#cb63-11" tabindex="-1"></a></span>
<span id="cb63-12"><a href="#cb63-12" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb63-13"><a href="#cb63-13" tabindex="-1"></a>    main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The <code>sys</code> library connects a Python program to the system
it is running on.</li>
<li>The list <code>sys.argv</code> contains the command-line arguments
that a program was run with.</li>
<li>Avoid silent failures.</li>
<li>The pseudo-file <code>sys.stdin</code> connects to a program’s
standard input.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/swcarpentry/python-novice-inflammation/edit/main/README.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/swcarpentry/python-novice-inflammation/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/python-novice-inflammation/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/python-novice-inflammation/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.2" class="external-link">sandpaper (0.16.2)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.3" class="external-link">pegboard (0.7.3)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.1" class="external-link">varnish (1.0.1)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/python-novice-inflammation/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/python-novice-inflammation/aio.html",
  "identifier": "https://swcarpentry.github.io/python-novice-inflammation/aio.html",
  "dateCreated": "2014-11-25",
  "dateModified": "2024-03-05",
  "datePublished": "2024-03-05"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

